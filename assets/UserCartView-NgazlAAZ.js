import{_ as x,m as d,a as l,r as b,o as n,c as a,g as k,w as _,h as f,b as t,F as g,i as w,k as C,v as L,t as r,d as y,f as c}from"./index-OK89IDBn.js";import{c as o}from"./cartStore-p2vH-bUE.js";import{L as B}from"./index-T6W-CKt5.js";import{_ as P}from"./loading-img2-JPOuMyya.js";const V="/vue-final/assets/step1-Aummvrye.png",N={data(){return{coupon:""}},computed:{...d(o,["isLoading"]),...d(o,["cart"]),...d(o,["total"]),...d(o,["cartList"]),...d(o,["final_total"])},methods:{...l(o,["getCartList"]),...l(o,["updateQty"]),...l(o,["deleteProduct"]),...l(o,["deleteCart"]),...l(o,["useCoupon"]),formatPrice(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){this.getCartList()},components:{Loading:B}},F=t("img",{style:{width:"200px"},src:P,alt:"to-top-btn"},null,-1),Q={class:"container-fluid cart-bg pt-lg-6 pb-5 py-xl-6 px-3 px-xl-10"},S={class:"row mt-5"},j=t("div",{class:"text-center"},[t("img",{class:"img-fluid",src:V,alt:"step-img"})],-1),R={key:0,class:"card","data-aos":"fade-up"},T={class:"card-header bg-white d-flex justify-content-between py-4 py-xl-5"},U=t("h2",{class:"my-auto"},[t("i",{class:"bi bi-cart4 me-2"}),c(" 商品購物車 ")],-1),$={key:0,class:"card-body p-0 my-5"},A={class:"table fs-6"},D=t("thead",null,[t("tr",null,[t("th",null,"商品資訊"),t("th",null,"單價"),t("th",null,"數量"),t("th",{class:"text-end"},"小計"),t("th")])],-1),q={class:"d-md-flex"},E=["src"],M={class:"ms-md-2"},z={style:{width:"200px"}},G={class:"input-group input-group-sm"},H=["value","onBlur"],I={class:"input-group-text",id:"basic-addon2"},J={class:"text-end"},K=["onClick"],O=t("i",{class:"bi bi-trash3"},null,-1),W=[O],X={class:"input-group ms-auto",style:{width:"200px"}},Y={class:"input-group-append"},Z=t("i",{class:"bi bi-send"},null,-1),tt=[Z],et={class:"card-footer d-flex justify-content-end bg-white py-4"},st={class:"text-end"},ot=t("p",{class:"m-0"},"總計金額",-1),nt={class:"fs-2 text-primary fw-bolder m-0"},it={key:1,class:"py-5"},at=t("h2",{class:"text-center"},[c("目前購物車無任何商品Q_Q"),t("br"),c("趕快來去選購吧")],-1),dt=[at],lt={class:"d-flex justify-content-end my-4"},rt=t("i",{class:"bi bi-chevron-double-right"},null,-1);function ct(s,i,ut,pt,u,p){const v=b("loading"),m=b("RouterLink");return n(),a(g,null,[s.isLoading?(n(),k(v,{key:0,active:s.isLoading,"can-cancel":!1},{default:_(()=>[F]),_:1},8,["active"])):f("",!0),t("main",Q,[t("div",S,[j,s.cartList.length>0?(n(),a("div",R,[t("div",T,[U,t("button",{class:"btn btn-outline-danger fs-5",type:"button",onClick:i[0]||(i[0]=(...e)=>s.deleteCart&&s.deleteCart(...e))}," 清空購物車 ")]),s.cartList.length>0?(n(),a("div",$,[t("table",A,[D,t("tbody",null,[(n(!0),a(g,null,w(s.cartList,e=>(n(),a("tr",{key:e.id},[t("td",q,[t("img",{src:e.product.imagesUrl[0],alt:"product-img",style:{width:"80px"}},null,8,E),t("p",M,r(e.product.title),1)]),t("td",null,"$"+r(p.formatPrice(e.product.price)),1),t("td",z,[t("div",G,[t("input",{min:1,type:"number",class:"form-control",value:e.qty,onBlur:h=>s.updateQty(e,h)},null,40,H),t("span",I,r(e.product.unit),1)])]),t("td",J,"$"+r(p.formatPrice(e.final_total.toFixed(0))),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-danger text-end",type:"button",onClick:h=>s.deleteProduct(e)},W,8,K)])]))),128))])]),t("div",X,[C(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":i[1]||(i[1]=e=>u.coupon=e)},null,512),[[L,u.coupon]]),t("div",Y,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:i[2]||(i[2]=e=>s.useCoupon(u.coupon))},tt)])])])):f("",!0),t("div",et,[t("div",st,[ot,t("p",nt," NT$ "+r(p.formatPrice(s.final_total.toFixed(0))),1)]),y(m,{to:"/booking",class:"btn btn-primary fs-5 text-white ms-3 p-3 shadow-sm"},{default:_(()=>[c(" 前往結帳 ")]),_:1})])])):(n(),a("div",it,dt)),t("div",lt,[y(m,{to:"/products",class:"fs-5 text-decoration-none link-hover"},{default:_(()=>[c(" 繼續購物 "),rt]),_:1})])])])],64)}const ft=x(N,[["render",ct]]);export{ft as default};
