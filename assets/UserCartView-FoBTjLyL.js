import{_ as w,m as l,a as r,r as f,o as a,c as d,g as k,w as m,h as g,b as t,F as y,i as C,k as L,v as B,t as c,d as v,f as u,p as S,j as P}from"./index-VULnoIJU.js";import{c as o}from"./cartStore-EGpCk1cF.js";import{L as V}from"./index-wfxNMEda.js";import{_ as F}from"./loading-img2-JPOuMyya.js";const N="/vue-final/assets/step1-q1TMFgd8.png",j={data(){return{coupon:""}},computed:{...l(o,["isLoading"]),...l(o,["cart"]),...l(o,["total"]),...l(o,["cartList"]),...l(o,["final_total"])},methods:{...r(o,["getCartList"]),...r(o,["updateQty"]),...r(o,["deleteProduct"]),...r(o,["deleteCart"]),...r(o,["useCoupon"]),formatPrice(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){this.getCartList()},components:{Loading:V}},n=e=>(S("data-v-3400ed18"),e=e(),P(),e),I=n(()=>t("img",{style:{width:"200px"},src:F,alt:"to-top-btn"},null,-1)),Q={class:"container-fluid cart-bg pt-lg-6 pb-5 py-xl-6 px-3 px-xl-10"},T={class:"row mt-5"},R=n(()=>t("div",{class:"text-center"},[t("img",{class:"img-fluid",src:N,alt:"step-img"})],-1)),U={key:0,class:"card","data-aos":"fade-up"},$={class:"card-header bg-white d-flex justify-content-between py-3 py-xl-5"},q=n(()=>t("h2",{class:"my-auto"},[t("i",{class:"bi bi-cart4 me-xl-2"}),u(" 商品購物車 ")],-1)),D={key:0,class:"card-body table-responsive p-0 mt-5"},M={class:"table custom-table fs-6"},A=n(()=>t("thead",null,[t("tr",null,[t("th",null,"商品資訊"),t("th",null,"單價"),t("th",null,"數量"),t("th",{class:"text-end"},"小計"),t("th")])],-1)),E={class:"d-md-flex"},z=["src"],G={class:"ms-md-2"},H={style:{width:"200px"}},J={class:"input-group input-group-sm flex-nowrap"},K=["value","onBlur"],O={class:"input-group-text",id:"basic-addon2"},W={class:"text-end"},X=["onClick"],Y=n(()=>t("i",{class:"bi bi-trash3"},null,-1)),Z=[Y],tt={class:"input-group ms-auto mb-5",style:{width:"200px"}},et={class:"input-group-append"},st=n(()=>t("i",{class:"bi bi-send"},null,-1)),ot=[st],nt={class:"card-footer d-flex justify-content-end bg-white py-4"},at={class:"text-end"},it=n(()=>t("p",{class:"m-0"},"總計金額",-1)),dt={class:"fs-2 text-primary fw-bolder m-0"},lt={key:1,class:"py-5"},rt=n(()=>t("h2",{class:"text-center"},[u("目前購物車無任何商品Q_Q"),t("br"),u("趕快來去選購吧")],-1)),ct=[rt],ut={class:"d-flex justify-content-end my-4"},pt=n(()=>t("i",{class:"bi bi-chevron-double-right"},null,-1));function _t(e,i,mt,ht,p,_){const x=f("loading"),h=f("RouterLink");return a(),d(y,null,[e.isLoading?(a(),k(x,{key:0,active:e.isLoading,"can-cancel":!1},{default:m(()=>[I]),_:1},8,["active"])):g("",!0),t("main",Q,[t("div",T,[R,e.cartList.length>0?(a(),d("div",U,[t("div",$,[q,t("button",{class:"btn btn-outline-danger",type:"button",onClick:i[0]||(i[0]=(...s)=>e.deleteCart&&e.deleteCart(...s))}," 清空購物車 ")]),e.cartList.length>0?(a(),d("div",D,[t("table",M,[A,t("tbody",null,[(a(!0),d(y,null,C(e.cartList,s=>(a(),d("tr",{key:s.id},[t("td",E,[t("img",{src:s.product.imagesUrl[0],alt:"product-img",style:{width:"80px"}},null,8,z),t("p",G,c(s.product.title),1)]),t("td",null," $"+c(_.formatPrice(s.product.price)),1),t("td",H,[t("div",J,[t("input",{min:1,step:"1",type:"number",class:"form-control",oninput:"value=value.replace(/[^\\d]/g,'')",style:{width:"50px"},value:s.qty,onBlur:b=>e.updateQty(s,b)},null,40,K),t("span",O,c(s.product.unit),1)])]),t("td",W," $"+c(_.formatPrice(s.final_total.toFixed(0))),1),t("td",null,[t("button",{class:"btn btn-sm btn-outline-danger text-end",type:"button",onClick:b=>e.deleteProduct(s)},Z,8,X)])]))),128))])])])):g("",!0),t("div",tt,[L(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":i[1]||(i[1]=s=>p.coupon=s)},null,512),[[B,p.coupon]]),t("div",et,[t("button",{class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2",onClick:i[2]||(i[2]=s=>e.useCoupon(p.coupon))},ot)])]),t("div",nt,[t("div",at,[it,t("p",dt," NT$ "+c(_.formatPrice(e.final_total.toFixed(0))),1)]),v(h,{to:"/booking",class:"btn btn-primary fs-5 text-white ms-3 p-3 shadow-sm"},{default:m(()=>[u(" 前往結帳 ")]),_:1})])])):(a(),d("div",lt,ct)),t("div",ut,[v(h,{to:"/products",class:"fs-5 text-decoration-none link-hover"},{default:m(()=>[u(" 繼續購物 "),pt]),_:1})])])])],64)}const vt=w(j,[["render",_t],["__scopeId","data-v-3400ed18"]]);export{vt as default};
