import{L as Uo}from"./index-T6W-CKt5.js";import{C as Wo}from"./ckeditor-ZL1-2_WX.js";import{C as qo}from"./main-vRxVWoYL.js";import{_ as Zo,r as Ps,o as Fn,c as jo,b as S,g as Go,h as Jo,k as ze,v as Ts,d as Dn,q as Ko}from"./index-OK89IDBn.js";/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yo(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const Ft=Yo(),Ut={isMac:dr(Ft),isWindows:Xo(Ft),isGecko:Qo(Ft),isSafari:ta(Ft),isiOS:ea(Ft),isAndroid:sa(Ft),isBlink:na(Ft),features:{isRegExpUnicodePropertySupported:ia()}};function dr(s){return s.indexOf("macintosh")>-1}function Xo(s){return s.indexOf("windows")>-1}function Qo(s){return!!s.match(/gecko\/\d+/)}function ta(s){return s.indexOf(" applewebkit/")>-1&&s.indexOf("chrome")===-1}function ea(s){return!!s.match(/iphone|ipad/i)||dr(s)&&navigator.maxTouchPoints>0}function sa(s){return s.indexOf("android")>-1}function na(s){return s.indexOf("chrome/")>-1&&s.indexOf("edge/")<0}function ia(){let s=!1;try{s="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ln(){return function s(){s.called=!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rt{constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=Ln(),this.off=Ln()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Z=new Array(256).fill("").map((s,t)=>("0"+t.toString(16)).slice(-2));function mt(){const s=Math.random()*4294967296>>>0,t=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,n=Math.random()*4294967296>>>0;return"e"+Z[s>>0&255]+Z[s>>8&255]+Z[s>>16&255]+Z[s>>24&255]+Z[t>>0&255]+Z[t>>8&255]+Z[t>>16&255]+Z[t>>24&255]+Z[e>>0&255]+Z[e>>8&255]+Z[e>>16&255]+Z[e>>24&255]+Z[n>>0&255]+Z[n>>8&255]+Z[n>>16&255]+Z[n>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ls={get(s="normal"){return typeof s!="number"?this[s]||this.normal:s},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ra(s,t){const e=Ls.get(t.priority);for(let n=0;n<s.length;n++)if(Ls.get(s[n].priority)<e){s.splice(n,0,t);return}s.push(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const oa="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class f extends Error{constructor(t,e,n){super(aa(t,n)),this.name="CKEditorError",this.context=e,this.data=n}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;const n=new f(t.message,e);throw n.stack=t.stack,n}}function J(s,t){console.warn(...la(s,t))}function gr(s){return`
Read more: ${oa}#error-${s}`}function aa(s,t){const e=new WeakSet,i=t?` ${JSON.stringify(t,(o,a)=>{if(typeof a=="object"&&a!==null){if(e.has(a))return`[object ${a.constructor.name}]`;e.add(a)}return a})}`:"",r=gr(s);return s+i+r}function la(s,t){const e=gr(s);return t?[s,t,e]:[s,e]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ca="41.2.1";/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new f("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=ca;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ie=Symbol("listeningTo"),$s=Symbol("emitterId"),bt=Symbol("delegations"),mr=C(Object);function C(s){if(!s)return mr;class t extends s{on(n,i,r){this.listenTo(this,n,i,r)}once(n,i,r){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,n,a,r)}off(n,i){this.stopListening(this,n,i)}listenTo(n,i,r,o={}){let a,l;this[ie]||(this[ie]={});const c=this[ie];xs(n)||pr(n);const h=xs(n);(a=c[h])||(a=c[h]={emitter:n,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(r),da(this,n,i,r,o)}stopListening(n,i,r){const o=this[ie];let a=n&&xs(n);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||n&&!l||i&&!c))if(r)As(this,n,i,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[i]:As(this,n,i,r));else if(c){for(;r=c.pop();)As(this,n,i,r);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(n,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[ie]}}fire(n,...i){try{const r=n instanceof Rt?n:new Rt(this,n),o=r.name;let a=_r(this,o);if(r.path.push(this),a){const c=[r,...i];a=Array.from(a);for(let h=0;h<a.length&&(a[h].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(o,a[h].callback)),!r.stop.called);h++);}const l=this[bt];if(l){const c=l.get(o),h=l.get("*");c&&$n(c,r,i),h&&$n(h,r,i)}return r.return}catch(r){/* istanbul ignore next -- @preserve */f.rethrowUnexpectedError(r,this)}}delegate(...n){return{to:(i,r)=>{this[bt]||(this[bt]=new Map),n.forEach(o=>{const a=this[bt].get(o);a?a.set(i,r):this[bt].set(o,new Map([[i,r]]))})}}}stopDelegating(n,i){if(this[bt])if(!n)this[bt].clear();else if(!i)this[bt].delete(n);else{const r=this[bt].get(n);r&&r.delete(i)}}_addEventListener(n,i,r){fa(this,n);const o=Hs(this,n),a=Ls.get(r.priority),l={callback:i,priority:a};for(const c of o)ra(c,l)}_removeEventListener(n,i){const r=Hs(this,n);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{C[s]=mr.prototype[s]});function ha(s,t){const e=s[ie];return e&&e[t]?e[t].emitter:null}function pr(s,t){s[$s]||(s[$s]=t||mt())}function xs(s){return s[$s]}function wr(s){return s._events||Object.defineProperty(s,"_events",{value:{}}),s._events}function ua(){return{callbacks:[],childEvents:[]}}function fa(s,t){const e=wr(s);if(e[t])return;let n=t,i=null;const r=[];for(;n!==""&&!e[n];)e[n]=ua(),r.push(e[n]),i&&e[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(n!==""){for(const o of r)o.callbacks=e[n].callbacks.slice();e[n].childEvents.push(i)}}function Hs(s,t){const e=wr(s)[t];if(!e)return[];let n=[e.callbacks];for(let i=0;i<e.childEvents.length;i++){const r=Hs(s,e.childEvents[i]);n=n.concat(r)}return n}function _r(s,t){let e;return!s._events||!(e=s._events[t])||!e.callbacks.length?t.indexOf(":")>-1?_r(s,t.substr(0,t.lastIndexOf(":"))):null:e.callbacks}function $n(s,t,e){for(let[n,i]of s){i?typeof i=="function"&&(i=i(t.name)):i=t.name;const r=new Rt(t.source,i);r.path=[...t.path],n.fire(r,...e)}}function da(s,t,e,n,i){t._addEventListener?t._addEventListener(e,n,i):s._addEventListener.call(t,e,n,i)}function As(s,t,e,n){t._removeEventListener?t._removeEventListener(e,n):s._removeEventListener.call(t,e,n)}var vr=typeof global=="object"&&global&&global.Object===Object&&global,ga=typeof self=="object"&&self&&self.Object===Object&&self,ct=vr||ga||Function("return this")(),pt=ct.Symbol,br=Object.prototype,ma=br.hasOwnProperty,pa=br.toString,ge=pt?pt.toStringTag:void 0;function wa(s){var t=ma.call(s,ge),e=s[ge];try{s[ge]=void 0;var n=!0}catch{}var i=pa.call(s);return n&&(t?s[ge]=e:delete s[ge]),i}var _a=Object.prototype,va=_a.toString;function ba(s){return va.call(s)}var ya="[object Null]",Pa="[object Undefined]",Hn=pt?pt.toStringTag:void 0;function jt(s){return s==null?s===void 0?Pa:ya:Hn&&Hn in Object(s)?wa(s):ba(s)}function wt(s){return s!=null&&typeof s=="object"}var Ta="[object Symbol]";function fs(s){return typeof s=="symbol"||wt(s)&&jt(s)==Ta}function xa(s,t){for(var e=-1,n=s==null?0:s.length,i=Array(n);++e<n;)i[e]=t(s[e],e,s);return i}var _t=Array.isArray,Aa=1/0,zn=pt?pt.prototype:void 0,Un=zn?zn.toString:void 0;function yr(s){if(typeof s=="string")return s;if(_t(s))return xa(s,yr)+"";if(fs(s))return Un?Un.call(s):"";var t=s+"";return t=="0"&&1/s==-Aa?"-0":t}var Ea=/\s/;function ka(s){for(var t=s.length;t--&&Ea.test(s.charAt(t)););return t}var Ca=/^\s+/;function Ma(s){return s&&s.slice(0,ka(s)+1).replace(Ca,"")}function Y(s){var t=typeof s;return s!=null&&(t=="object"||t=="function")}var Wn=NaN,Sa=/^[-+]0x[0-9a-f]+$/i,Ia=/^0b[01]+$/i,Ra=/^0o[0-7]+$/i,Va=parseInt;function qn(s){if(typeof s=="number")return s;if(fs(s))return Wn;if(Y(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=Y(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=Ma(s);var e=Ia.test(s);return e||Ra.test(s)?Va(s.slice(2),e?2:8):Sa.test(s)?Wn:+s}function rn(s){return s}var Oa="[object AsyncFunction]",Na="[object Function]",Ba="[object GeneratorFunction]",Fa="[object Proxy]";function Xe(s){if(!Y(s))return!1;var t=jt(s);return t==Na||t==Ba||t==Oa||t==Fa}var Es=ct["__core-js_shared__"],Zn=function(){var s=/[^.]+$/.exec(Es&&Es.keys&&Es.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function Da(s){return!!Zn&&Zn in s}var La=Function.prototype,$a=La.toString;function Gt(s){if(s!=null){try{return $a.call(s)}catch{}try{return s+""}catch{}}return""}var Ha=/[\\^$.*+?()[\]{}|]/g,za=/^\[object .+?Constructor\]$/,Ua=Function.prototype,Wa=Object.prototype,qa=Ua.toString,Za=Wa.hasOwnProperty,ja=RegExp("^"+qa.call(Za).replace(Ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ga(s){if(!Y(s)||Da(s))return!1;var t=Xe(s)?ja:za;return t.test(Gt(s))}function Ja(s,t){return s==null?void 0:s[t]}function Jt(s,t){var e=Ja(s,t);return Ga(e)?e:void 0}var zs=Jt(ct,"WeakMap"),jn=Object.create,Ka=function(){function s(){}return function(t){if(!Y(t))return{};if(jn)return jn(t);s.prototype=t;var e=new s;return s.prototype=void 0,e}}();function Ya(s,t,e){switch(e.length){case 0:return s.call(t);case 1:return s.call(t,e[0]);case 2:return s.call(t,e[0],e[1]);case 3:return s.call(t,e[0],e[1],e[2])}return s.apply(t,e)}function Xa(s,t){var e=-1,n=s.length;for(t||(t=Array(n));++e<n;)t[e]=s[e];return t}var Qa=800,tl=16,el=Date.now;function sl(s){var t=0,e=0;return function(){var n=el(),i=tl-(n-e);if(e=n,i>0){if(++t>=Qa)return arguments[0]}else t=0;return s.apply(void 0,arguments)}}function nl(s){return function(){return s}}var Qe=function(){try{var s=Jt(Object,"defineProperty");return s({},"",{}),s}catch{}}(),il=Qe?function(s,t){return Qe(s,"toString",{configurable:!0,enumerable:!1,value:nl(t),writable:!0})}:rn;const rl=il;var ol=sl(rl);function al(s,t){for(var e=-1,n=s==null?0:s.length;++e<n&&t(s[e],e,s)!==!1;);return s}var ll=9007199254740991,cl=/^(?:0|[1-9]\d*)$/;function on(s,t){var e=typeof s;return t=t??ll,!!t&&(e=="number"||e!="symbol"&&cl.test(s))&&s>-1&&s%1==0&&s<t}function an(s,t,e){t=="__proto__"&&Qe?Qe(s,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):s[t]=e}function ds(s,t){return s===t||s!==s&&t!==t}var hl=Object.prototype,ul=hl.hasOwnProperty;function Pr(s,t,e){var n=s[t];(!(ul.call(s,t)&&ds(n,e))||e===void 0&&!(t in s))&&an(s,t,e)}function De(s,t,e,n){var i=!e;e||(e={});for(var r=-1,o=t.length;++r<o;){var a=t[r],l=n?n(e[a],s[a],a,e,s):void 0;l===void 0&&(l=s[a]),i?an(e,a,l):Pr(e,a,l)}return e}var Gn=Math.max;function fl(s,t,e){return t=Gn(t===void 0?s.length-1:t,0),function(){for(var n=arguments,i=-1,r=Gn(n.length-t,0),o=Array(r);++i<r;)o[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=e(o),Ya(s,this,a)}}function dl(s,t){return ol(fl(s,t,rn),s+"")}var gl=9007199254740991;function ln(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=gl}function cn(s){return s!=null&&ln(s.length)&&!Xe(s)}function ml(s,t,e){if(!Y(e))return!1;var n=typeof t;return(n=="number"?cn(e)&&on(t,e.length):n=="string"&&t in e)?ds(e[t],s):!1}function pl(s){return dl(function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(r=s.length>3&&typeof r=="function"?(i--,r):void 0,o&&ml(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var a=e[n];a&&s(t,a,n,r)}return t})}var wl=Object.prototype;function hn(s){var t=s&&s.constructor,e=typeof t=="function"&&t.prototype||wl;return s===e}function _l(s,t){for(var e=-1,n=Array(s);++e<s;)n[e]=t(e);return n}var vl="[object Arguments]";function Jn(s){return wt(s)&&jt(s)==vl}var Tr=Object.prototype,bl=Tr.hasOwnProperty,yl=Tr.propertyIsEnumerable,xr=Jn(function(){return arguments}())?Jn:function(s){return wt(s)&&bl.call(s,"callee")&&!yl.call(s,"callee")};function Pl(){return!1}var Ar=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kn=Ar&&typeof module=="object"&&module&&!module.nodeType&&module,Tl=Kn&&Kn.exports===Ar,Yn=Tl?ct.Buffer:void 0,xl=Yn?Yn.isBuffer:void 0,ts=xl||Pl,Al="[object Arguments]",El="[object Array]",kl="[object Boolean]",Cl="[object Date]",Ml="[object Error]",Sl="[object Function]",Il="[object Map]",Rl="[object Number]",Vl="[object Object]",Ol="[object RegExp]",Nl="[object Set]",Bl="[object String]",Fl="[object WeakMap]",Dl="[object ArrayBuffer]",Ll="[object DataView]",$l="[object Float32Array]",Hl="[object Float64Array]",zl="[object Int8Array]",Ul="[object Int16Array]",Wl="[object Int32Array]",ql="[object Uint8Array]",Zl="[object Uint8ClampedArray]",jl="[object Uint16Array]",Gl="[object Uint32Array]",V={};V[$l]=V[Hl]=V[zl]=V[Ul]=V[Wl]=V[ql]=V[Zl]=V[jl]=V[Gl]=!0;V[Al]=V[El]=V[Dl]=V[kl]=V[Ll]=V[Cl]=V[Ml]=V[Sl]=V[Il]=V[Rl]=V[Vl]=V[Ol]=V[Nl]=V[Bl]=V[Fl]=!1;function Jl(s){return wt(s)&&ln(s.length)&&!!V[jt(s)]}function un(s){return function(t){return s(t)}}var Er=typeof exports=="object"&&exports&&!exports.nodeType&&exports,be=Er&&typeof module=="object"&&module&&!module.nodeType&&module,Kl=be&&be.exports===Er,ks=Kl&&vr.process,le=function(){try{var s=be&&be.require&&be.require("util").types;return s||ks&&ks.binding&&ks.binding("util")}catch{}}(),Xn=le&&le.isTypedArray,kr=Xn?un(Xn):Jl,Yl=Object.prototype,Xl=Yl.hasOwnProperty;function Cr(s,t){var e=_t(s),n=!e&&xr(s),i=!e&&!n&&ts(s),r=!e&&!n&&!i&&kr(s),o=e||n||i||r,a=o?_l(s.length,String):[],l=a.length;for(var c in s)(t||Xl.call(s,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||on(c,l)))&&a.push(c);return a}function Mr(s,t){return function(e){return s(t(e))}}var Ql=Mr(Object.keys,Object),tc=Object.prototype,ec=tc.hasOwnProperty;function sc(s){if(!hn(s))return Ql(s);var t=[];for(var e in Object(s))ec.call(s,e)&&e!="constructor"&&t.push(e);return t}function Le(s){return cn(s)?Cr(s):sc(s)}function nc(s){var t=[];if(s!=null)for(var e in Object(s))t.push(e);return t}var ic=Object.prototype,rc=ic.hasOwnProperty;function oc(s){if(!Y(s))return nc(s);var t=hn(s),e=[];for(var n in s)n=="constructor"&&(t||!rc.call(s,n))||e.push(n);return e}function gs(s){return cn(s)?Cr(s,!0):oc(s)}var ac=pl(function(s,t){De(t,gs(t),s)}),lc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cc=/^\w*$/;function fn(s,t){if(_t(s))return!1;var e=typeof s;return e=="number"||e=="symbol"||e=="boolean"||s==null||fs(s)?!0:cc.test(s)||!lc.test(s)||t!=null&&s in Object(t)}var ke=Jt(Object,"create");function hc(){this.__data__=ke?ke(null):{},this.size=0}function uc(s){var t=this.has(s)&&delete this.__data__[s];return this.size-=t?1:0,t}var fc="__lodash_hash_undefined__",dc=Object.prototype,gc=dc.hasOwnProperty;function mc(s){var t=this.__data__;if(ke){var e=t[s];return e===fc?void 0:e}return gc.call(t,s)?t[s]:void 0}var pc=Object.prototype,wc=pc.hasOwnProperty;function _c(s){var t=this.__data__;return ke?t[s]!==void 0:wc.call(t,s)}var vc="__lodash_hash_undefined__";function bc(s,t){var e=this.__data__;return this.size+=this.has(s)?0:1,e[s]=ke&&t===void 0?vc:t,this}function Wt(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Wt.prototype.clear=hc;Wt.prototype.delete=uc;Wt.prototype.get=mc;Wt.prototype.has=_c;Wt.prototype.set=bc;function yc(){this.__data__=[],this.size=0}function ms(s,t){for(var e=s.length;e--;)if(ds(s[e][0],t))return e;return-1}var Pc=Array.prototype,Tc=Pc.splice;function xc(s){var t=this.__data__,e=ms(t,s);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Tc.call(t,e,1),--this.size,!0}function Ac(s){var t=this.__data__,e=ms(t,s);return e<0?void 0:t[e][1]}function Ec(s){return ms(this.__data__,s)>-1}function kc(s,t){var e=this.__data__,n=ms(e,s);return n<0?(++this.size,e.push([s,t])):e[n][1]=t,this}function At(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}At.prototype.clear=yc;At.prototype.delete=xc;At.prototype.get=Ac;At.prototype.has=Ec;At.prototype.set=kc;var Ce=Jt(ct,"Map");function Cc(){this.size=0,this.__data__={hash:new Wt,map:new(Ce||At),string:new Wt}}function Mc(s){var t=typeof s;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?s!=="__proto__":s===null}function ps(s,t){var e=s.__data__;return Mc(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Sc(s){var t=ps(this,s).delete(s);return this.size-=t?1:0,t}function Ic(s){return ps(this,s).get(s)}function Rc(s){return ps(this,s).has(s)}function Vc(s,t){var e=ps(this,s),n=e.size;return e.set(s,t),this.size+=e.size==n?0:1,this}function Et(s){var t=-1,e=s==null?0:s.length;for(this.clear();++t<e;){var n=s[t];this.set(n[0],n[1])}}Et.prototype.clear=Cc;Et.prototype.delete=Sc;Et.prototype.get=Ic;Et.prototype.has=Rc;Et.prototype.set=Vc;var Oc="Expected a function";function dn(s,t){if(typeof s!="function"||t!=null&&typeof t!="function")throw new TypeError(Oc);var e=function(){var n=arguments,i=t?t.apply(this,n):n[0],r=e.cache;if(r.has(i))return r.get(i);var o=s.apply(this,n);return e.cache=r.set(i,o)||r,o};return e.cache=new(dn.Cache||Et),e}dn.Cache=Et;var Nc=500;function Bc(s){var t=dn(s,function(n){return e.size===Nc&&e.clear(),n}),e=t.cache;return t}var Fc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dc=/\\(\\)?/g,Lc=Bc(function(s){var t=[];return s.charCodeAt(0)===46&&t.push(""),s.replace(Fc,function(e,n,i,r){t.push(i?r.replace(Dc,"$1"):n||e)}),t});function Sr(s){return s==null?"":yr(s)}function gn(s,t){return _t(s)?s:fn(s,t)?[s]:Lc(Sr(s))}var $c=1/0;function $e(s){if(typeof s=="string"||fs(s))return s;var t=s+"";return t=="0"&&1/s==-$c?"-0":t}function mn(s,t){t=gn(t,s);for(var e=0,n=t.length;s!=null&&e<n;)s=s[$e(t[e++])];return e&&e==n?s:void 0}function Ir(s,t,e){var n=s==null?void 0:mn(s,t);return n===void 0?e:n}function Rr(s,t){for(var e=-1,n=t.length,i=s.length;++e<n;)s[i+e]=t[e];return s}var pn=Mr(Object.getPrototypeOf,Object),Hc="[object Object]",zc=Function.prototype,Uc=Object.prototype,Vr=zc.toString,Wc=Uc.hasOwnProperty,qc=Vr.call(Object);function qt(s){if(!wt(s)||jt(s)!=Hc)return!1;var t=pn(s);if(t===null)return!0;var e=Wc.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Vr.call(e)==qc}function Zc(s,t,e){var n=-1,i=s.length;t<0&&(t=-t>i?0:i+t),e=e>i?i:e,e<0&&(e+=i),i=t>e?0:e-t>>>0,t>>>=0;for(var r=Array(i);++n<i;)r[n]=s[n+t];return r}function jc(){this.__data__=new At,this.size=0}function Gc(s){var t=this.__data__,e=t.delete(s);return this.size=t.size,e}function Jc(s){return this.__data__.get(s)}function Kc(s){return this.__data__.has(s)}var Yc=200;function Xc(s,t){var e=this.__data__;if(e instanceof At){var n=e.__data__;if(!Ce||n.length<Yc-1)return n.push([s,t]),this.size=++e.size,this;e=this.__data__=new Et(n)}return e.set(s,t),this.size=e.size,this}function gt(s){var t=this.__data__=new At(s);this.size=t.size}gt.prototype.clear=jc;gt.prototype.delete=Gc;gt.prototype.get=Jc;gt.prototype.has=Kc;gt.prototype.set=Xc;function Qc(s,t){return s&&De(t,Le(t),s)}function th(s,t){return s&&De(t,gs(t),s)}var Or=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qn=Or&&typeof module=="object"&&module&&!module.nodeType&&module,eh=Qn&&Qn.exports===Or,ti=eh?ct.Buffer:void 0,ei=ti?ti.allocUnsafe:void 0;function sh(s,t){if(t)return s.slice();var e=s.length,n=ei?ei(e):new s.constructor(e);return s.copy(n),n}function nh(s,t){for(var e=-1,n=s==null?0:s.length,i=0,r=[];++e<n;){var o=s[e];t(o,e,s)&&(r[i++]=o)}return r}function Nr(){return[]}var ih=Object.prototype,rh=ih.propertyIsEnumerable,si=Object.getOwnPropertySymbols,wn=si?function(s){return s==null?[]:(s=Object(s),nh(si(s),function(t){return rh.call(s,t)}))}:Nr;function oh(s,t){return De(s,wn(s),t)}var ah=Object.getOwnPropertySymbols,Br=ah?function(s){for(var t=[];s;)Rr(t,wn(s)),s=pn(s);return t}:Nr;function lh(s,t){return De(s,Br(s),t)}function Fr(s,t,e){var n=t(s);return _t(s)?n:Rr(n,e(s))}function Us(s){return Fr(s,Le,wn)}function ch(s){return Fr(s,gs,Br)}var Ws=Jt(ct,"DataView"),qs=Jt(ct,"Promise"),Zs=Jt(ct,"Set"),ni="[object Map]",hh="[object Object]",ii="[object Promise]",ri="[object Set]",oi="[object WeakMap]",ai="[object DataView]",uh=Gt(Ws),fh=Gt(Ce),dh=Gt(qs),gh=Gt(Zs),mh=Gt(zs),Lt=jt;(Ws&&Lt(new Ws(new ArrayBuffer(1)))!=ai||Ce&&Lt(new Ce)!=ni||qs&&Lt(qs.resolve())!=ii||Zs&&Lt(new Zs)!=ri||zs&&Lt(new zs)!=oi)&&(Lt=function(s){var t=jt(s),e=t==hh?s.constructor:void 0,n=e?Gt(e):"";if(n)switch(n){case uh:return ai;case fh:return ni;case dh:return ii;case gh:return ri;case mh:return oi}return t});const Me=Lt;var ph=Object.prototype,wh=ph.hasOwnProperty;function _h(s){var t=s.length,e=new s.constructor(t);return t&&typeof s[0]=="string"&&wh.call(s,"index")&&(e.index=s.index,e.input=s.input),e}var es=ct.Uint8Array;function _n(s){var t=new s.constructor(s.byteLength);return new es(t).set(new es(s)),t}function vh(s,t){var e=t?_n(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.byteLength)}var bh=/\w*$/;function yh(s){var t=new s.constructor(s.source,bh.exec(s));return t.lastIndex=s.lastIndex,t}var li=pt?pt.prototype:void 0,ci=li?li.valueOf:void 0;function Ph(s){return ci?Object(ci.call(s)):{}}function Th(s,t){var e=t?_n(s.buffer):s.buffer;return new s.constructor(e,s.byteOffset,s.length)}var xh="[object Boolean]",Ah="[object Date]",Eh="[object Map]",kh="[object Number]",Ch="[object RegExp]",Mh="[object Set]",Sh="[object String]",Ih="[object Symbol]",Rh="[object ArrayBuffer]",Vh="[object DataView]",Oh="[object Float32Array]",Nh="[object Float64Array]",Bh="[object Int8Array]",Fh="[object Int16Array]",Dh="[object Int32Array]",Lh="[object Uint8Array]",$h="[object Uint8ClampedArray]",Hh="[object Uint16Array]",zh="[object Uint32Array]";function Uh(s,t,e){var n=s.constructor;switch(t){case Rh:return _n(s);case xh:case Ah:return new n(+s);case Vh:return vh(s,e);case Oh:case Nh:case Bh:case Fh:case Dh:case Lh:case $h:case Hh:case zh:return Th(s,e);case Eh:return new n;case kh:case Sh:return new n(s);case Ch:return yh(s);case Mh:return new n;case Ih:return Ph(s)}}function Wh(s){return typeof s.constructor=="function"&&!hn(s)?Ka(pn(s)):{}}var qh="[object Map]";function Zh(s){return wt(s)&&Me(s)==qh}var hi=le&&le.isMap,jh=hi?un(hi):Zh,Gh="[object Set]";function Jh(s){return wt(s)&&Me(s)==Gh}var ui=le&&le.isSet,Kh=ui?un(ui):Jh,Yh=1,Xh=2,Qh=4,Dr="[object Arguments]",tu="[object Array]",eu="[object Boolean]",su="[object Date]",nu="[object Error]",Lr="[object Function]",iu="[object GeneratorFunction]",ru="[object Map]",ou="[object Number]",$r="[object Object]",au="[object RegExp]",lu="[object Set]",cu="[object String]",hu="[object Symbol]",uu="[object WeakMap]",fu="[object ArrayBuffer]",du="[object DataView]",gu="[object Float32Array]",mu="[object Float64Array]",pu="[object Int8Array]",wu="[object Int16Array]",_u="[object Int32Array]",vu="[object Uint8Array]",bu="[object Uint8ClampedArray]",yu="[object Uint16Array]",Pu="[object Uint32Array]",I={};I[Dr]=I[tu]=I[fu]=I[du]=I[eu]=I[su]=I[gu]=I[mu]=I[pu]=I[wu]=I[_u]=I[ru]=I[ou]=I[$r]=I[au]=I[lu]=I[cu]=I[hu]=I[vu]=I[bu]=I[yu]=I[Pu]=!0;I[nu]=I[Lr]=I[uu]=!1;function ye(s,t,e,n,i,r){var o,a=t&Yh,l=t&Xh,c=t&Qh;if(e&&(o=i?e(s,n,i,r):e(s)),o!==void 0)return o;if(!Y(s))return s;var h=_t(s);if(h){if(o=_h(s),!a)return Xa(s,o)}else{var u=Me(s),g=u==Lr||u==iu;if(ts(s))return sh(s,a);if(u==$r||u==Dr||g&&!i){if(o=l||g?{}:Wh(s),!a)return l?lh(s,th(o,s)):oh(s,Qc(o,s))}else{if(!I[u])return i?s:{};o=Uh(s,u,a)}}r||(r=new gt);var p=r.get(s);if(p)return p;r.set(s,o),Kh(s)?s.forEach(function(k){o.add(ye(k,t,e,k,s,r))}):jh(s)&&s.forEach(function(k,L){o.set(L,ye(k,t,e,L,s,r))});var y=c?l?ch:Us:l?gs:Le,E=h?void 0:y(s);return al(E||s,function(k,L){E&&(L=k,k=s[L]),Pr(o,L,ye(k,t,e,L,s,r))}),o}var Tu=4;function Hr(s){return ye(s,Tu)}var xu=1,Au=4;function Eu(s,t){return t=typeof t=="function"?t:void 0,ye(s,xu|Au,t)}var ku="__lodash_hash_undefined__";function Cu(s){return this.__data__.set(s,ku),this}function Mu(s){return this.__data__.has(s)}function ss(s){var t=-1,e=s==null?0:s.length;for(this.__data__=new Et;++t<e;)this.add(s[t])}ss.prototype.add=ss.prototype.push=Cu;ss.prototype.has=Mu;function Su(s,t){for(var e=-1,n=s==null?0:s.length;++e<n;)if(t(s[e],e,s))return!0;return!1}function Iu(s,t){return s.has(t)}var Ru=1,Vu=2;function zr(s,t,e,n,i,r){var o=e&Ru,a=s.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var c=r.get(s),h=r.get(t);if(c&&h)return c==t&&h==s;var u=-1,g=!0,p=e&Vu?new ss:void 0;for(r.set(s,t),r.set(t,s);++u<a;){var y=s[u],E=t[u];if(n)var k=o?n(E,y,u,t,s,r):n(y,E,u,s,t,r);if(k!==void 0){if(k)continue;g=!1;break}if(p){if(!Su(t,function(L,Q){if(!Iu(p,Q)&&(y===L||i(y,L,e,n,r)))return p.push(Q)})){g=!1;break}}else if(!(y===E||i(y,E,e,n,r))){g=!1;break}}return r.delete(s),r.delete(t),g}function Ou(s){var t=-1,e=Array(s.size);return s.forEach(function(n,i){e[++t]=[i,n]}),e}function Nu(s){var t=-1,e=Array(s.size);return s.forEach(function(n){e[++t]=n}),e}var Bu=1,Fu=2,Du="[object Boolean]",Lu="[object Date]",$u="[object Error]",Hu="[object Map]",zu="[object Number]",Uu="[object RegExp]",Wu="[object Set]",qu="[object String]",Zu="[object Symbol]",ju="[object ArrayBuffer]",Gu="[object DataView]",fi=pt?pt.prototype:void 0,Cs=fi?fi.valueOf:void 0;function Ju(s,t,e,n,i,r,o){switch(e){case Gu:if(s.byteLength!=t.byteLength||s.byteOffset!=t.byteOffset)return!1;s=s.buffer,t=t.buffer;case ju:return!(s.byteLength!=t.byteLength||!r(new es(s),new es(t)));case Du:case Lu:case zu:return ds(+s,+t);case $u:return s.name==t.name&&s.message==t.message;case Uu:case qu:return s==t+"";case Hu:var a=Ou;case Wu:var l=n&Bu;if(a||(a=Nu),s.size!=t.size&&!l)return!1;var c=o.get(s);if(c)return c==t;n|=Fu,o.set(s,t);var h=zr(a(s),a(t),n,i,r,o);return o.delete(s),h;case Zu:if(Cs)return Cs.call(s)==Cs.call(t)}return!1}var Ku=1,Yu=Object.prototype,Xu=Yu.hasOwnProperty;function Qu(s,t,e,n,i,r){var o=e&Ku,a=Us(s),l=a.length,c=Us(t),h=c.length;if(l!=h&&!o)return!1;for(var u=l;u--;){var g=a[u];if(!(o?g in t:Xu.call(t,g)))return!1}var p=r.get(s),y=r.get(t);if(p&&y)return p==t&&y==s;var E=!0;r.set(s,t),r.set(t,s);for(var k=o;++u<l;){g=a[u];var L=s[g],Q=t[g];if(n)var ee=o?n(Q,L,g,t,s,r):n(L,Q,g,s,t,r);if(!(ee===void 0?L===Q||i(L,Q,e,n,r):ee)){E=!1;break}k||(k=g=="constructor")}if(E&&!k){var vt=s.constructor,ut=t.constructor;vt!=ut&&"constructor"in s&&"constructor"in t&&!(typeof vt=="function"&&vt instanceof vt&&typeof ut=="function"&&ut instanceof ut)&&(E=!1)}return r.delete(s),r.delete(t),E}var t0=1,di="[object Arguments]",gi="[object Array]",Ue="[object Object]",e0=Object.prototype,mi=e0.hasOwnProperty;function s0(s,t,e,n,i,r){var o=_t(s),a=_t(t),l=o?gi:Me(s),c=a?gi:Me(t);l=l==di?Ue:l,c=c==di?Ue:c;var h=l==Ue,u=c==Ue,g=l==c;if(g&&ts(s)){if(!ts(t))return!1;o=!0,h=!1}if(g&&!h)return r||(r=new gt),o||kr(s)?zr(s,t,e,n,i,r):Ju(s,t,l,e,n,i,r);if(!(e&t0)){var p=h&&mi.call(s,"__wrapped__"),y=u&&mi.call(t,"__wrapped__");if(p||y){var E=p?s.value():s,k=y?t.value():t;return r||(r=new gt),i(E,k,e,n,r)}}return g?(r||(r=new gt),Qu(s,t,e,n,i,r)):!1}function ws(s,t,e,n,i){return s===t?!0:s==null||t==null||!wt(s)&&!wt(t)?s!==s&&t!==t:s0(s,t,e,n,ws,i)}var n0=1,i0=2;function r0(s,t,e,n){var i=e.length,r=i,o=!n;if(s==null)return!r;for(s=Object(s);i--;){var a=e[i];if(o&&a[2]?a[1]!==s[a[0]]:!(a[0]in s))return!1}for(;++i<r;){a=e[i];var l=a[0],c=s[l],h=a[1];if(o&&a[2]){if(c===void 0&&!(l in s))return!1}else{var u=new gt;if(n)var g=n(c,h,l,s,t,u);if(!(g===void 0?ws(h,c,n0|i0,n,u):g))return!1}}return!0}function Ur(s){return s===s&&!Y(s)}function o0(s){for(var t=Le(s),e=t.length;e--;){var n=t[e],i=s[n];t[e]=[n,i,Ur(i)]}return t}function Wr(s,t){return function(e){return e==null?!1:e[s]===t&&(t!==void 0||s in Object(e))}}function a0(s){var t=o0(s);return t.length==1&&t[0][2]?Wr(t[0][0],t[0][1]):function(e){return e===s||r0(e,s,t)}}function l0(s,t){return s!=null&&t in Object(s)}function c0(s,t,e){t=gn(t,s);for(var n=-1,i=t.length,r=!1;++n<i;){var o=$e(t[n]);if(!(r=s!=null&&e(s,o)))break;s=s[o]}return r||++n!=i?r:(i=s==null?0:s.length,!!i&&ln(i)&&on(o,i)&&(_t(s)||xr(s)))}function h0(s,t){return s!=null&&c0(s,t,l0)}var u0=1,f0=2;function d0(s,t){return fn(s)&&Ur(t)?Wr($e(s),t):function(e){var n=Ir(e,s);return n===void 0&&n===t?h0(e,s):ws(t,n,u0|f0)}}function g0(s){return function(t){return t==null?void 0:t[s]}}function m0(s){return function(t){return mn(t,s)}}function p0(s){return fn(s)?g0($e(s)):m0(s)}function w0(s){return typeof s=="function"?s:s==null?rn:typeof s=="object"?_t(s)?d0(s[0],s[1]):a0(s):p0(s)}function _0(s){return function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var l=o[s?a:++i];if(e(r[l],l,r)===!1)break}return t}}var v0=_0();function b0(s,t){return s&&v0(s,t,Le)}var Ms=function(){return ct.Date.now()},y0="Expected a function",P0=Math.max,T0=Math.min;function x0(s,t,e){var n,i,r,o,a,l,c=0,h=!1,u=!1,g=!0;if(typeof s!="function")throw new TypeError(y0);t=qn(t)||0,Y(e)&&(h=!!e.leading,u="maxWait"in e,r=u?P0(qn(e.maxWait)||0,t):r,g="trailing"in e?!!e.trailing:g);function p(v){var T=n,b=i;return n=i=void 0,c=v,o=s.apply(b,T),o}function y(v){return c=v,a=setTimeout(L,t),h?p(v):o}function E(v){var T=v-l,b=v-c,F=t-T;return u?T0(F,r-b):F}function k(v){var T=v-l,b=v-c;return l===void 0||T>=t||T<0||u&&b>=r}function L(){var v=Ms();if(k(v))return Q(v);a=setTimeout(L,E(v))}function Q(v){return a=void 0,g&&n?p(v):(n=i=void 0,o)}function ee(){a!==void 0&&clearTimeout(a),c=0,n=l=i=a=void 0}function vt(){return a===void 0?o:Q(Ms())}function ut(){var v=Ms(),T=k(v);if(n=arguments,i=this,l=v,T){if(a===void 0)return y(l);if(u)return clearTimeout(a),a=setTimeout(L,t),p(l)}return a===void 0&&(a=setTimeout(L,t)),o}return ut.cancel=ee,ut.flush=vt,ut}function A0(s){var t=s==null?0:s.length;return t?s[t-1]:void 0}var qr=/[\\^$.*+?()[\]{}|]/g,E0=RegExp(qr.source);function k0(s){return s=Sr(s),s&&E0.test(s)?s.replace(qr,"\\$&"):s}function C0(s,t){return t.length<2?s:mn(s,Zc(t,0,-1))}function vn(s){return wt(s)&&s.nodeType===1&&!qt(s)}function pi(s,t){return ws(s,t)}function M0(s,t){var e={};return t=w0(t),b0(s,function(n,i,r){an(e,i,t(n,i,r))}),e}function S0(s,t){return t=gn(t,s),s=C0(s,t),s==null||delete s[$e(A0(t))]}function I0(s,t){return s==null?!0:S0(s,t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ns=Symbol("observableProperties"),_s=Symbol("boundObservables"),is=Symbol("boundProperties"),se=Symbol("decoratedMethods"),wi=Symbol("decoratedOriginal"),Zr=W(C());function W(s){if(!s)return Zr;class t extends s{set(n,i){if(Y(n)){Object.keys(n).forEach(o=>{this.set(o,n[o])},this);return}Ss(this);const r=this[ns];if(n in this&&!r.has(n))throw new f("observable-set-cannot-override",this);Object.defineProperty(this,n,{enumerable:!0,configurable:!0,get(){return r.get(n)},set(o){const a=r.get(n);let l=this.fire(`set:${n}`,n,o,a);l===void 0&&(l=o),(a!==l||!r.has(n))&&(r.set(n,l),this.fire(`change:${n}`,n,l,a))}}),this[n]=i}bind(...n){if(!n.length||!_i(n))throw new f("observable-bind-wrong-properties",this);if(new Set(n).size!==n.length)throw new f("observable-bind-duplicate-properties",this);Ss(this);const i=this[is];n.forEach(o=>{if(i.has(o))throw new f("observable-bind-rebind",this)});const r=new Map;return n.forEach(o=>{const a={property:o,to:[]};i.set(o,a),r.set(o,a)}),{to:R0,toMany:V0,_observable:this,_bindProperties:n,_to:[],_bindings:r}}unbind(...n){if(!this[ns])return;const i=this[is],r=this[_s];if(n.length){if(!_i(n))throw new f("observable-unbind-wrong-properties",this);n.forEach(o=>{const a=i.get(o);a&&(a.to.forEach(([l,c])=>{const h=r.get(l),u=h[c];u.delete(a),u.size||delete h[c],Object.keys(h).length||(r.delete(l),this.stopListening(l,"change"))}),i.delete(o))})}else r.forEach((o,a)=>{this.stopListening(a,"change")}),r.clear(),i.clear()}decorate(n){Ss(this);const i=this[n];if(!i)throw new f("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:n});this.on(n,(r,o)=>{r.return=i.apply(this,o)}),this[n]=function(...r){return this.fire(n,r)},this[n][wi]=i,this[se]||(this[se]=[]),this[se].push(n)}stopListening(n,i,r){if(!n&&this[se]){for(const o of this[se])this[o]=this[o][wi];delete this[se]}super.stopListening(n,i,r)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{W[s]=Zr.prototype[s]});function Ss(s){s[ns]||(Object.defineProperty(s,ns,{value:new Map}),Object.defineProperty(s,_s,{value:new Map}),Object.defineProperty(s,is,{value:new Map}))}function R0(...s){const t=N0(...s),e=Array.from(this._bindings.keys()),n=e.length;if(!t.callback&&t.to.length>1)throw new f("observable-bind-to-no-callback",this);if(n>1&&t.callback)throw new f("observable-bind-to-extra-callback",this);t.to.forEach(i=>{if(i.properties.length&&i.properties.length!==n)throw new f("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(e[0]).callback=t.callback),D0(this._observable,this._to),F0(this),this._bindProperties.forEach(i=>{jr(this._observable,i)})}function V0(s,t,e){if(this._bindings.size>1)throw new f("observable-bind-to-many-not-one-binding",this);this.to(...O0(s,t),e)}function O0(s,t){const e=s.map(n=>[n,t]);return Array.prototype.concat.apply([],e)}function _i(s){return s.every(t=>typeof t=="string")}function N0(...s){if(!s.length)throw new f("observable-bind-to-parse-error",null);const t={to:[]};let e;return typeof s[s.length-1]=="function"&&(t.callback=s.pop()),s.forEach(n=>{if(typeof n=="string")e.properties.push(n);else if(typeof n=="object")e={observable:n,properties:[]},t.to.push(e);else throw new f("observable-bind-to-parse-error",null)}),t}function B0(s,t,e,n){const i=s[_s],r=i.get(e),o=r||{};o[n]||(o[n]=new Set),o[n].add(t),r||i.set(e,o)}function F0(s){let t;s._bindings.forEach((e,n)=>{s._to.forEach(i=>{t=i.properties[e.callback?0:s._bindProperties.indexOf(n)],e.to.push([i.observable,t]),B0(s._observable,e,i.observable,t)})})}function jr(s,t){const n=s[is].get(t);let i;n.callback?i=n.callback.apply(s,n.to.map(r=>r[0][r[1]])):(i=n.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(s,t)?s[t]=i:s.set(t,i)}function D0(s,t){t.forEach(e=>{const n=s[_s];let i;n.get(e.observable)||s.listenTo(e.observable,"change",(r,o)=>{i=n.get(e.observable)[o],i&&i.forEach(a=>{jr(s,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vi(s){let t=0;for(const e of s)t++;return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function G(s,t){const e=Math.min(s.length,t.length);for(let n=0;n<e;n++)if(s[n]!=t[n])return n;return s.length==t.length?"same":s.length<t.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function st(s){return!!(s&&s[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rs(s){if(s){if(s.defaultView)return s instanceof s.defaultView.Document;if(s.ownerDocument&&s.ownerDocument.defaultView)return s instanceof s.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function os(s){const t=Object.prototype.toString.apply(s);return t=="[object Window]"||t=="[object global]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Gr=Vt(C());function Vt(s){if(!s)return Gr;class t extends s{listenTo(n,i,r,o={}){if(rs(n)||os(n)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(n,a)||new L0(n,a);this.listenTo(l,i,r,o)}else super.listenTo(n,i,r,o)}stopListening(n,i,r){if(rs(n)||os(n)){const o=this._getAllProxyEmitters(n);for(const a of o)this.stopListening(a,i,r)}else super.stopListening(n,i,r)}_getProxyEmitter(n,i){return ha(this,Jr(n,i))}_getAllProxyEmitters(n){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(n,i)).filter(i=>!!i)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{Vt[s]=Gr.prototype[s]});class L0 extends C(){constructor(t,e){super(),pr(this,Jr(t,e)),this._domNode=t,this._options=e}attach(t){if(this._domListeners&&this._domListeners[t])return;const e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e}detach(t){let e;this._domListeners[t]&&(!(e=this._events[t])||!e.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,e,n){this.attach(t),C().prototype._addEventListener.call(this,t,e,n)}_removeEventListener(t,e){C().prototype._removeEventListener.call(this,t,e),this.detach(t)}_createDomListener(t){const e=n=>{this.fire(t,n)};return e.removeListener=()=>{this._domNode.removeEventListener(t,e,this._options),delete this._domListeners[t]},e}}function $0(s){return s["data-ck-expando"]||(s["data-ck-expando"]=mt())}function Jr(s,t){let e=$0(s);for(const n of Object.keys(t).sort())t[n]&&(e+="-"+n);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let js;try{js={window,document}}catch{/* istanbul ignore next -- @preserve */js={window:{},document:{}}}const P=js;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function H0(s){const t=[];let e=s;for(;e&&e.nodeType!=Node.DOCUMENT_NODE;)t.unshift(e),e=e.parentNode;return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kr(s){const t=s.ownerDocument.defaultView.getComputedStyle(s);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tt(s){return Object.prototype.toString.call(s)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yr(s){return Object.prototype.toString.apply(s)=="[object Range]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xr(s){return!s||!s.parentNode||s.offsetParent===P.document.body?null:s.offsetParent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Qr=["top","right","bottom","left","width","height"];class U{constructor(t){const e=Yr(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),Gs(t)||e)if(e){const n=U.getDomRangeRects(t);We(this,U.getBoundingRect(n))}else We(this,t.getBoundingClientRect());else if(os(t)){const{innerWidth:n,innerHeight:i}=t;We(this,{top:0,right:n,bottom:i,left:0,width:n,height:i})}else We(this,t)}clone(){return new U(this)}moveTo(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}moveBy(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}getIntersection(t){const e={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(e.width=e.right-e.left,e.height=e.bottom-e.top,e.width<0||e.height<0)return null;{const n=new U(e);return n._source=this._source,n}}getIntersectionArea(t){const e=this.getIntersection(t);return e?e.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let e=this.clone();if(bi(t))return e;let n=t,i=t.parentNode||t.commonAncestorContainer,r;for(;i&&!bi(i);){const o=z0(i)==="visible";n instanceof HTMLElement&&yi(n)==="absolute"&&(r=n);const a=yi(i);if(o||r&&(a==="relative"&&o||a!=="relative")){n=i,i=i.parentNode;continue}const l=new U(i),c=e.getIntersection(l);if(c)c.getArea()<e.getArea()&&(e=c);else return null;n=i,i=i.parentNode}return e}isEqual(t){for(const e of Qr)if(this[e]!==t[e])return!1;return!0}contains(t){const e=this.getIntersection(t);return!!(e&&e.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:e}=P.window,n=this.clone().moveBy(t,e);if(Gs(n._source)){const i=Xr(n._source);i&&U0(n,i)}return n}excludeScrollbarsAndBorders(){const t=this._source;let e,n,i;if(os(t))e=t.innerWidth-t.document.documentElement.clientWidth,n=t.innerHeight-t.document.documentElement.clientHeight,i=t.getComputedStyle(t.document.documentElement).direction;else{const r=Kr(t);e=t.offsetWidth-t.clientWidth-r.left-r.right,n=t.offsetHeight-t.clientHeight-r.top-r.bottom,i=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=e,i==="ltr"?this.right-=e:this.left+=e,this.height-=n,this.bottom-=n,this}static getDomRangeRects(t){const e=[],n=Array.from(t.getClientRects());if(n.length)for(const i of n)e.push(new U(i));else{let i=t.startContainer;Tt(i)&&(i=i.parentNode);const r=new U(i.getBoundingClientRect());r.right=r.left,r.width=0,e.push(r)}return e}static getBoundingRect(t){const e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let n=0;for(const i of t)n++,e.left=Math.min(e.left,i.left),e.top=Math.min(e.top,i.top),e.right=Math.max(e.right,i.right),e.bottom=Math.max(e.bottom,i.bottom);return n==0?null:(e.width=e.right-e.left,e.height=e.bottom-e.top,new U(e))}}function We(s,t){for(const e of Qr)s[e]=t[e]}function bi(s){return Gs(s)?s===s.ownerDocument.body:!1}function Gs(s){return s!==null&&typeof s=="object"&&s.nodeType===1&&typeof s.getBoundingClientRect=="function"}function yi(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).position:"static"}function z0(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).overflow:"visible"}function U0(s,t){const e=new U(t),n=Kr(t);let i=0,r=0;i-=e.left,r-=e.top,i+=t.scrollLeft,r+=t.scrollTop,i-=n.left,r-=n.top,s.moveBy(i,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O{constructor(t,e){O._observerInstance||O._createObserver(),this._element=t,this._callback=e,O._addElementCallback(t,e),O._observerInstance.observe(t)}get element(){return this._element}destroy(){O._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,e){O._elementCallbacks||(O._elementCallbacks=new Map);let n=O._elementCallbacks.get(t);n||(n=new Set,O._elementCallbacks.set(t,n)),n.add(e)}static _deleteElementCallback(t,e){const n=O._getElementCallbacks(t);n&&(n.delete(e),n.size||(O._elementCallbacks.delete(t),O._observerInstance.unobserve(t))),O._elementCallbacks&&!O._elementCallbacks.size&&(O._observerInstance=null,O._elementCallbacks=null)}static _getElementCallbacks(t){return O._elementCallbacks?O._elementCallbacks.get(t):null}static _createObserver(){O._observerInstance=new P.window.ResizeObserver(t=>{for(const e of t){const n=O._getElementCallbacks(e.target);if(n)for(const i of n)i(e)}})}}O._observerInstance=null;O._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function bn(s){return t=>t+s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qe(s){let t=0;for(;s.previousSibling;)s=s.previousSibling,t++;return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Is(s){return s&&s.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function W0(s){try{P.document.createAttribute(s)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Js(s){return!!(s&&s.getClientRects&&s.getClientRects().length)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function yn({element:s,target:t,positions:e,limiter:n,fitInViewport:i,viewportOffsetConfig:r}){Xe(t)&&(t=t()),Xe(n)&&(n=n());const o=Xr(s),a=q0(r),l=new U(s),c=Pi(t,a);let h;if(!c||!a.getIntersection(c))return null;const u={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!n&&!i)h=new to(e[0],u);else{if(n){const g=Pi(n,a);g&&(u.limiterRect=g)}h=Z0(e,u)}return h}function Pi(s,t){const e=new U(s).getVisible();return e?e.getIntersection(t):null}function q0(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);const t=new U(P.window);return t.top+=s.top,t.height-=s.top,t.bottom-=s.bottom,t.height-=s.bottom,t}function Z0(s,t){const{elementRect:e}=t,n=e.getArea(),i=s.map(a=>new to(a,t)).filter(a=>!!a.name);let r=0,o=null;for(const a of i){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===n)return a;const h=c**2+l**2;h>r&&(r=h,o=a)}return o}class to{constructor(t,e){const n=t(e.targetRect,e.elementRect,e.viewportRect,e.limiterRect);if(!n)return;const{left:i,top:r,name:o,config:a}=n;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:i,top:r},this._options=e}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const j0={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},G0={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Ti={37:"←",38:"↑",39:"→",40:"↓",9:"⇥"},dt=Y0(),J0=Object.fromEntries(Object.entries(dt).map(([s,t])=>{let e;return t in Ti?e=Ti[t]:e=s.charAt(0).toUpperCase()+s.slice(1),[t,e]}));function as(s){let t;if(typeof s=="string"){if(t=dt[s.toLowerCase()],!t)throw new f("keyboard-unknown-key",null,{key:s})}else t=s.keyCode+(s.altKey?dt.alt:0)+(s.ctrlKey?dt.ctrl:0)+(s.shiftKey?dt.shift:0)+(s.metaKey?dt.cmd:0);return t}function eo(s){return typeof s=="string"&&(s=X0(s)),s.map(t=>typeof t=="string"?K0(t):t).reduce((t,e)=>e+t,0)}function xi(s){let t=eo(s);return Object.entries(Ut.isMac||Ut.isiOS?j0:G0).reduce((i,[r,o])=>(t&dt[r]&&(t&=~dt[r],i+=o),i),"")+(t?J0[t]:"")}function K0(s){if(s.endsWith("!"))return as(s.slice(0,-1));const t=as(s);return(Ut.isMac||Ut.isiOS)&&t==dt.ctrl?dt.cmd:t}function Y0(){const s={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const e=String.fromCharCode(t);s[e.toLowerCase()]=t}for(let t=48;t<=57;t++)s[t-48]=t;for(let t=112;t<=123;t++)s["f"+(t-111)]=t;return Object.assign(s,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),s}function X0(s){return s.split("+").map(t=>t.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K(s){return Array.isArray(s)?s:[s]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */P.window.CKEDITOR_TRANSLATIONS||(P.window.CKEDITOR_TRANSLATIONS={});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kt extends C(){constructor(t={},e={}){super();const n=st(t);if(n||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],n)for(const i of t)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(e===void 0)e=this._items.length;else if(e>this._items.length||e<0)throw new f("collection-add-item-invalid-index",this);let n=0;for(const i of t){const r=this._getItemIdBeforeAdding(i),o=e+n;this._items.splice(o,0,i),this._itemMap.set(r,i),this.fire("add",i,o),n++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if(typeof t=="string")e=this._itemMap.get(t);else if(typeof t=="number")e=this._items[t];else throw new f("collection-get-invalid-arg",this);return e||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const e=this._idProperty,n=t[e];return n&&this._itemMap.has(n)}}getIndex(t){let e;return typeof t=="string"?e=this._itemMap.get(t):e=t,e?this._items.indexOf(e):-1}remove(t){const[e,n]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:n}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new f("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:e=>{this._setUpBindToBinding(n=>new e(n))},using:e=>{typeof e=="function"?this._setUpBindToBinding(e):this._setUpBindToBinding(n=>n[e])}}}_setUpBindToBinding(t){const e=this._bindToCollection,n=(i,r,o)=>{const a=e._bindToCollection==this,l=e._bindToInternalToExternalMap.get(r);if(a&&l)this._bindToExternalToInternalMap.set(r,l),this._bindToInternalToExternalMap.set(l,r);else{const c=t(r);if(!c){this._skippedIndexesFromExternal.push(o);return}let h=o;for(const u of this._skippedIndexesFromExternal)o>u&&h--;for(const u of e._skippedIndexesFromExternal)h>=u&&h++;this._bindToExternalToInternalMap.set(r,c),this._bindToInternalToExternalMap.set(c,r),this.add(c,h);for(let u=0;u<e._skippedIndexesFromExternal.length;u++)h<=e._skippedIndexesFromExternal[u]&&e._skippedIndexesFromExternal[u]++}};for(const i of e)n(null,i,e.getIndex(i));this.listenTo(e,"add",n),this.listenTo(e,"remove",(i,r,o)=>{const a=this._bindToExternalToInternalMap.get(r);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(o<c&&l.push(c-1),o>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let n;if(e in t){if(n=t[e],typeof n!="string")throw new f("collection-add-invalid-id",this);if(this.get(n))throw new f("collection-add-item-already-exists",this)}else t[e]=n=mt();return n}_remove(t){let e,n,i,r=!1;const o=this._idProperty;if(typeof t=="string"?(n=t,i=this._itemMap.get(n),r=!i,i&&(e=this._items.indexOf(i))):typeof t=="number"?(e=t,i=this._items[e],r=!i,i&&(n=i[o])):(i=t,n=i[o],e=this._items.indexOf(i),r=e==-1||!this._itemMap.get(n)),r)throw new f("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(n);const a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire("remove",i,e),[i,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pn(s){const t=s.next();return t.done?null:t.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kt extends Vt(W()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(t){if(this._elements.has(t))throw new f("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>this._focus(t),{useCapture:!0}),this.listenTo(t,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(t)}remove(t){t===this.focusedElement&&this._blur(),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}destroy(){this.stopListening()}_focus(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yt{constructor(){this._listener=new(Vt())}listenTo(t){this._listener.listenTo(t,"keydown",(e,n)=>{this._listener.fire("_keydown:"+as(n),n)})}set(t,e,n={}){const i=eo(t),r=n.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(o,a)=>{e(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0},{priority:r})}press(t){return!!this._listener.fire("_keydown:"+as(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Q0(s){const t=new Map;for(const e in s)t.set(e,s[e]);return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Se(s){return st(s)?new Map(s):Q0(s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const tf=1e4;function ef(s,t,e,n){if(Math.max(t.length,s.length)>tf)return s.slice(0,e).concat(t).concat(s.slice(e+n,s.length));{const i=Array.from(s);return i.splice(e,n,...t),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function sf(s,t){let e;function n(...i){n.cancel(),e=setTimeout(()=>s(...i),t)}return n.cancel=()=>{clearTimeout(e)},n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function nf(s){return!!s&&s.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(s)}function rf(s){return!!s&&s.length==1&&/[\ud800-\udbff]/.test(s)}function of(s){return!!s&&s.length==1&&/[\udc00-\udfff]/.test(s)}function af(s,t){return rf(s.charAt(t-1))&&of(s.charAt(t))}function lf(s,t){return nf(s.charAt(t))}cf();function cf(){const s=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],t=new RegExp("\\p{Regional_Indicator}{2}","u").source,e="(?:"+s.map(i=>i.source).join("|")+")",n=`${t}|${e}(?:‍${e})*`;return new RegExp(n,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rt extends W(){constructor(t){super(),this._disableStack=new Set,this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",Ai,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",Ai),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function Ai(s){s.return=!1,s.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hf extends W(){constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",e=>{if(!this.affectsData)return;const n=t.model.document.selection,r=!(n.getFirstPosition().root.rootName=="$graveyard")&&t.model.canEditAt(n);(t.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(e.return=!1,e.stop())},{priority:"highest"}),this.on("execute",e=>{this.isEnabled||e.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),this._disableStack.size==1&&(this.on("set:isEnabled",Ei,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),this._disableStack.size==0&&(this.off("set:isEnabled",Ei),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function Ei(s){s.return=!1,s.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wp extends C(){constructor(t,e=[],n=[]){super(),this._plugins=new Map,this._context=t,this._availablePlugins=new Map;for(const i of e)i.pluginName&&this._availablePlugins.set(i.pluginName,i);this._contextPlugins=new Map;for(const[i,r]of n)this._contextPlugins.set(i,r),this._contextPlugins.set(r,i),i.pluginName&&this._availablePlugins.set(i.pluginName,i)}*[Symbol.iterator](){for(const t of this._plugins)typeof t[0]=="function"&&(yield t)}get(t){const e=this._plugins.get(t);if(!e){let n=t;throw typeof t=="function"&&(n=t.pluginName||t.name),new f("plugincollection-plugin-not-loaded",this._context,{plugin:n})}return e}has(t){return this._plugins.has(t)}init(t,e=[],n=[]){const i=this,r=this._context;p(t),E(t);const o=t.filter(v=>!u(v,e)),a=[...y(o)];ut(a,n);const l=ee(a);return vt(l,"init").then(()=>vt(l,"afterInit")).then(()=>l);function c(v){return typeof v=="function"}function h(v){return c(v)&&!!v.isContextPlugin}function u(v,T){return T.some(b=>b===v||g(v)===b||g(b)===v)}function g(v){return c(v)?v.pluginName||v.name:v}function p(v,T=new Set){v.forEach(b=>{c(b)&&(T.has(b)||(T.add(b),b.pluginName&&!i._availablePlugins.has(b.pluginName)&&i._availablePlugins.set(b.pluginName,b),b.requires&&p(b.requires,T)))})}function y(v,T=new Set){return v.map(b=>c(b)?b:i._availablePlugins.get(b)).reduce((b,F)=>T.has(F)?b:(T.add(F),F.requires&&(E(F.requires,F),y(F.requires,T).forEach(Bt=>b.add(Bt))),b.add(F)),new Set)}function E(v,T=null){v.map(b=>c(b)?b:i._availablePlugins.get(b)||b).forEach(b=>{k(b,T),L(b,T),Q(b,T)})}function k(v,T){if(!c(v))throw T?new f("plugincollection-soft-required",r,{missingPlugin:v,requiredBy:g(T)}):new f("plugincollection-plugin-not-found",r,{plugin:v})}function L(v,T){if(h(T)&&!h(v))throw new f("plugincollection-context-required",r,{plugin:g(v),requiredBy:g(T)})}function Q(v,T){if(T&&u(v,e))throw new f("plugincollection-required",r,{plugin:g(v),requiredBy:g(T)})}function ee(v){return v.map(T=>{let b=i._contextPlugins.get(T);return b=b||new T(r),i._add(T,b),b})}function vt(v,T){return v.reduce((b,F)=>!F[T]||i._contextPlugins.has(F)?b:b.then(F[T].bind(F)),Promise.resolve())}function ut(v,T){for(const b of T){if(typeof b!="function")throw new f("plugincollection-replace-plugin-invalid-type",null,{pluginItem:b});const F=b.pluginName;if(!F)throw new f("plugincollection-replace-plugin-missing-name",null,{pluginItem:b});if(b.requires&&b.requires.length)throw new f("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:F});const Bt=i._availablePlugins.get(F);if(!Bt)throw new f("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:F});const Bn=v.indexOf(Bt);if(Bn===-1){if(i._contextPlugins.has(Bt))return;throw new f("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:F})}if(Bt.requires&&Bt.requires.length)throw new f("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:F});v.splice(Bn,1,b),i._availablePlugins.set(F,b)}}}destroy(){const t=[];for(const[,e]of this)typeof e.destroy=="function"&&!this._contextPlugins.has(e)&&t.push(e.destroy());return Promise.all(t)}_add(t,e){this._plugins.set(t,e);const n=t.pluginName;if(n){if(this._plugins.has(n))throw new f("plugincollection-plugin-name-conflict",null,{pluginName:n,plugin1:this._plugins.get(n).constructor,plugin2:t});this._plugins.set(n,e)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class so extends W(){constructor(t){super(),this.context=t}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Xt=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Qt=class extends C(Xt){constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))==-1)throw new f("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let r=0;for(;n[r]==i[r]&&n[r];)r++;return r===0?null:n[r-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=G(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e){this.fire(`change:${t}`,e),this.parent&&this.parent._fireChange(t,e)}toJSON(){const t=Hr(this);return delete t.parent,t}};Qt.prototype.is=function(s){return s==="node"||s==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let D=class Ks extends Qt{constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Ks?this===t||this.data===t.data:!1}_clone(){return new Ks(this.document,this.data)}};D.prototype.is=function(s){return s==="$text"||s==="view:$text"||s==="text"||s==="view:text"||s==="node"||s==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ft=class extends Xt{constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.data.length)throw new f("view-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.data.length)throw new f("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let n=t.includeSelf?this.textNode:this.parent;for(;n!==null;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}};ft.prototype.is=function(s){return s==="$textProxy"||s==="view:$textProxy"||s==="textProxy"||s==="view:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ys{constructor(...t){this._patterns=[],this.add(...t)}add(...t){for(let e of t)(typeof e=="string"||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const n of this._patterns){const i=ki(e,n);if(i)return{element:e,pattern:n,match:i}}return null}matchAll(...t){const e=[];for(const n of t)for(const i of this._patterns){const r=ki(n,i);r&&e.push({element:n,pattern:i,match:r})}return e.length>0?e:null}getElementName(){if(this._patterns.length!==1)return null;const t=this._patterns[0],e=t.name;return typeof t!="function"&&e&&!(e instanceof RegExp)?e:null}}function ki(s,t){if(typeof t=="function")return t(s);const e={};return t.name&&(e.name=uf(t.name,s.name),!e.name)||t.attributes&&(e.attributes=mf(t.attributes,s),!e.attributes)||t.classes&&(e.classes=pf(t.classes,s),!e.classes)||t.styles&&(e.styles=wf(t.styles,s),!e.styles)?null:e}function uf(s,t){return s instanceof RegExp?!!t.match(s):s===t}function Tn(s,t,e){const n=ff(s),i=Array.from(t),r=[];if(n.forEach(([o,a])=>{i.forEach(l=>{df(o,l)&&gf(a,l,e)&&r.push(l)})}),!(!n.length||r.length<n.length))return r}function ff(s){return Array.isArray(s)?s.map(t=>qt(t)?((t.key===void 0||t.value===void 0)&&J("matcher-pattern-missing-key-or-value",t),[t.key,t.value]):[t,!0]):qt(s)?Object.entries(s):[[s,!0]]}function df(s,t){return s===!0||s===t||s instanceof RegExp&&t.match(s)}function gf(s,t,e){if(s===!0)return!0;const n=e(t);return s===n||s instanceof RegExp&&!!String(n).match(s)}function mf(s,t){const e=new Set(t.getAttributeKeys());return qt(s)?(s.style!==void 0&&J("matcher-pattern-deprecated-attributes-style-key",s),s.class!==void 0&&J("matcher-pattern-deprecated-attributes-class-key",s)):(e.delete("style"),e.delete("class")),Tn(s,e,n=>t.getAttribute(n))}function pf(s,t){return Tn(s,t.getClassNames(),()=>{})}function wf(s,t){return Tn(s,t.getStyleNames(!0),e=>t.getStyle(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _f{constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=vf(t);for(const[n,i]of e)this._styleProcessor.toNormalizedForm(n,i,this._styles)}has(t){if(this.isEmpty)return!1;const n=this._styleProcessor.getReducedForm(t,this._styles).find(([i])=>i===t);return Array.isArray(n)}set(t,e){if(Y(t))for(const[n,i]of Object.entries(t))this._styleProcessor.toNormalizedForm(n,i,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e=bf(t);I0(this._styles,e),delete this._styles[t],this._cleanEmptyObjectsOnPath(e)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!Y(this._styles[t]))return this._styles[t];const n=this._styleProcessor.getReducedForm(t,this._styles).find(([i])=>i===t);if(Array.isArray(n))return n[1]}getStyleNames(t=!1){return this.isEmpty?[]:t?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([n])=>n)}clear(){this._styles={}}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const n of e)t.push(...this._styleProcessor.getReducedForm(n,this._styles));return t}_cleanEmptyObjectsOnPath(t){const e=t.split(".");if(!(e.length>1))return;const i=e.splice(0,e.length-1).join("."),r=Ir(this._styles,i);if(!r)return;!Object.keys(r).length&&this.remove(i)}}function vf(s){let t=null,e=0,n=0,i=null;const r=new Map;if(s==="")return r;s.charAt(s.length-1)!=";"&&(s=s+";");for(let o=0;o<s.length;o++){const a=s.charAt(o);if(t===null)switch(a){case":":i||(i=s.substr(e,o-e),n=o+1);break;case'"':case"'":t=a;break;case";":{const l=s.substr(n,o-n);i&&r.set(i.trim(),l.trim()),i=null,e=o+1;break}}else a===t&&(t=null)}return r}function bf(s){return s.replace("-",".")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let lt=class no extends Qt{constructor(t,e,n,i){if(super(t),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=e,this._attrs=yf(n),this._children=[],i&&this._insertChild(0,i),this._classes=new Set,this._attrs.has("class")){const r=this._attrs.get("class");Ci(this._classes,r),this._attrs.delete("class")}this._styles=new _f(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(t){if(t=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(t=="style"){const e=this._styles.toString();return e==""?void 0:e}return this._attrs.get(t)}hasAttribute(t){return t=="class"?this._classes.size>0:t=="style"?!this._styles.isEmpty:this._attrs.has(t)}isSimilar(t){if(!(t instanceof no))return!1;if(this===t)return!0;if(this.name!=t.name||this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;for(const[e,n]of this._attrs)if(!t._attrs.has(e)||t._attrs.get(e)!==n)return!1;for(const e of this._classes)if(!t._classes.has(e))return!1;for(const e of this._styles.getStyleNames())if(!t._styles.has(e)||t._styles.getAsString(e)!==this._styles.getAsString(e))return!1;return!0}hasClass(...t){for(const e of t)if(!this._classes.has(e))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(t){return this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles.getNormalized(t)}getStyleNames(t){return this._styles.getStyleNames(t)}hasStyle(...t){for(const e of t)if(!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Ys(...t);let n=this.parent;for(;n&&!n.is("documentFragment");){if(e.match(n))return n;n=n.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=Array.from(this._classes).sort().join(","),e=this._styles.toString(),n=Array.from(this._attrs).map(i=>`${i[0]}="${i[1]}"`).sort().join(" ");return this.name+(t==""?"":` class="${t}"`)+(e?` style="${e}"`:"")+(n==""?"":` ${n}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}_clone(t=!1){const e=[];if(t)for(const i of this.getChildren())e.push(i._clone(t));const n=new this.constructor(this.document,this.name,this._attrs,e);return n._classes=new Set(this._classes),n._styles.set(this._styles.getNormalized()),n._customProperties=new Map(this._customProperties),n.getFillerOffset=this.getFillerOffset,n._unsafeAttributesToRender=this._unsafeAttributesToRender,n}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this);let n=0;const i=Pf(this.document,e);for(const r of i)r.parent!==null&&r._remove(),r.parent=this,r.document=this.document,this._children.splice(t,0,r),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_setAttribute(t,e){const n=String(e);this._fireChange("attributes",this),t=="class"?Ci(this._classes,n):t=="style"?this._styles.setTo(n):this._attrs.set(t,n)}_removeAttribute(t){return this._fireChange("attributes",this),t=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:t=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(t)}_addClass(t){this._fireChange("attributes",this);for(const e of K(t))this._classes.add(e)}_removeClass(t){this._fireChange("attributes",this);for(const e of K(t))this._classes.delete(e)}_setStyle(t,e){this._fireChange("attributes",this),typeof t!="string"?this._styles.set(t):this._styles.set(t,e)}_removeStyle(t){this._fireChange("attributes",this);for(const e of K(t))this._styles.remove(e)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}};lt.prototype.is=function(s,t){return t?t===this.name&&(s==="element"||s==="view:element"):s==="element"||s==="view:element"||s==="node"||s==="view:node"};function yf(s){const t=Se(s);for(const[e,n]of t)n===null?t.delete(e):typeof n!="string"&&t.set(e,String(n));return t}function Ci(s,t){const e=t.split(/\s+/);s.clear(),e.forEach(n=>s.add(n))}function Pf(s,t){return typeof t=="string"?[new D(s,t)]:(st(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new D(s,e):e instanceof ft?new D(s,e.data):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ie extends lt{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Tf}}Ie.prototype.is=function(s,t){return t?t===this.name&&(s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function Tf(){const s=[...this.getChildren()],t=s[this.childCount-1];if(t&&t.is("element","br"))return this.childCount;for(const e of s)if(!e.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vs extends W(Ie){constructor(t,e,n,i){super(t,e,n,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",r=>r&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}}vs.prototype.is=function(s,t){return t?t===this.name&&(s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Mi=Symbol("rootName");class xf extends vs{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(Mi)}set rootName(t){this._setCustomProperty(Mi,t)}set _name(t){this.name=t}}xf.prototype.is=function(s,t){return t?t===this.name&&(s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let $t=class{constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new f("view-tree-walker-no-start-position",null);if(t.direction&&t.direction!="forward"&&t.direction!="backward")throw new f("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=w._createAt(t.startPosition):this._position=w._createAt(t.boundaries[t.direction=="backward"?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n;do n=this.position,e=this.next();while(!e.done&&t(e.value));e.done||(this._position=n)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(n instanceof D){if(t.isAtEnd)return this._position=w._createAfter(n),this._next();i=n.data[t.offset]}else i=n.getChild(t.offset);if(i instanceof lt){if(!this.shallow)t=new w(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,this._formatReturnValue("elementStart",i,e,t,1)}if(i instanceof D){if(this.singleCharacters)return t=new w(i,0),this._position=t,this._next();let r=i.data.length,o;return i==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new ft(i,0,r),t=w._createAfter(o)):(o=new ft(i,0,i.data.length),t.offset++),this._position=t,this._formatReturnValue("text",o,e,t,r)}if(typeof i=="string"){let r;this.singleCharacters?r=1:r=(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-t.offset;const o=new ft(n,t.offset,r);return t.offset+=r,this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=w._createAfter(n),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,e,t)}_previous(){let t=this.position.clone();const e=this.position,n=t.parent;if(n.parent===null&&t.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(n instanceof D){if(t.isAtStart)return this._position=w._createBefore(n),this._previous();i=n.data[t.offset-1]}else i=n.getChild(t.offset-1);if(i instanceof lt)return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",i,e,t,1)):(t=new w(i,i.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,e,t));if(i instanceof D){if(this.singleCharacters)return t=new w(i,i.data.length),this._position=t,this._previous();let r=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new ft(i,a,i.data.length-a),r=o.data.length,t=w._createBefore(o)}else o=new ft(i,0,i.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",o,e,t,r)}if(typeof i=="string"){let r;if(this.singleCharacters)r=1;else{const a=n===this._boundaryStartParent?this.boundaries.start.offset:0;r=t.offset-a}t.offset-=r;const o=new ft(n,t.offset,r);return this._position=t,this._formatReturnValue("text",o,e,t,r)}return t=w._createBefore(n),this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}_formatReturnValue(t,e,n,i,r){return e instanceof ft&&(e.offsetInText+e.data.length==e.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=w._createAfter(e.textNode),this._position=i):n=w._createAfter(e.textNode)),e.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=w._createBefore(e.textNode),this._position=i):n=w._createBefore(e.textNode))),{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:i,length:r}}}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let w=class Pt extends Xt{constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof vs);)if(t.parent)t=t.parent;else return null;return t}getShiftedBy(t){const e=Pt._createAt(this),n=e.offset+t;return e.offset=n<0?0:n,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new $t(e);return n.skip(t),n.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;for(;e[i]==n[i]&&e[i];)i++;return i===0?null:e[i-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return this.compareWith(t)=="before"}isAfter(t){return this.compareWith(t)=="after"}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],n=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),n.push(t.offset);const i=G(e,n);switch(i){case"prefix":return"before";case"extension":return"after";default:return e[i]<n[i]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new $t(t)}clone(){return new Pt(this.parent,this.offset)}static _createAt(t,e){if(t instanceof Pt)return new this(t.parent,t.offset);{const n=t;if(e=="end")e=n.is("$text")?n.data.length:n.childCount;else{if(e=="before")return this._createBefore(n);if(e=="after")return this._createAfter(n);if(e!==0&&!e)throw new f("view-createpositionat-offset-required",n)}return new Pt(n,e)}}static _createAfter(t){if(t.is("$textProxy"))return new Pt(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new f("view-position-after-root",t,{root:t});return new Pt(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new Pt(t.textNode,t.offsetInText);if(!t.parent)throw new f("view-position-before-root",t,{root:t});return new Pt(t.parent,t.index)}};w.prototype.is=function(s){return s==="position"||s==="view:position"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let x=class Ct extends Xt{constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new $t({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(Ze,{direction:"backward"}),e=this.end.getLastMatchingPosition(Ze);return t.parent.is("$text")&&t.isAtStart&&(t=w._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=w._createAfter(e.parent)),new Ct(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(Ze);if(t.isAfter(this.end)||t.isEqual(this.end))return new Ct(t,t);let e=this.end.getLastMatchingPosition(Ze,{direction:"backward"});const n=t.nodeAfter,i=e.nodeBefore;return n&&n.is("$text")&&(t=new w(n,0)),i&&i.is("$text")&&(e=new w(i,i.data.length)),new Ct(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ct(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ct(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new Ct(e,n)}return null}getWalker(t={}){return t.boundaries=this,new $t(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Ct(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new $t(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new $t(t);yield e.position;for(const n of e)yield n.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}static _createFromParentsAndOffsets(t,e,n,i){return new this(new w(t,e),new w(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(w._createBefore(t),e)}};x.prototype.is=function(s){return s==="range"||s==="view:range"};function Ze(s){return!!(s.item.is("attributeElement")||s.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ht=class io extends C(Xt){constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)(!t||e.start.isBefore(t.start))&&(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)(!t||e.end.isAfter(t.end))&&(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake||this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel||this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=vi(this.getRanges()),n=vi(t.getRanges());if(e!=n)return!1;if(e==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let r=!1;for(let o of t.getRanges())if(o=o.getTrimmed(),i.start.isEqual(o.start)&&i.end.isEqual(o.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,n,i]=t;if(typeof n=="object"&&(i=n,n=void 0),e===null)this._setRanges([]),this._setFakeOptions(i);else if(e instanceof io||e instanceof xn)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof x)this._setRanges([e],i&&i.backward),this._setFakeOptions(i);else if(e instanceof w)this._setRanges([new x(e)]),this._setFakeOptions(i);else if(e instanceof Qt){const r=!!i&&!!i.backward;let o;if(n===void 0)throw new f("view-selection-setto-required-second-parameter",this);n=="in"?o=x._createIn(e):n=="on"?o=x._createOn(e):o=new x(w._createAt(e,n)),this._setRanges([o],r),this._setFakeOptions(i)}else if(st(e))this._setRanges(e,i&&i.backward),this._setFakeOptions(i);else throw new f("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(t,e){if(this.anchor===null)throw new f("view-selection-setfocus-no-ranges",this);const n=w._createAt(t,e);if(n.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.pop(),n.compareWith(i)=="before"?this._addRange(new x(n,i),!0):this._addRange(new x(i,n)),this.fire("change")}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const n of t)this._addRange(n);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof x))throw new f("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new f("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new x(t.start,t.end))}};Ht.prototype.is=function(s){return s==="selection"||s==="view:selection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let xn=class extends C(Xt){constructor(...t){super(),this._selection=new Ht,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}};xn.prototype.is=function(s){return s==="selection"||s=="documentSelection"||s=="view:selection"||s=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Af extends Rt{constructor(t,e,n){super(t,e),this.startRange=n,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Rs=Symbol("bubbling contexts");function Xs(s){class t extends s{fire(n,...i){try{const r=n instanceof Rt?n:new Rt(this,n),o=Vs(this);if(!o.size)return;if(me(r,"capturing",this),ne(o,"$capture",r,...i))return r.return;const a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!ro(o,l):!1;let h=l||Ef(a);if(me(r,"atTarget",h),!c){if(ne(o,"$text",r,...i))return r.return;me(r,"bubbling",h)}for(;h;){if(h.is("rootElement")){if(ne(o,"$root",r,...i))return r.return}else if(h.is("element")&&ne(o,h.name,r,...i))return r.return;if(ne(o,h,r,...i))return r.return;h=h.parent,me(r,"bubbling",h)}return me(r,"bubbling",this),ne(o,"$document",r,...i),r.return}catch(r){/* istanbul ignore next -- @preserve */f.rethrowUnexpectedError(r,this)}}_addEventListener(n,i,r){const o=K(r.context||"$document"),a=Vs(this);for(const l of o){let c=a.get(l);c||(c=new(C()),a.set(l,c)),this.listenTo(c,n,i,r)}}_removeEventListener(n,i){const r=Vs(this);for(const o of r.values())this.stopListening(o,n,i)}}return t}{const s=Xs(Object);["fire","_addEventListener","_removeEventListener"].forEach(t=>{Xs[t]=s.prototype[t]})}function me(s,t,e){s instanceof Af&&(s._eventPhase=t,s._currentTarget=e)}function ne(s,t,e,...n){const i=typeof t=="string"?s.get(t):ro(s,t);return i?(i.fire(e,...n),e.stop.called):!1}function ro(s,t){for(const[e,n]of s)if(typeof e=="function"&&e(t))return n;return null}function Vs(s){return s[Rs]||(s[Rs]=new Map),s[Rs]}function Ef(s){if(!s)return null;const t=s.start.parent,e=s.end.parent,n=t.getPath(),i=e.getPath();return n.length>i.length?t:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let kf=class extends Xs(W()){constructor(t){super(),this._postFixers=new Set,this.selection=new xn,this.roots=new Kt({idProperty:"rootName"}),this.stylesProcessor=t,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(t="main"){return this.roots.get(t)}registerPostFixer(t){this._postFixers.add(t)}destroy(){this.roots.forEach(t=>t.destroy()),this.stopListening()}_callPostFixers(t){let e=!1;do for(const n of this._postFixers)if(e=n(t),e)break;while(e)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const oo=10;class ae extends lt{constructor(t,e,n,i){super(t,e,n,i),this._priority=oo,this._id=null,this._clonesGroup=null,this.getFillerOffset=Cf}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new f("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}}ae.DEFAULT_PRIORITY=oo;ae.prototype.is=function(s,t){return t?t===this.name&&(s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"):s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function Cf(){if(Os(this))return null;let s=this.parent;for(;s&&s.is("attributeElement");){if(Os(s)>1)return null;s=s.parent}return!s||Os(s)>1?null:this.childCount}function Os(s){return Array.from(s.getChildren()).filter(t=>!t.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class An extends lt{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Mf}_insertChild(t,e){if(e&&(e instanceof Qt||Array.from(e).length>0))throw new f("view-emptyelement-cannot-add",[this,e]);return 0}}An.prototype.is=function(s,t){return t?t===this.name&&(s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"):s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function Mf(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bs extends lt{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=Sf}_insertChild(t,e){if(e&&(e instanceof Qt||Array.from(e).length>0))throw new f("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const n of this.getAttributeKeys())e.setAttribute(n,this.getAttribute(n));return e}}bs.prototype.is=function(s,t){return t?t===this.name&&(s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"):s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function Sf(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class En extends lt{constructor(t,e,n,i){super(t,e,n,i),this.getFillerOffset=If}_insertChild(t,e){if(e&&(e instanceof Qt||Array.from(e).length>0))throw new f("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}En.prototype.is=function(s,t){return t?t===this.name&&(s==="rawElement"||s==="view:rawElement"||s==="element"||s==="view:element"):s==="rawElement"||s==="view:rawElement"||s===this.name||s==="view:"+this.name||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function If(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let zt=class extends C(Xt){constructor(t,e){super(),this._children=[],this._customProperties=new Map,this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this);let n=0;const i=Rf(this.document,e);for(const r of i)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(t,0,r),t++,n++;return n}_removeChildren(t,e=1){this._fireChange("children",this);for(let n=t;n<t+e;n++)this._children[n].parent=null;return this._children.splice(t,e)}_fireChange(t,e){this.fire("change:"+t,e)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}};zt.prototype.is=function(s){return s==="documentFragment"||s==="view:documentFragment"};function Rf(s,t){return typeof t=="string"?[new D(s,t)]:(st(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new D(s,e):e instanceof ft?new D(s,e.data):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vf{constructor(t){this._cloneGroups=new Map,this._slotFactory=null,this.document=t}setSelection(...t){this.document.selection._setTo(...t)}setSelectionFocus(t,e){this.document.selection._setFocus(t,e)}createDocumentFragment(t){return new zt(this.document,t)}createText(t){return new D(this.document,t)}createAttributeElement(t,e,n={}){const i=new ae(this.document,t,e);return typeof n.priority=="number"&&(i._priority=n.priority),n.id&&(i._id=n.id),n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createContainerElement(t,e,n={},i={}){let r=null;qt(n)?i=n:r=n;const o=new Ie(this.document,t,e,r);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEditableElement(t,e,n={}){const i=new vs(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createEmptyElement(t,e,n={}){const i=new An(this.document,t,e);return n.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...n.renderUnsafeAttributes),i}createUIElement(t,e,n){const i=new bs(this.document,t,e);return n&&(i.render=n),i}createRawElement(t,e,n,i={}){const r=new En(this.document,t,e);return n&&(r.render=n),i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){qt(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}breakAttributes(t){return t instanceof w?this._breakAttributes(t):this._breakAttributesRange(t)}breakContainer(t){const e=t.parent;if(!e.is("containerElement"))throw new f("view-writer-break-non-container-element",this.document);if(!e.parent)throw new f("view-writer-break-root",this.document);if(t.isAtStart)return w._createBefore(e);if(!t.isAtEnd){const n=e._clone(!1);this.insert(w._createAfter(e),n);const i=new x(t,w._createAt(e,"end")),r=new w(n,0);this.move(i,r)}return w._createAfter(e)}mergeAttributes(t){const e=t.offset,n=t.parent;if(n.is("$text"))return t;if(n.is("attributeElement")&&n.childCount===0){const o=n.parent,a=n.index;return n._remove(),this._removeFromClonedElementsGroup(n),this.mergeAttributes(new w(o,a))}const i=n.getChild(e-1),r=n.getChild(e);if(!i||!r)return t;if(i.is("$text")&&r.is("$text"))return Ii(i,r);if(i.is("attributeElement")&&r.is("attributeElement")&&i.isSimilar(r)){const o=i.childCount;return i._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new w(i,o))}return t}mergeContainers(t){const e=t.nodeBefore,n=t.nodeAfter;if(!e||!n||!e.is("containerElement")||!n.is("containerElement"))throw new f("view-writer-merge-containers-invalid-position",this.document);const i=e.getChild(e.childCount-1),r=i instanceof D?w._createAt(i,"end"):w._createAt(e,"end");return this.move(x._createIn(n),w._createAt(e,"end")),this.remove(x._createOn(n)),r}insert(t,e){e=st(e)?[...e]:[e],ao(e,this.document);const n=e.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let i=null,r=t;for(const{nodes:o,breakAttributes:a}of n){const l=this._insertNodes(r,o,a);i||(i=l.start),r=l.end}return i?new x(i,r):new x(t)}remove(t){const e=t instanceof x?t:x._createOn(t);if(pe(e,this.document),e.isCollapsed)return new zt(this.document);const{start:n,end:i}=this._breakAttributesRange(e,!0),r=n.parent,o=i.offset-n.offset,a=r._removeChildren(n.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(n);return e.start=l,e.end=l.clone(),new zt(this.document,a)}clear(t,e){pe(t,this.document);const n=t.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of n){const r=i.item;let o;if(r.is("element")&&e.isSimilar(r))o=x._createOn(r);else if(!i.nextPosition.isAfter(t.start)&&r.is("$textProxy")){const a=r.getAncestors().find(l=>l.is("element")&&e.isSimilar(l));a&&(o=x._createIn(a))}o&&(o.end.isAfter(t.end)&&(o.end=t.end),o.start.isBefore(t.start)&&(o.start=t.start),this.remove(o))}}move(t,e){let n;if(e.isAfter(t.end)){e=this._breakAttributes(e,!0);const i=e.parent,r=i.childCount;t=this._breakAttributesRange(t,!0),n=this.remove(t),e.offset+=i.childCount-r}else n=this.remove(t);return this.insert(e,n)}wrap(t,e){if(!(e instanceof ae))throw new f("view-writer-wrap-invalid-attribute",this.document);if(pe(t,this.document),t.isCollapsed){let n=t.start;n.parent.is("element")&&!Of(n.parent)&&(n=n.getLastMatchingPosition(r=>r.item.is("uiElement"))),n=this._wrapPosition(n,e);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(t.start)&&this.setSelection(n),new x(n)}else return this._wrapRange(t,e)}unwrap(t,e){if(!(e instanceof ae))throw new f("view-writer-unwrap-invalid-attribute",this.document);if(pe(t,this.document),t.isCollapsed)return t;const{start:n,end:i}=this._breakAttributesRange(t,!0),r=n.parent,o=this._unwrapChildren(r,n.offset,i.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new x(a,l)}rename(t,e){const n=new Ie(this.document,t,e.getAttributes());return this.insert(w._createAfter(e),n),this.move(x._createIn(e),w._createAt(n,0)),this.remove(x._createOn(e)),n}clearClonedElementsGroup(t){this._cloneGroups.delete(t)}createPositionAt(t,e){return w._createAt(t,e)}createPositionAfter(t){return w._createAfter(t)}createPositionBefore(t){return w._createBefore(t)}createRange(t,e){return new x(t,e)}createRangeOn(t){return x._createOn(t)}createRangeIn(t){return x._createIn(t)}createSelection(...t){return new Ht(...t)}createSlot(t="children"){if(!this._slotFactory)throw new f("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}_registerSlotFactory(t){this._slotFactory=t}_clearSlotFactory(){this._slotFactory=null}_insertNodes(t,e,n){let i;if(n?i=Qs(t):i=t.parent.is("$text")?t.parent.parent:t.parent,!i)throw new f("view-writer-invalid-position-container",this.document);let r;n?r=this._breakAttributes(t,!0):r=t.parent.is("$text")?Ns(t):t;const o=i._insertChild(r.offset,e);for(const h of e)this._addToClonedElementsGroup(h);const a=r.getShiftedBy(o),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;const c=this.mergeAttributes(a);return new x(l,c)}_wrapChildren(t,e,n,i){let r=e;const o=[];for(;r<n;){const l=t.getChild(r),c=l.is("$text"),h=l.is("attributeElement");if(h&&this._wrapAttributeElement(i,l))o.push(new w(t,r));else if(c||!h||Nf(i,l)){const u=i._clone();l._remove(),u._appendChild(l),t._insertChild(r,u),this._addToClonedElementsGroup(u),o.push(new w(t,r))}else this._wrapChildren(l,0,l.childCount,i);r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return x._createFromParentsAndOffsets(t,e,t,n)}_unwrapChildren(t,e,n,i){let r=e;const o=[];for(;r<n;){const l=t.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(i)){const c=l.getChildren(),h=l.childCount;l._remove(),t._insertChild(r,c),this._removeFromClonedElementsGroup(l),o.push(new w(t,r),new w(t,r+h)),r+=h,n+=h-1;continue}if(this._unwrapAttributeElement(i,l)){o.push(new w(t,r),new w(t,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,i),r++}let a=0;for(const l of o){if(l.offset-=a,l.offset==e||l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,n--)}return x._createFromParentsAndOffsets(t,e,t,n)}_wrapRange(t,e){const{start:n,end:i}=this._breakAttributesRange(t,!0),r=n.parent,o=this._wrapChildren(r,n.offset,i.offset,e),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new x(a,l)}_wrapPosition(t,e){if(e.isSimilar(t.parent))return Si(t.clone());t.parent.is("$text")&&(t=Ns(t));const n=this.createAttributeElement("_wrapPosition-fake-element");n._priority=Number.POSITIVE_INFINITY,n.isSimilar=()=>!1,t.parent._insertChild(t.offset,n);const i=new x(t,t.getShiftedBy(1));this.wrap(i,e);const r=new w(n.parent,n.index);n._remove();const o=r.nodeBefore,a=r.nodeAfter;return o instanceof D&&a instanceof D?Ii(o,a):Si(r)}_wrapAttributeElement(t,e){if(!Ri(t,e)||t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if(!(n==="class"||n==="style")&&e.hasAttribute(n)&&e.getAttribute(n)!==t.getAttribute(n))return!1;for(const n of t.getStyleNames())if(e.hasStyle(n)&&e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())n==="class"||n==="style"||e.hasAttribute(n)||this.setAttribute(n,t.getAttribute(n),e);for(const n of t.getStyleNames())e.hasStyle(n)||this.setStyle(n,t.getStyle(n),e);for(const n of t.getClassNames())e.hasClass(n)||this.addClass(n,e);return!0}_unwrapAttributeElement(t,e){if(!Ri(t,e)||t.name!==e.name||t.priority!==e.priority)return!1;for(const n of t.getAttributeKeys())if(!(n==="class"||n==="style")&&(!e.hasAttribute(n)||e.getAttribute(n)!==t.getAttribute(n)))return!1;if(!e.hasClass(...t.getClassNames()))return!1;for(const n of t.getStyleNames())if(!e.hasStyle(n)||e.getStyle(n)!==t.getStyle(n))return!1;for(const n of t.getAttributeKeys())n==="class"||n==="style"||this.removeAttribute(n,e);return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0}_breakAttributesRange(t,e=!1){const n=t.start,i=t.end;if(pe(t,this.document),t.isCollapsed){const l=this._breakAttributes(t.start,e);return new x(l,l)}const r=this._breakAttributes(i,e),o=r.parent.childCount,a=this._breakAttributes(n,e);return r.offset+=r.parent.childCount-o,new x(a,r)}_breakAttributes(t,e=!1){const n=t.offset,i=t.parent;if(t.parent.is("emptyElement"))throw new f("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new f("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new f("view-writer-cannot-break-raw-element",this.document);if(!e&&i.is("$text")&&tn(i.parent)||tn(i))return t.clone();if(i.is("$text"))return this._breakAttributes(Ns(t),e);const r=i.childCount;if(n==r){const o=new w(i.parent,i.index+1);return this._breakAttributes(o,e)}else if(n===0){const o=new w(i.parent,i.index);return this._breakAttributes(o,e)}else{const o=i.index+1,a=i._clone();i.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=i.childCount-n,c=i._removeChildren(n,l);a._appendChild(c);const h=new w(i.parent,o);return this._breakAttributes(h,e)}}_addToClonedElementsGroup(t){if(!t.root.is("rootElement"))return;if(t.is("element"))for(const i of t.getChildren())this._addToClonedElementsGroup(i);const e=t.id;if(!e)return;let n=this._cloneGroups.get(e);n||(n=new Set,this._cloneGroups.set(e,n)),n.add(t),t._clonesGroup=n}_removeFromClonedElementsGroup(t){if(t.is("element"))for(const i of t.getChildren())this._removeFromClonedElementsGroup(i);const e=t.id;if(!e)return;const n=this._cloneGroups.get(e);n&&n.delete(t)}}function Of(s){return Array.from(s.getChildren()).some(t=>!t.is("uiElement"))}function Qs(s){let t=s.parent;for(;!tn(t);){if(!t)return;t=t.parent}return t}function Nf(s,t){return s.priority<t.priority?!0:s.priority>t.priority?!1:s.getIdentity()<t.getIdentity()}function Si(s){const t=s.nodeBefore;if(t&&t.is("$text"))return new w(t,t.data.length);const e=s.nodeAfter;return e&&e.is("$text")?new w(e,0):s}function Ns(s){if(s.offset==s.parent.data.length)return new w(s.parent.parent,s.parent.index+1);if(s.offset===0)return new w(s.parent.parent,s.parent.index);const t=s.parent.data.slice(s.offset);return s.parent._data=s.parent.data.slice(0,s.offset),s.parent.parent._insertChild(s.parent.index+1,new D(s.root.document,t)),new w(s.parent.parent,s.parent.index+1)}function Ii(s,t){const e=s.data.length;return s._data+=t.data,t._remove(),new w(s,e)}const Bf=[D,ae,Ie,An,En,bs];function ao(s,t){for(const e of s){if(!Bf.some(n=>e instanceof n))throw new f("view-writer-insert-invalid-node-type",t);e.is("$text")||ao(e.getChildren(),t)}}function tn(s){return s&&(s.is("containerElement")||s.is("documentFragment"))}function pe(s,t){const e=Qs(s.start),n=Qs(s.end);if(!e||!n||e!==n)throw new f("view-writer-invalid-range-container",t)}function Ri(s,t){return s.id===null&&t.id===null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lo=s=>s.createTextNode(" "),co=s=>{const t=s.createElement("span");return t.dataset.ckeFiller="true",t.innerText=" ",t},ho=s=>{const t=s.createElement("br");return t.dataset.ckeFiller="true",t},xt=7,Vi="⁠".repeat(xt);function Mt(s){return typeof s=="string"?s.substr(0,xt)===Vi:Tt(s)&&s.data.substr(0,xt)===Vi}function je(s){return s.data.length==xt&&Mt(s)}function Oi(s){const t=typeof s=="string"?s:s.data;return Mt(s)?t.slice(xt):t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ff=ho(P.document),Df=lo(P.document),Lf=co(P.document),Ge="data-ck-unsafe-attribute-",Ni="data-ck-unsafe-element";class $f{constructor(t,{blockFillerMode:e,renderingMode:n="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Ys,this._inlineObjectElementMatcher=new Ys,this._elementsWithTemporaryCustomProperties=new Set,this.document=t,this.renderingMode=n,this.blockFillerMode=e||(n==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?P.document:P.document.implementation.createHTMLDocument("")}bindFakeSelection(t,e){this._fakeSelectionMapping.set(t,new Ht(e))}fakeSelectionToView(t){return this._fakeSelectionMapping.get(t)}bindElements(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}unbindDomElement(t){const e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(const n of Array.from(t.children))this.unbindDomElement(n)}}bindDocumentFragments(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}shouldRenderAttribute(t,e,n){return this.renderingMode==="data"?!0:(t=t.toLowerCase(),t.startsWith("on")||t==="srcdoc"&&e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:n==="img"&&(t==="src"||t==="srcset")||n==="source"&&t==="srcset"?!0:!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(t,e){if(this.renderingMode==="data"){t.innerHTML=e;return}const n=new DOMParser().parseFromString(e,"text/html"),i=n.createDocumentFragment(),r=n.body.childNodes;for(;r.length>0;)i.appendChild(r[0]);const o=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const u of c.getAttributeNames())this.setDomElementAttribute(c,u,c.getAttribute(u));const h=c.tagName.toLowerCase();this._shouldRenameElement(h)&&(Fi(h),c.replaceWith(this._createReplacementDomElement(h,c)))}for(;t.firstChild;)t.firstChild.remove();t.append(i)}viewToDom(t,e={}){if(t.is("$text")){const n=this._processDataFromViewText(t);return this._domDocument.createTextNode(n)}else{const n=t;if(this.mapViewToDom(n))if(n.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(n);else return this.mapViewToDom(n);let i;if(n.is("documentFragment"))i=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(i,n);else{if(n.is("uiElement"))return n.name==="$comment"?i=this._domDocument.createComment(n.getCustomProperty("$rawContent")):i=n.render(this._domDocument,this),e.bind&&this.bindElements(i,n),i;this._shouldRenameElement(n.name)?(Fi(n.name),i=this._createReplacementDomElement(n.name)):n.hasAttribute("xmlns")?i=this._domDocument.createElementNS(n.getAttribute("xmlns"),n.name):i=this._domDocument.createElement(n.name),n.is("rawElement")&&n.render(i,this),e.bind&&this.bindElements(i,n);for(const r of n.getAttributeKeys())this.setDomElementAttribute(i,r,n.getAttribute(r),n)}if(e.withChildren!==!1)for(const r of this.viewChildrenToDom(n,e))i.appendChild(r);return i}}setDomElementAttribute(t,e,n,i){const r=this.shouldRenderAttribute(e,n,t.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(e);if(r||J("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:n}),!W0(e)){J("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:n});return}t.hasAttribute(e)&&!r?t.removeAttribute(e):t.hasAttribute(Ge+e)&&r&&t.removeAttribute(Ge+e),t.setAttribute(r?e:Ge+e,n)}removeDomElementAttribute(t,e){e!=Ni&&(t.removeAttribute(e),t.removeAttribute(Ge+e))}*viewChildrenToDom(t,e={}){const n=t.getFillerOffset&&t.getFillerOffset();let i=0;for(const r of t.getChildren()){n===i&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!Pn(r.getAttributes());o&&this.renderingMode=="data"?yield*this.viewChildrenToDom(r,e):(o&&J("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,e)),i++}n===i&&(yield this._getBlockFiller())}viewRangeToDom(t){const e=this.viewPositionToDom(t.start),n=this.viewPositionToDom(t.end),i=this._domDocument.createRange();return i.setStart(e.parent,e.offset),i.setEnd(n.parent,n.offset),i}viewPositionToDom(t){const e=t.parent;if(e.is("$text")){const n=this.findCorrespondingDomText(e);if(!n)return null;let i=t.offset;return Mt(n)&&(i+=xt),{parent:n,offset:i}}else{let n,i,r;if(t.offset===0){if(n=this.mapViewToDom(e),!n)return null;r=n.childNodes[0]}else{const a=t.nodeBefore;if(i=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!i)return null;n=i.parentNode,r=i.nextSibling}if(Tt(r)&&Mt(r))return{parent:r,offset:xt};const o=i?qe(i)+1:0;return{parent:n,offset:o}}}domToView(t,e={}){const n=[],i=this._domToView(t,e,n),r=i.next().value;return!r||(i.next(),this._processDomInlineNodes(null,n,e),r.is("$text")&&r.data.length==0)?null:r}*domChildrenToView(t,e={},n=[]){for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i],o=this._domToView(r,e,n),a=o.next().value;a!==null&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(t,n,e),yield a,o.next())}this._processDomInlineNodes(t,n,e)}domSelectionToView(t){if(Uf(t))return new Ht([]);if(t.rangeCount===1){let i=t.getRangeAt(0).startContainer;Tt(i)&&(i=i.parentNode);const r=this.fakeSelectionToView(i);if(r)return r}const e=this.isDomSelectionBackward(t),n=[];for(let i=0;i<t.rangeCount;i++){const r=t.getRangeAt(i),o=this.domRangeToView(r);o&&n.push(o)}return new Ht(n,{backward:e})}domRangeToView(t){const e=this.domPositionToView(t.startContainer,t.startOffset),n=this.domPositionToView(t.endContainer,t.endOffset);return e&&n?new x(e,n):null}domPositionToView(t,e=0){if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,qe(t));const n=this.mapDomToView(t);if(n&&(n.is("uiElement")||n.is("rawElement")))return w._createBefore(n);if(Tt(t)){if(je(t))return this.domPositionToView(t.parentNode,qe(t));const i=this.findCorrespondingViewText(t);let r=e;return i?(Mt(t)&&(r-=xt,r=r<0?0:r),new w(i,r)):null}else{if(e===0){const i=this.mapDomToView(t);if(i)return new w(i,0)}else{const i=t.childNodes[e-1];if(Tt(i)&&je(i)||i&&this.isBlockFiller(i))return this.domPositionToView(i.parentNode,qe(i));const r=Tt(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(r&&r.parent)return new w(r.parent,r.index+1)}return null}}mapDomToView(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}findCorrespondingViewText(t){if(je(t))return null;const e=this.getHostViewElement(t);if(e)return e;const n=t.previousSibling;if(n){if(!this.isElement(n))return null;const i=this.mapDomToView(n);if(i){const r=i.nextSibling;return r instanceof D?r:null}}else{const i=this.mapDomToView(t.parentNode);if(i){const r=i.getChild(0);return r instanceof D?r:null}}return null}mapViewToDom(t){return this._viewToDomMapping.get(t)}findCorrespondingDomText(t){const e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}focus(t){const e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){const{scrollX:n,scrollY:i}=P.window,r=[];Bi(e,o=>{const{scrollLeft:a,scrollTop:l}=o;r.push([a,l])}),e.focus(),Bi(e,o=>{const[a,l]=r.shift();o.scrollLeft=a,o.scrollTop=l}),P.window.scrollTo(n,i)}}_clearDomSelection(){const t=this.mapViewToDom(this.document.selection.editableElement);if(!t)return;const e=t.ownerDocument.defaultView.getSelection(),n=this.domSelectionToView(e);n&&n.rangeCount>0&&e.removeAllRanges()}isElement(t){return t&&t.nodeType==Node.ELEMENT_NODE}isDocumentFragment(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(t){return this.blockFillerMode=="br"?t.isEqualNode(Ff):t.tagName==="BR"&&uo(t,this.blockElements)&&t.parentNode.childNodes.length===1?!0:t.isEqualNode(Lf)||zf(t,this.blockElements)}isDomSelectionBackward(t){if(t.isCollapsed)return!1;const e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch{return!1}const n=e.collapsed;return e.detach(),n}getHostViewElement(t){const e=H0(t);for(e.pop();e.length;){const n=e.pop(),i=this._domToViewMapping.get(n);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}registerRawContentMatcher(t){this._rawContentElementMatcher.add(t)}registerInlineObjectMatcher(t){this._inlineObjectElementMatcher.add(t)}_clearTemporaryCustomProperties(){for(const t of this._elementsWithTemporaryCustomProperties)t._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return lo(this._domDocument);case"markedNbsp":return co(this._domDocument);case"br":return ho(this._domDocument)}}_isDomSelectionPositionCorrect(t,e){if(Tt(t)&&Mt(t)&&e<xt||this.isElement(t)&&Mt(t.childNodes[e]))return!1;const n=this.mapDomToView(t);return!(n&&(n.is("uiElement")||n.is("rawElement")))}*_domToView(t,e,n){if(this.isBlockFiller(t))return null;const i=this.getHostViewElement(t);if(i)return i;if(Is(t)&&e.skipComments)return null;if(Tt(t)){if(je(t))return null;{const r=t.data;if(r==="")return null;const o=new D(this.document,r);return n.push(o),o}}else{let r=this.mapDomToView(t);if(r)return this._isInlineObjectElement(r)&&n.push(r),r;if(this.isDocumentFragment(t))r=new zt(this.document),e.bind&&this.bindDocumentFragments(t,r);else{r=this._createViewElement(t,e),e.bind&&this.bindElements(t,r);const a=t.attributes;if(a)for(let l=a.length,c=0;c<l;c++)r._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(r,e))return r._setCustomProperty("$rawContent",t.innerHTML),this._isBlockViewElement(r)||n.push(r),r;if(Is(t))return r._setCustomProperty("$rawContent",t.data),r}yield r;const o=[];if(e.withChildren!==!1)for(const a of this.domChildrenToView(t,e,o))r._appendChild(a);if(this._isInlineObjectElement(r))n.push(r);else for(const a of o)n.push(a)}}_processDomInlineNodes(t,e,n){if(!e.length||t&&!this.isDocumentFragment(t)&&!this._isBlockDomElement(t))return;let i=!1;for(let r=0;r<e.length;r++){const o=e[r];if(!o.is("$text")){i=!1;continue}let a,l=!1;if(Hf(o,this.preElements))a=Oi(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=r>0?e[r-1]:null,h=r+1<e.length?e[r+1]:null,u=!c||c.is("element")&&c.name=="br"||i,g=h?!1:!Mt(o.data);n.withChildren!==!1&&(u&&(a=a.replace(/^ /,"")),g&&(a=a.replace(/ $/,""))),a=Oi(a),a=a.replace(/ \u00A0/g,"  ");const p=h&&h.is("element")&&h.name!="br",y=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||p||y)&&(a=a.replace(/\u00A0$/," ")),(u||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),e.splice(r,1),r--):(o._data=a,i=l)}e.length=0}_processDataFromViewText(t){let e=t.data;if(t.getAncestors().some(n=>this.preElements.includes(n.name)))return e;if(e.charAt(0)==" "){const n=this._getTouchingInlineViewNode(t,!1);(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n)||!n)&&(e=" "+e.substr(1))}if(e.charAt(e.length-1)==" "){const n=this._getTouchingInlineViewNode(t,!0),i=n&&n.is("$textProxy")&&n.data.charAt(0)==" ";(e.charAt(e.length-2)==" "||!n||i)&&(e=e.substr(0,e.length-1)+" ")}return e.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(t){if(t.getAncestors().some(n=>this.preElements.includes(n.name)))return!1;const e=this._processDataFromViewText(t);return e.charAt(e.length-1)==" "}_getTouchingInlineViewNode(t,e){const n=new $t({startPosition:e?w._createAfter(t):w._createBefore(t),direction:e?"forward":"backward"});for(const i of n){if(i.item.is("element","br"))return null;if(this._isInlineObjectElement(i.item))return i.item;if(i.item.is("containerElement"))return null;if(i.item.is("$textProxy"))return i.item}return null}_isBlockDomElement(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}_isBlockViewElement(t){return t.is("element")&&this.blockElements.includes(t.name)}_isInlineObjectElement(t){return t.is("element")?t.name=="br"||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t):!1}_createViewElement(t,e){if(Is(t))return new bs(this.document,"$comment");const n=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new lt(this.document,n)}_isViewElementWithRawContent(t,e){return e.withChildren!==!1&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}_shouldRenameElement(t){const e=t.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(e)}_createReplacementDomElement(t,e){const n=this._domDocument.createElement("span");if(n.setAttribute(Ni,t),e){for(;e.firstChild;)n.appendChild(e.firstChild);for(const i of e.getAttributeNames())n.setAttribute(i,e.getAttribute(i))}return n}}function Hf(s,t){return s.getAncestors().some(e=>e.is("element")&&t.includes(e.name))}function Bi(s,t){let e=s;for(;e;)t(e),e=e.parentElement}function zf(s,t){return s.isEqualNode(Df)&&uo(s,t)&&s.parentNode.childNodes.length===1}function uo(s,t){const e=s.parentNode;return!!e&&!!e.tagName&&t.includes(e.tagName.toLowerCase())}function Fi(s){s==="script"&&J("domconverter-unsafe-script-element-detected"),s==="style"&&J("domconverter-unsafe-style-element-detected")}function Uf(s){if(!Ut.isGecko||!s.rangeCount)return!1;const t=s.getRangeAt(0).startContainer;try{Object.prototype.toString.call(t)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wf extends Vt(){constructor(t){super(),this._isEnabled=!1,this.view=t,this.document=t.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(t){return t&&t.nodeType===3&&(t=t.parentNode),!t||t.nodeType!==1?!1:t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qf{constructor(t,e,n){this.view=t,this.document=t.document,this.domEvent=e,this.domTarget=e.target,ac(this,n)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zf extends Wf{constructor(){super(...arguments),this.useCapture=!1}observe(t){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(n=>{this.listenTo(t,n,(i,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture})})}stopObserving(t){this.stopListening(t)}fire(t,e,n){this.isEnabled&&this.document.fire(t,new qf(this.view,e,n))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jf{constructor(t,e={}){this._files=e.cacheFiles?Di(t):null,this._native=t}get files(){return this._files||(this._files=Di(this._native)),this._files}get types(){return this._native.types}getData(t){return this._native.getData(t)}setData(t,e){this._native.setData(t,e)}set effectAllowed(t){this._native.effectAllowed=t}get effectAllowed(){return this._native.effectAllowed}set dropEffect(t){this._native.dropEffect=t}get dropEffect(){return this._native.dropEffect}setDragImage(t,e,n){this._native.setDragImage(t,e,n)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function Di(s){const t=Array.from(s.files||[]),e=Array.from(s.items||[]);return t.length?t:e.filter(n=>n.kind==="file").map(n=>n.getAsFile())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ot{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let fe=class extends Ot{constructor(t){super(),this.parent=null,this._attrs=Se(t)}get document(){return null}get index(){let t;if(!this.parent)return null;if((t=this.parent.getChildIndex(this))===null)throw new f("model-node-not-found-in-parent",this);return t}get startOffset(){let t;if(!this.parent)return null;if((t=this.parent.getChildStartOffset(this))===null)throw new f("model-node-not-found-in-parent",this);return t}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const t=this.index;return t!==null&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return t!==null&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}getCommonAncestor(t,e={}){const n=this.getAncestors(e),i=t.getAncestors(e);let r=0;for(;n[r]==i[r]&&n[r];)r++;return r===0?null:n[r-1]}isBefore(t){if(this==t||this.root!==t.root)return!1;const e=this.getPath(),n=t.getPath(),i=G(e,n);switch(i){case"prefix":return!0;case"extension":return!1;default:return e[i]<n[i]}}isAfter(t){return this==t||this.root!==t.root?!1:!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((e,n)=>(e[n[0]]=n[1],e),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Se(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}};fe.prototype.is=function(s){return s==="node"||s==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pe{constructor(t){this._nodes=[],t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((t,e)=>t+e.offsetSize,0)}getNode(t){return this._nodes[t]||null}getNodeIndex(t){const e=this._nodes.indexOf(t);return e==-1?null:e}getNodeStartOffset(t){const e=this.getNodeIndex(t);return e===null?null:this._nodes.slice(0,e).reduce((n,i)=>n+i.offsetSize,0)}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new f("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){let e=0;for(const n of this._nodes){if(t>=e&&t<e+n.offsetSize)return this.getNodeIndex(n);e+=n.offsetSize}if(e!=t)throw new f("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.length}_insertNodes(t,e){for(const n of e)if(!(n instanceof fe))throw new f("model-nodelist-insertnodes-not-node",this);this._nodes=ef(this._nodes,Array.from(e),t,0)}_removeNodes(t,e=1){return this._nodes.splice(t,e)}toJSON(){return this._nodes.map(t=>t.toJSON())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N extends fe{constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new N(this.data,this.getAttributes())}static fromJSON(t){return new N(t.data,t.attributes)}}N.prototype.is=function(s){return s==="$text"||s==="model:$text"||s==="text"||s==="model:text"||s==="node"||s==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ot extends Ot{constructor(t,e,n){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new f("model-textproxy-wrong-offsetintext",this);if(n<0||e+n>t.offsetSize)throw new f("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+n),this.offsetInText=e}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let n=t.includeSelf?this:this.parent;for(;n;)e[t.parentFirst?"push":"unshift"](n),n=n.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ot.prototype.is=function(s){return s==="$textProxy"||s==="model:$textProxy"||s==="textProxy"||s==="model:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class at extends fe{constructor(t,e,n){super(e),this._children=new Pe,this.name=t,n&&this._insertChild(0,n)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}findAncestor(t,e={}){let n=e.includeSelf?this:this.parent;for(;n;){if(n.name===t)return n;n=n.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?Array.from(this._children).map(n=>n._clone(!0)):void 0;return new at(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=Gf(e);for(const i of n)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const i of n)i.parent=null;return n}static fromJSON(t){let e;if(t.children){e=[];for(const n of t.children)n.name?e.push(at.fromJSON(n)):e.push(N.fromJSON(n))}return new at(t.name,t.attributes,e)}}at.prototype.is=function(s,t){return t?t===this.name&&(s==="element"||s==="model:element"):s==="element"||s==="model:element"||s==="node"||s==="model:node"};function Gf(s){return typeof s=="string"?[new N(s)]:(st(s)||(s=[s]),Array.from(s).map(t=>typeof t=="string"?new N(t):t instanceof ot?new N(t.data,t.getAttributes()):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ve{constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new f("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if(e!="forward"&&e!="backward")throw new f("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=m._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,n,i,r;do i=this.position,r=this._visitedParent,{done:e,value:n}=this.next();while(!e&&t(n));e||(this._position=i,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===n.maxOffset)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=Te(e,n),r=i||fo(e,n,i);if(r instanceof at){if(!this.shallow)e.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,Dt("elementStart",r,t,e,1)}if(r instanceof N){let o;if(this.singleCharacters)o=1;else{let c=r.endOffset;this._boundaryEndParent==n&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-e.offset}const a=e.offset-r.startOffset,l=new ot(r,a,o);return e.offset+=o,this._position=e,Dt("text",l,t,e,o)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=n.parent,this.ignoreElementEnd?this._next():Dt("elementEnd",n,t,e)}_previous(){const t=this.position,e=this.position.clone(),n=this._visitedParent;if(n.parent===null&&e.offset===0)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=e.parent,r=Te(e,i),o=r||go(e,i,r);if(o instanceof at)return e.offset--,this.shallow?(this._position=e,Dt("elementStart",o,t,e,1)):(e.path.push(o.maxOffset),this._position=e,this._visitedParent=o,this.ignoreElementEnd?this._previous():Dt("elementEnd",o,t,e));if(o instanceof N){let a;if(this.singleCharacters)a=1;else{let h=o.startOffset;this._boundaryStartParent==n&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=e.offset-h}const l=e.offset-o.startOffset,c=new ot(o,l-a,a);return e.offset-=a,this._position=e,Dt("text",c,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=n.parent,Dt("elementStart",n,t,e,1)}}function Dt(s,t,e,n,i){return{done:!1,value:{type:s,item:t,previousPosition:e,nextPosition:n,length:i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m extends Ot{constructor(t,e,n="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new f("model-position-root-invalid",t);if(!(e instanceof Array)||e.length===0)throw new f("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=n}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChild(t.offsetToIndex(this.path[e])),!t)throw new f("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new f("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Te(this,this.parent)}get nodeAfter(){const t=this.parent;return fo(this,t,Te(this,t))}get nodeBefore(){const t=this.parent;return go(this,t,Te(this,t))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=G(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const n=new ve(e);return n.skip(t),n.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=G(this.path,t.path),n=typeof e=="string"?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,n)}getCommonAncestor(t){const e=this.getAncestors(),n=t.getAncestors();let i=0;for(;e[i]==n[i]&&e[i];)i++;return i===0?null:e[i-1]}getShiftedBy(t){const e=this.clone(),n=e.offset+t;return e.offset=n<0?0:n,e}isAfter(t){return this.compareWith(t)=="after"}isBefore(t){return this.compareWith(t)=="before"}isEqual(t){return this.compareWith(t)=="same"}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let n=0;n<e;n++){const i=this.path[n]-t.path[n];if(i<-1||i>1)return!1;if(i===1)return Li(t,this,n);if(i===-1)return Li(this,t,n)}return this.path.length===t.path.length?!0:this.path.length>t.path.length?en(this.path,e):en(t.path,e)}hasSameParentAs(t){if(this.root!==t.root)return!1;const e=this.getParentPath(),n=t.getParentPath();return G(e,n)=="same"}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=m._createAt(this);break}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange,n=e.containsPosition(this)||e.start.isEqual(this);let i;return n?(i=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(i=i._getTransformedByDeletion(t.deletionPosition,1))):this.isEqual(t.deletionPosition)?i=m._createAt(t.deletionPosition):i=this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),i}_getTransformedByDeletion(t,e){const n=m._createAt(this);if(this.root!=t.root)return n;if(G(t.getParentPath(),this.getParentPath())=="same"){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;n.offset-=e}}else if(G(t.getParentPath(),this.getParentPath())=="prefix"){const i=t.path.length-1;if(t.offset<=this.path[i]){if(t.offset+e>this.path[i])return null;n.path[i]-=e}}return n}_getTransformedByInsertion(t,e){const n=m._createAt(this);if(this.root!=t.root)return n;if(G(t.getParentPath(),this.getParentPath())=="same")(t.offset<this.offset||t.offset==this.offset&&this.stickiness!="toPrevious")&&(n.offset+=e);else if(G(t.getParentPath(),this.getParentPath())=="prefix"){const i=t.path.length-1;t.offset<=this.path[i]&&(n.path[i]+=e)}return n}_getTransformedByMove(t,e,n){if(e=e._getTransformedByDeletion(t,n),t.isEqual(e))return m._createAt(this);const i=this._getTransformedByDeletion(t,n);return i===null||t.isEqual(this)&&this.stickiness=="toNext"||t.getShiftedBy(n).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(t,e):i._getTransformedByInsertion(e,n)}_getCombined(t,e){const n=t.path.length-1,i=m._createAt(e);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[n]-t.offset,i.path=[...i.path,...this.path.slice(n+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,n="toNone"){if(t instanceof m)return new m(t.root,t.path,t.stickiness);{const i=t;if(e=="end")e=i.maxOffset;else{if(e=="before")return this._createBefore(i,n);if(e=="after")return this._createAfter(i,n);if(e!==0&&!e)throw new f("model-createpositionat-offset-required",[this,t])}if(!i.is("element")&&!i.is("documentFragment"))throw new f("model-position-parent-incorrect",[this,t]);const r=i.getPath();return r.push(e),new this(i.root,r,n)}}static _createAfter(t,e){if(!t.parent)throw new f("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new f("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if(t.root==="$graveyard"){const n=new m(e.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!e.getRoot(t.root))throw new f("model-position-fromjson-no-root",e,{rootName:t.root});return new m(e.getRoot(t.root),t.path,t.stickiness)}}m.prototype.is=function(s){return s==="position"||s==="model:position"};function Te(s,t){const e=t.getChild(t.offsetToIndex(s.offset));return e&&e.is("$text")&&e.startOffset<s.offset?e:null}function fo(s,t,e){return e!==null?null:t.getChild(t.offsetToIndex(s.offset))}function go(s,t,e){return e!==null?null:t.getChild(t.offsetToIndex(s.offset)-1)}function Li(s,t,e){return!(e+1===s.path.length||!en(t.path,e+1)||!Jf(s,e+1))}function en(s,t){for(;t<s.length;){if(s[t]!==0)return!1;t++}return!0}function Jf(s,t){let e=s.parent,n=s.path.length-1,i=0;for(;n>=t;){if(s.path[n]+i!==e.maxOffset)return!1;i=1,n--,e=e.parent}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d extends Ot{constructor(t,e){super(),this.start=m._createAt(t),this.end=e?m._createAt(e):m._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new ve({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const t=this.start.getParentPath(),e=this.end.getParentPath();return G(t,e)=="same"}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const n=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),i=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return n&&i}containsItem(t){const e=m._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new d(this.start,t.start)),this.containsPosition(t.end)&&e.push(new d(t.end,this.end))):e.push(new d(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,n=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(n=t.end),new d(e,n)}return null}getJoined(t,e=!1){let n=this.isIntersecting(t);if(n||(this.start.isBefore(t.start)?n=e?this.end.isTouching(t.start):this.end.isEqual(t.start):n=e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;let i=this.start,r=this.end;return t.start.isBefore(i)&&(i=t.start),t.end.isAfter(r)&&(r=t.end),new d(i,r)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,n=m._createAt(this.start);let i=n.parent;for(;n.path.length>e+1;){const r=i.maxOffset-n.offset;r!==0&&t.push(new d(n,n.getShiftedBy(r))),n.path=n.path.slice(0,-1),n.offset++,i=i.parent}for(;n.path.length<=this.end.path.length;){const r=this.end.path[n.path.length-1],o=r-n.offset;o!==0&&t.push(new d(n,n.getShiftedBy(o))),n.offset=r,n.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new ve(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new ve(t);for(const n of e)yield n.item}*getPositions(t={}){t.boundaries=this;const e=new ve(t);yield e.position;for(const n of e)yield n.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new d(this.start,this.end)]}getTransformedByOperations(t){const e=[new d(this.start,this.end)];for(const n of t)for(let i=0;i<e.length;i++){const r=e[i].getTransformedByOperation(n);e.splice(i,1,...r),i+=r.length-1}for(let n=0;n<e.length;n++){const i=e[n];for(let r=n+1;r<e.length;r++){const o=e[r];(i.containsRange(o)||o.containsRange(i)||i.isEqual(o))&&e.splice(r,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const n=t.sourcePosition,i=t.howMany,r=t.targetPosition;return this._getTransformedByMove(n,r,i,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),e.root!=n.root&&(n=this.end.getShiftedBy(-1)),new d(e,n)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new d(this.start);let e=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return e.root!=n.root&&(n=this.end.getShiftedBy(-1)),e.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(e=m._createAt(n),e.offset=0):(t.deletionPosition.isEqual(e)||(n=t.deletionPosition),e=t.targetPosition),new d(e,n)):new d(e,n)}_getTransformedByInsertion(t,e,n=!1){if(n&&this.containsPosition(t))return[new d(this.start,t),new d(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const i=new d(this.start,this.end);return i.start=i.start._getTransformedByInsertion(t,e),i.end=i.end._getTransformedByInsertion(t,e),[i]}}_getTransformedByMove(t,e,n,i=!1){if(this.isCollapsed){const u=this.start._getTransformedByMove(t,e,n);return[new d(u)]}const r=d._createFromPositionAndShift(t,n),o=e._getTransformedByDeletion(t,n);if(this.containsPosition(e)&&!i&&(r.containsPosition(this.start)||r.containsPosition(this.end))){const u=this.start._getTransformedByMove(t,e,n),g=this.end._getTransformedByMove(t,e,n);return[new d(u,g)]}let a;const l=this.getDifference(r);let c=null;const h=this.getIntersection(r);if(l.length==1?c=new d(l[0].start._getTransformedByDeletion(t,n),l[0].end._getTransformedByDeletion(t,n)):l.length==2&&(c=new d(this.start,this.end._getTransformedByDeletion(t,n))),c?a=c._getTransformedByInsertion(o,n,h!==null||i):a=[],h){const u=new d(h.start._getCombined(r.start,o),h.end._getCombined(r.start,o));a.length==2?a.splice(1,0,u):a.push(u)}return a}_getTransformedByDeletion(t,e){let n=this.start._getTransformedByDeletion(t,e),i=this.end._getTransformedByDeletion(t,e);return n==null&&i==null?null:(n==null&&(n=t),i==null&&(i=t),new d(n,i))}static _createFromPositionAndShift(t,e){const n=t,i=t.getShiftedBy(e);return e>0?new this(n,i):new this(i,n)}static _createIn(t){return new this(m._createAt(t,0),m._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(m._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(t.length===0)throw new f("range-create-from-ranges-empty-array",null);if(t.length==1)return t[0].clone();const e=t[0];t.sort((r,o)=>r.start.isAfter(o.start)?1:-1);const n=t.indexOf(e),i=new this(e.start,e.end);if(n>0)for(let r=n-1;t[r].end.isEqual(i.start);r++)i.start=m._createAt(t[r].start);for(let r=n+1;r<t.length&&t[r].start.isEqual(i.end);r++)i.end=m._createAt(t[r].end);return i}static fromJSON(t,e){return new this(m.fromJSON(t.start,e),m.fromJSON(t.end,e))}}d.prototype.is=function(s){return s==="range"||s==="model:range"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kf extends C(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(t,e)=>{if(e.viewPosition)return;const n=this._modelToViewMapping.get(e.modelPosition.parent);if(!n)throw new f("mapping-model-position-view-parent-not-found",this,{modelPosition:e.modelPosition});e.viewPosition=this.findPositionIn(n,e.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(t,e)=>{if(e.modelPosition)return;const n=this.findMappedViewAncestor(e.viewPosition),i=this._viewToModelMapping.get(n),r=this._toModelOffset(e.viewPosition.parent,e.viewPosition.offset,n);e.modelPosition=m._createAt(i,r)},{priority:"low"})}bindElements(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}unbindViewElement(t,e={}){const n=this.toModelElement(t);if(this._elementToMarkerNames.has(t))for(const i of this._elementToMarkerNames.get(t))this._unboundMarkerNames.add(i);e.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t),this._modelToViewMapping.get(n)==t&&this._modelToViewMapping.delete(n))}unbindModelElement(t){const e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)}bindElementToMarker(t,e){const n=this._markerNameToElements.get(e)||new Set;n.add(t);const i=this._elementToMarkerNames.get(t)||new Set;i.add(e),this._markerNameToElements.set(e,n),this._elementToMarkerNames.set(t,i)}unbindElementFromMarkerName(t,e){const n=this._markerNameToElements.get(e);n&&(n.delete(t),n.size==0&&this._markerNameToElements.delete(e));const i=this._elementToMarkerNames.get(t);i&&(i.delete(e),i.size==0&&this._elementToMarkerNames.delete(t))}flushUnboundMarkerNames(){const t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}flushDeferredBindings(){for(const[t,e]of this._deferredBindingRemovals)t.root==e&&this.unbindViewElement(t);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(t){return this._viewToModelMapping.get(t)}toViewElement(t){return this._modelToViewMapping.get(t)}toModelRange(t){return new d(this.toModelPosition(t.start),this.toModelPosition(t.end))}toViewRange(t){return new x(this.toViewPosition(t.start),this.toViewPosition(t.end))}toModelPosition(t){const e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}toViewPosition(t,e={}){const n={modelPosition:t,mapper:this,isPhantom:e.isPhantom};return this.fire("modelToViewPosition",n),n.viewPosition}markerNameToElements(t){const e=this._markerNameToElements.get(t);if(!e)return null;const n=new Set;for(const i of e)if(i.is("attributeElement"))for(const r of i.getElementsWithSameId())n.add(r);else n.add(i);return n}registerViewToModelLength(t,e){this._viewToModelLengthCallbacks.set(t,e)}findMappedViewAncestor(t){let e=t.parent;for(;!this._viewToModelMapping.has(e);)e=e.parent;return e}_toModelOffset(t,e,n){if(n!=t){const r=this._toModelOffset(t.parent,t.index,n),o=this._toModelOffset(t,e,t);return r+o}if(t.is("$text"))return e;let i=0;for(let r=0;r<e;r++)i+=this.getModelLength(t.getChild(r));return i}getModelLength(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;{let e=0;for(const n of t.getChildren())e+=this.getModelLength(n);return e}}findPositionIn(t,e){let n,i=0,r=0,o=0;if(t.is("$text"))return new w(t,e);for(;r<e;)n=t.getChild(o),i=this.getModelLength(n),r+=i,o++;return r==e?this._moveViewPositionToTextNode(new w(t,o)):this.findPositionIn(n,e-(r-i))}_moveViewPositionToTextNode(t){const e=t.nodeBefore,n=t.nodeAfter;return e instanceof D?new w(e,e.data.length):n instanceof D?new w(n,0):t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Yf{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(t,e){e=Je(e),t instanceof ot&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}consume(t,e){return e=Je(e),t instanceof ot&&(t=this._getSymbolForTextProxy(t)),this.test(t,e)?(this._consumable.get(t).set(e,!1),!0):!1}test(t,e){e=Je(e),t instanceof ot&&(t=this._getSymbolForTextProxy(t));const n=this._consumable.get(t);if(n===void 0)return null;const i=n.get(e);return i===void 0?null:i}revert(t,e){e=Je(e),t instanceof ot&&(t=this._getSymbolForTextProxy(t));const n=this.test(t,e);return n===!1?(this._consumable.get(t).set(e,!0),!0):n===!0?!1:null}verifyAllConsumed(t){const e=[];for(const[n,i]of this._consumable)for(const[r,o]of i){const a=r.split(":")[0];o&&t==a&&e.push({event:r,item:n.name||n.description})}if(e.length)throw new f("conversion-model-consumable-not-consumed",null,{items:e})}_getSymbolForTextProxy(t){let e=null;const n=this._textProxyRegistry.get(t.startOffset);if(n){const i=n.get(t.endOffset);i&&(e=i.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}_addSymbolForTextProxy(t){const e=t.startOffset,n=t.endOffset,i=t.parent,r=Symbol("$textProxy:"+t.data);let o,a;return o=this._textProxyRegistry.get(e),o||(o=new Map,this._textProxyRegistry.set(e,o)),a=o.get(n),a||(a=new Map,o.set(n,a)),a.set(i,r),r}}function Je(s){const t=s.split(":");return t[0]=="insert"?t[0]:t[0]=="addMarker"||t[0]=="removeMarker"?s:t.length>1?t[0]+":"+t[1]:t[0]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xf extends C(){constructor(t){super(),this._conversionApi={dispatcher:this,...t},this._firedEventsMap=new WeakMap}convertChanges(t,e,n){const i=this._createConversionApi(n,t.getRefreshedItems());for(const o of t.getMarkersToRemove())this._convertMarkerRemove(o.name,o.range,i);const r=this._reduceChanges(t.getChanges());for(const o of r)o.type==="insert"?this._convertInsert(d._createFromPositionAndShift(o.position,o.length),i):o.type==="reinsert"?this._convertReinsert(d._createFromPositionAndShift(o.position,o.length),i):o.type==="remove"?this._convertRemove(o.position,o.length,o.name,i):this._convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,i);i.mapper.flushDeferredBindings();for(const o of i.mapper.flushUnboundMarkerNames()){const a=e.get(o).getRange();this._convertMarkerRemove(o,a,i),this._convertMarkerAdd(o,a,i)}for(const o of t.getMarkersToAdd())this._convertMarkerAdd(o.name,o.range,i);i.consumable.verifyAllConsumed("insert")}convert(t,e,n,i={}){const r=this._createConversionApi(n,void 0,i);this._convertInsert(t,r);for(const[o,a]of e)this._convertMarkerAdd(o,a,r);r.consumable.verifyAllConsumed("insert")}convertSelection(t,e,n){const i=this._createConversionApi(n);this.fire("cleanSelection",{selection:t},i);const r=t.getFirstPosition().root;if(!i.mapper.toViewElement(r))return;const o=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,t,o),this.fire("selection",{selection:t},i),!!t.isCollapsed){for(const a of o)if(i.consumable.test(t,"addMarker:"+a.name)){const l=a.getRange();if(!Qf(t.getFirstPosition(),a,i.mapper))continue;const c={item:t,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,i)}for(const a of t.getAttributeKeys())if(i.consumable.test(t,"attribute:"+a)){const l={item:t,range:t.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:t.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,i)}}}_convertInsert(t,e,n={}){n.doNotAddConsumables||this._addConsumablesForInsert(e.consumable,t);for(const i of Array.from(t.getWalker({shallow:!0})).map($i))this._testAndFire("insert",i,e)}_convertRemove(t,e,n,i){this.fire(`remove:${n}`,{position:t,length:e},i)}_convertAttribute(t,e,n,i,r){this._addConsumablesForRange(r.consumable,t,`attribute:${e}`);for(const o of t){const a={item:o.item,range:d._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:e,attributeOldValue:n,attributeNewValue:i};this._testAndFire(`attribute:${e}`,a,r)}}_convertReinsert(t,e){const n=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(e.consumable,n);for(const i of n.map($i))this._testAndFire("insert",{...i,reconversion:!0},e)}_convertMarkerAdd(t,e,n){if(e.root.rootName=="$graveyard")return;const i=`addMarker:${t}`;if(n.consumable.add(e,i),this.fire(i,{markerName:t,markerRange:e},n),!!n.consumable.consume(e,i)){this._addConsumablesForRange(n.consumable,e,i);for(const r of e.getItems()){if(!n.consumable.test(r,i))continue;const o={item:r,range:d._createOn(r),markerName:t,markerRange:e};this.fire(i,o,n)}}}_convertMarkerRemove(t,e,n){e.root.rootName!="$graveyard"&&this.fire(`removeMarker:${t}`,{markerName:t,markerRange:e},n)}_reduceChanges(t){const e={changes:t};return this.fire("reduceChanges",e),e.changes}_addConsumablesForInsert(t,e){for(const n of e){const i=n.item;if(t.test(i,"insert")===null){t.add(i,"insert");for(const r of i.getAttributeKeys())t.add(i,"attribute:"+r)}}return t}_addConsumablesForRange(t,e,n){for(const i of e.getItems())t.add(i,n);return t}_addConsumablesForSelection(t,e,n){t.add(e,"selection");for(const i of n)t.add(e,"addMarker:"+i.name);for(const i of e.getAttributeKeys())t.add(e,"attribute:"+i);return t}_testAndFire(t,e,n){const i=td(t,e),r=e.item.is("$textProxy")?n.consumable._getSymbolForTextProxy(e.item):e.item,o=this._firedEventsMap.get(n),a=o.get(r);if(!a)o.set(r,new Set([i]));else if(!a.has(i))a.add(i);else return;this.fire(i,e,n)}_testAndFireAddAttributes(t,e){const n={item:t,range:d._createOn(t)};for(const i of n.item.getAttributeKeys())n.attributeKey=i,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(i),this._testAndFire(`attribute:${i}`,n,e)}_createConversionApi(t,e=new Set,n={}){const i={...this._conversionApi,consumable:new Yf,writer:t,options:n,convertItem:r=>this._convertInsert(d._createOn(r),i),convertChildren:r=>this._convertInsert(d._createIn(r),i,{doNotAddConsumables:!0}),convertAttributes:r=>this._testAndFireAddAttributes(r,i),canReuseView:r=>!e.has(i.mapper.toModelElement(r))};return this._firedEventsMap.set(i,new Map),i}}function Qf(s,t,e){const n=t.getRange(),i=Array.from(s.getAncestors());return i.shift(),i.reverse(),!i.some(o=>{if(n.containsItem(o))return!!e.toViewElement(o).getCustomProperty("addHighlight")})}function td(s,t){const e=t.item.is("element")?t.item.name:"$text";return`${s}:${e}`}function $i(s){const t=s.item,e=d._createFromPositionAndShift(s.previousPosition,s.length);return{item:t,range:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ys extends C(Ot){constructor(...t){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let n=!1;for(const i of t._ranges)if(e.isEqual(i)){n=!0;break}if(!n)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new d(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)(!t||e.start.isBefore(t.start))&&(t=e);return t?new d(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)(!t||e.end.isAfter(t.end))&&(t=e);return t?new d(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,n,i]=t;if(typeof n=="object"&&(i=n,n=void 0),e===null)this._setRanges([]);else if(e instanceof ys)this._setRanges(e.getRanges(),e.isBackward);else if(e&&typeof e.getRanges=="function")this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof d)this._setRanges([e],!!i&&!!i.backward);else if(e instanceof m)this._setRanges([new d(e)]);else if(e instanceof fe){const r=!!i&&!!i.backward;let o;if(n=="in")o=d._createIn(e);else if(n=="on")o=d._createOn(e);else if(n!==void 0)o=new d(m._createAt(e,n));else throw new f("model-selection-setto-required-second-parameter",[this,e]);this._setRanges([o],r)}else if(st(e))this._setRanges(e,i&&!!i.backward);else throw new f("model-selection-setto-not-selectable",[this,e])}_setRanges(t,e=!1){const n=Array.from(t),i=n.some(r=>{if(!(r instanceof d))throw new f("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(o=>!o.isEqual(r))});n.length===this._ranges.length&&!i||(this._replaceAllRanges(n),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(this.anchor===null)throw new f("model-selection-setfocus-no-ranges",[this,t]);const n=m._createAt(t,e);if(n.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.length&&this._popRange(),n.compareWith(i)=="before"?(this._pushRange(new d(n,i)),this._lastRangeBackward=!0):(this._pushRange(new d(i,n)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const n=Hi(e.start,t);sd(n,e)&&(yield n);for(const r of e.getWalker()){const o=r.item;r.type=="elementEnd"&&ed(o,t,e)&&(yield o)}const i=Hi(e.end,t);nd(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=m._createAt(t,0),n=m._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&n.isTouching(this.getLastPosition())}_pushRange(t){this._checkRange(t),this._ranges.push(new d(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new f("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}ys.prototype.is=function(s){return s==="selection"||s==="model:selection"};function mo(s,t){return t.has(s)?!1:(t.add(s),s.root.document.model.schema.isBlock(s)&&!!s.parent)}function ed(s,t,e){return mo(s,t)&&kn(s,e)}function Hi(s,t){const n=s.parent.root.document.model.schema,i=s.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=i.find(a=>r?!1:(r=n.isLimit(a),!r&&mo(a,t)));return i.forEach(a=>t.add(a)),o}function kn(s,t){const e=id(s);return e?!t.containsRange(d._createOn(e),!0):!0}function sd(s,t){return s?t.isCollapsed||s.isEmpty?!0:t.start.isTouching(m._createAt(s,s.maxOffset))?!1:kn(s,t):!1}function nd(s,t){return s?t.isCollapsed||s.isEmpty?!0:t.end.isTouching(m._createAt(s,0))?!1:kn(s,t):!1}function id(s){const t=s.root.document.model.schema;let e=s.parent;for(;e;){if(t.isBlock(e))return e;e=e.parent}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ce extends C(d){constructor(t,e){super(t,e),rd.call(this)}detach(){this.stopListening()}toRange(){return new d(this.start,this.end)}static fromRange(t){return new ce(t.start,t.end)}}ce.prototype.is=function(s){return s==="liveRange"||s==="model:liveRange"||s=="range"||s==="model:range"};function rd(){this.listenTo(this.root.document.model,"applyOperation",(s,t)=>{const e=t[0];e.isDocumentOperation&&od.call(this,e)},{priority:"low"})}function od(s){const t=this.getTransformedByOperation(s),e=d._createFromRanges(t),n=!e.isEqual(this),i=ad(this,s);let r=null;if(n){e.root.rootName=="$graveyard"&&(s.type=="remove"?r=s.sourcePosition:r=s.deletionPosition);const o=this.toRange();this.start=e.start,this.end=e.end,this.fire("change:range",o,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function ad(s,t){switch(t.type){case"insert":return s.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(t.sourcePosition)||s.start.isEqual(t.sourcePosition)||s.containsPosition(t.targetPosition);case"split":return s.containsPosition(t.splitPosition)||s.containsPosition(t.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Re="selection:";class po extends C(Ot){constructor(t){super(),this._selection=new ld(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return Re+t}static _isStoreAttributeKey(t){return t.startsWith(Re)}}po.prototype.is=function(s){return s==="selection"||s=="model:selection"||s=="documentSelection"||s=="model:documentSelection"};class ld extends ys{constructor(t){super(),this.markers=new Kt({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(e,n)=>{const i=n[0];!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(e,n,i,r)=>{this._updateMarker(n,r)}),this.listenTo(this._document,"change",(e,n)=>{cd(this._model,n)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const n=[t];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=mt();return this._overriddenGravityRegister.add(t),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new f("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new f("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=ce.fromRange(t);return e.on("change:range",(n,i,r)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const o=this._ranges.indexOf(e);this._ranges.splice(o,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const i of this._model.markers){const r=i.name.split(":",1)[0];if(!this._observedMarkers.has(r))continue;const o=i.getRange();for(const a of this.getRanges())o.containsRange(a,!a.isCollapsed)&&t.push(i)}const n=Array.from(this.markers);for(const i of t)this.markers.has(i)||(this.markers.add(i),e=!0);for(const i of Array.from(this.markers))t.includes(i)||(this.markers.remove(i),e=!0);e&&this.fire("change:marker",{oldMarkers:n,directChange:!1})}_updateMarker(t,e){const n=t.name.split(":",1)[0];if(!this._observedMarkers.has(n))return;let i=!1;const r=Array.from(this.markers),o=this.markers.has(t);if(!e)o&&(this.markers.remove(t),i=!0);else{let a=!1;for(const l of this.getRanges())if(e.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!o?(this.markers.add(t),i=!0):!a&&o&&(this.markers.remove(t),i=!0)}i&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateAttributes(t){const e=Se(this._getSurroundingAttributes()),n=Se(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[r,o]of this._attributePriority)o=="low"&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(e);const i=[];for(const[r,o]of this.getAttributes())(!n.has(r)||n.get(r)!==o)&&i.push(r);for(const[r]of n)this.hasAttribute(r)||i.push(r);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(t,e,n=!0){const i=n?"normal":"low";return i=="low"&&this._attributePriority.get(t)=="normal"||super.getAttribute(t)===e?!1:(this._attrs.set(t,e),this._attributePriority.set(t,i),!0)}_removeAttribute(t,e=!0){const n=e?"normal":"low";return n=="low"&&this._attributePriority.get(t)=="normal"||(this._attributePriority.set(t,n),!super.hasAttribute(t))?!1:(this._attrs.delete(t),!0)}_setAttributesTo(t){const e=new Set;for(const[n,i]of this.getAttributes())t.get(n)!==i&&this._removeAttribute(n,!1);for(const[n,i]of t)this._setAttribute(n,i,!1)&&e.add(n);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())e.startsWith(Re)&&(yield[e.substr(Re.length),t.getAttribute(e)])}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if(t.root.rootName=="$graveyard")return null;let n=null;if(this.isCollapsed){const i=t.textNode?t.textNode:t.nodeBefore,r=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(n=we(i,e)),n||(n=we(r,e)),!this.isGravityOverridden&&!n){let o=i;for(;o&&!n;)o=o.previousSibling,n=we(o,e)}if(!n){let o=r;for(;o&&!n;)o=o.nextSibling,n=we(o,e)}n||(n=this.getStoredAttributes())}else{const i=this.getFirstRange();for(const r of i){if(r.item.is("element")&&e.isObject(r.item)){n=we(r.item,e);break}if(r.type=="text"){n=r.item.getAttributes();break}}}return n}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function we(s,t){if(!s)return null;if(s instanceof ot||s instanceof N)return s.getAttributes();if(!t.isInline(s))return null;if(!t.isObject(s))return[];const e=[];for(const[n,i]of s.getAttributes())t.checkAttribute("$text",n)&&t.getAttributeProperties(n).copyFromObject!==!1&&e.push([n,i]);return e}function cd(s,t){const e=s.document.differ;for(const n of e.getChanges()){if(n.type!="insert")continue;const i=n.position.parent;n.length===i.maxOffset&&s.enqueueChange(t,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(Re));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function hd(){return(s,t,e)=>{if(!e.consumable.consume(t.item,s.name))return;const n=e.writer,i=e.mapper.toViewPosition(t.range.start),r=n.createText(t.item.data);n.insert(i,r)}}function ud(){return(s,t,e)=>{e.convertAttributes(t.item),!t.reconversion&&t.item.is("element")&&!t.item.isEmpty&&e.convertChildren(t.item)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function fd(s){const{schema:t,document:e}=s.model;for(const n of e.getRoots())if(n.isEmpty&&!t.checkChild(n,"$text")&&t.checkChild(n,"paragraph"))return s.insertElement("paragraph",n),!0;return!1}function wo(s,t,e){const n=e.createContext(s);return!(!e.checkChild(n,"paragraph")||!e.checkChild(n.push("paragraph"),t))}function _o(s,t){const e=t.createElement("paragraph");return t.insert(e,s),t.createPositionAt(e,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zi(){return(s,t,e)=>{if(!t.modelRange&&e.consumable.consume(t.viewItem,{name:!0})){const{modelRange:n,modelCursor:i}=e.convertChildren(t.viewItem,t.modelCursor);t.modelRange=n,t.modelCursor=i}}}function dd(){return(s,t,{schema:e,consumable:n,writer:i})=>{let r=t.modelCursor;if(!n.test(t.viewItem))return;if(!e.checkChild(r,"$text")){if(!wo(r,"$text",e)||t.viewItem.data.trim().length==0)return;const a=r.nodeBefore;r=_o(r,i),a&&a.is("element","$marker")&&(i.move(i.createRangeOn(a),r),r=i.createPositionAfter(a))}n.consume(t.viewItem);const o=i.createText(t.viewItem.data);i.insert(o,r),t.modelRange=i.createRange(r,r.getShiftedBy(o.offsetSize)),t.modelCursor=t.modelRange.end}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xe{constructor(){this._consumables=new Map}add(t,e){let n;if(t.is("$text")||t.is("documentFragment")){this._consumables.set(t,!0);return}this._consumables.has(t)?n=this._consumables.get(t):(n=new gd(t),this._consumables.set(t,n)),n.add(e)}test(t,e){const n=this._consumables.get(t);return n===void 0?null:t.is("$text")||t.is("documentFragment")?n:n.test(e)}consume(t,e){return this.test(t,e)?(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0):!1}revert(t,e){const n=this._consumables.get(t);n!==void 0&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):n.revert(e))}static consumablesFromElement(t){const e={element:t,name:!0,attributes:[],classes:[],styles:[]},n=t.getAttributeKeys();for(const o of n)o=="style"||o=="class"||e.attributes.push(o);const i=t.getClassNames();for(const o of i)e.classes.push(o);const r=t.getStyleNames();for(const o of r)e.styles.push(o);return e}static createFrom(t,e){if(e||(e=new xe),t.is("$text"))return e.add(t),e;t.is("element")&&e.add(t,xe.consumablesFromElement(t)),t.is("documentFragment")&&e.add(t);for(const n of t.getChildren())e=xe.createFrom(n,e);return e}}const Ke=["attributes","classes","styles"];class gd{constructor(t){this.element=t,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(t){t.name&&(this._canConsumeName=!0);for(const e of Ke)e in t&&this._add(e,t[e])}test(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(const e of Ke)if(e in t){const n=this._test(e,t[e]);if(n!==!0)return n}return!0}consume(t){t.name&&(this._canConsumeName=!1);for(const e of Ke)e in t&&this._consume(e,t[e])}revert(t){t.name&&(this._canConsumeName=!0);for(const e of Ke)e in t&&this._revert(e,t[e])}_add(t,e){const n=K(e),i=this._consumables[t];for(const r of n){if(t==="attributes"&&(r==="class"||r==="style"))throw new f("viewconsumable-invalid-attribute",this);if(i.set(r,!0),t==="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))i.set(o,!0)}}_test(t,e){const n=K(e),i=this._consumables[t];for(const r of n)if(t==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles",a=this._test(o,[...this._consumables[o].keys()]);if(a!==!0)return a}else{const o=i.get(r);if(o===void 0)return null;if(!o)return!1}return!0}_consume(t,e){const n=K(e),i=this._consumables[t];for(const r of n)if(t==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}else if(i.set(r,!1),t=="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(r))i.set(o,!1)}_revert(t,e){const n=K(e),i=this._consumables[t];for(const r of n)if(t==="attributes"&&(r==="class"||r==="style")){const o=r=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}else i.get(r)===!1&&i.set(r,!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ls{constructor(t){if(t instanceof ls)return t;let e;typeof t=="string"?e=[t]:Array.isArray(t)?e=t:e=t.getAncestors({includeSelf:!0}),this._items=e.map(md)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(t){const e=new ls([t]);return e._items=[...this._items,...e._items],e}getItem(t){return this._items[t]}*getNames(){yield*this._items.map(t=>t.name)}endsWith(t){return Array.from(this.getNames()).join(" ").endsWith(t)}startsWith(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}function md(s){return typeof s=="string"||s.is("documentFragment")?{name:typeof s=="string"?s:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:s.is("element")?s.name:"$text",*getAttributeKeys(){yield*s.getAttributeKeys()},getAttribute(t){return s.getAttribute(t)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pd extends C(){constructor(t){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...t,consumable:null,writer:null,store:null,convertItem:(e,n)=>this._convertItem(e,n),convertChildren:(e,n)=>this._convertChildren(e,n),safeInsert:(e,n)=>this._safeInsert(e,n),updateConversionResult:(e,n)=>this._updateConversionResult(e,n),splitToAllowedParent:(e,n)=>this._splitToAllowedParent(e,n),getSplitParts:e=>this._getSplitParts(e),keepEmptyElement:e=>this._keepEmptyElement(e)}}convert(t,e,n=["$root"]){this.fire("viewCleanup",t),this._modelCursor=_d(n,e),this.conversionApi.writer=e,this.conversionApi.consumable=xe.createFrom(t),this.conversionApi.store={};const{modelRange:i}=this._convertItem(t,this._modelCursor),r=e.createDocumentFragment();if(i){this._removeEmptyElements();for(const o of Array.from(this._modelCursor.parent.getChildren()))e.append(o,r);r.markers=wd(r,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(t,e){const n={viewItem:t,modelCursor:e,modelRange:null};if(t.is("element")?this.fire(`element:${t.name}`,n,this.conversionApi):t.is("$text")?this.fire("text",n,this.conversionApi):this.fire("documentFragment",n,this.conversionApi),n.modelRange&&!(n.modelRange instanceof d))throw new f("view-conversion-dispatcher-incorrect-result",this);return{modelRange:n.modelRange,modelCursor:n.modelCursor}}_convertChildren(t,e){let n=e.is("position")?e:m._createAt(e,0);const i=new d(n);for(const r of Array.from(t.getChildren())){const o=this._convertItem(r,n);o.modelRange instanceof d&&(i.end=o.modelRange.end,n=o.modelCursor)}return{modelRange:i,modelCursor:n}}_safeInsert(t,e){const n=this._splitToAllowedParent(t,e);return n?(this.conversionApi.writer.insert(t,n.position),!0):!1}_updateConversionResult(t,e){const n=this._getSplitParts(t),i=this.conversionApi.writer;e.modelRange||(e.modelRange=i.createRange(i.createPositionBefore(t),i.createPositionAfter(n[n.length-1])));const r=this._cursorParents.get(t);r?e.modelCursor=i.createPositionAt(r,0):e.modelCursor=e.modelRange.end}_splitToAllowedParent(t,e){const{schema:n,writer:i}=this.conversionApi;let r=n.findAllowedParent(e,t);if(r){if(r===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(r)&&(r=null)}if(!r)return wo(e,t,n)?{position:_o(e,i)}:null;const o=this.conversionApi.writer.split(e,r),a=[];for(const c of o.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const h=a.pop(),u=c.item;this._registerSplitPair(h,u)}const l=o.range.end.parent;return this._cursorParents.set(t,l),{position:o.position,cursorParent:l}}_registerSplitPair(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);const n=this._splitParts.get(t);this._splitParts.set(e,n),n.push(e)}_getSplitParts(t){let e;return this._splitParts.has(t)?e=this._splitParts.get(t):e=[t],e}_keepEmptyElement(t){this._emptyElementsToKeep.add(t)}_removeEmptyElements(){let t=!1;for(const e of this._splitParts.keys())e.isEmpty&&!this._emptyElementsToKeep.has(e)&&(this.conversionApi.writer.remove(e),this._splitParts.delete(e),t=!0);t&&this._removeEmptyElements()}}function wd(s,t){const e=new Set,n=new Map,i=d._createIn(s).getItems();for(const r of i)r.is("element","$marker")&&e.add(r);for(const r of e){const o=r.getAttribute("data-name"),a=t.createPositionBefore(r);n.has(o)?n.get(o).end=a.clone():n.set(o,new d(a.clone())),t.remove(r)}return n}function _d(s,t){let e;for(const n of new ls(s)){const i={};for(const o of n.getAttributeKeys())i[o]=n.getAttribute(o);const r=t.createElement(n.name,i);e&&t.insert(r,e),e=m._createAt(r,0)}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vd{getHtml(t){const n=P.document.implementation.createHTMLDocument("").createElement("div");return n.appendChild(t),n.innerHTML}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bd{constructor(t){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new $f(t,{renderingMode:"data"}),this.htmlWriter=new vd}toData(t){const e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}toView(t){const e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}registerRawContentMatcher(t){this.domConverter.registerRawContentMatcher(t)}useFillerType(t){this.domConverter.blockFillerMode=t=="marked"?"markedNbsp":"nbsp"}_toDom(t){t.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(t=`<body>${t}</body>`);const e=this.domParser.parseFromString(t,"text/html"),n=e.createDocumentFragment(),i=e.body.childNodes;for(;i.length>0;)n.appendChild(i[0]);return n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ep extends C(){constructor(t,e){super(),this.model=t,this.mapper=new Kf,this.downcastDispatcher=new Xf({mapper:this.mapper,schema:t.schema}),this.downcastDispatcher.on("insert:$text",hd(),{priority:"lowest"}),this.downcastDispatcher.on("insert",ud(),{priority:"lowest"}),this.upcastDispatcher=new pd({schema:t.schema}),this.viewDocument=new kf(e),this.stylesProcessor=e,this.htmlProcessor=new bd(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Vf(this.viewDocument),this.upcastDispatcher.on("text",dd(),{priority:"lowest"}),this.upcastDispatcher.on("element",zi(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",zi(),{priority:"lowest"}),W().prototype.decorate.call(this,"init"),W().prototype.decorate.call(this,"set"),W().prototype.decorate.call(this,"get"),W().prototype.decorate.call(this,"toView"),W().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},fd)},{priority:"lowest"})}get(t={}){const{rootName:e="main",trim:n="empty"}=t;if(!this._checkIfRootsExists([e]))throw new f("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(e);return i.isAttached()||J("datacontroller-get-detached-root",this),n==="empty"&&!this.model.hasContent(i,{ignoreWhitespaces:!0})?"":this.stringify(i,t)}stringify(t,e={}){const n=this.toView(t,e);return this.processor.toData(n)}toView(t,e={}){const n=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const r=d._createIn(t),o=new zt(n);this.mapper.bindElements(t,o);const a=t.is("documentFragment")?t.markers:yd(t);return this.downcastDispatcher.convert(r,a,i,e),o}init(t){if(this.model.document.version)throw new f("datacontroller-init-document-not-empty",this);let e={};if(typeof t=="string"?e.main=t:e=t,!this._checkIfRootsExists(Object.keys(e)))throw new f("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},n=>{for(const i of Object.keys(e)){const r=this.model.document.getRoot(i);n.insert(this.parse(e[i],r),r,0)}}),Promise.resolve()}set(t,e={}){let n={};if(typeof t=="string"?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new f("datacontroller-set-non-existent-root",this);this.model.enqueueChange(e.batchType||{},i=>{i.setSelection(null),i.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const r of Object.keys(n)){const o=this.model.document.getRoot(r);i.remove(i.createRangeIn(o)),i.insert(this.parse(n[r],o),o,0)}})}parse(t,e="$root"){const n=this.processor.toView(t);return this.toModel(n,e)}toModel(t,e="$root"){return this.model.change(n=>this.upcastDispatcher.convert(t,n,e))}addStyleProcessorRules(t){t(this.stylesProcessor)}registerRawContentMatcher(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}destroy(){this.stopListening()}_checkIfRootsExists(t){for(const e of t)if(!this.model.document.getRoot(e))return!1;return!0}}function yd(s){const t=[],e=s.root.document;if(!e)return new Map;const n=d._createIn(s);for(const i of e.model.markers){const r=i.getRange(),o=r.isCollapsed,a=r.start.isEqual(n.start)||r.end.isEqual(n.end);if(o&&a)t.push([i.name,r]);else{const l=n.getIntersection(r);l&&t.push([i.name,l])}}return t.sort(([i,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(i)}}}),new Map(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nt{constructor(t){this.baseVersion=t,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cn(s,t){const e=vo(t),n=e.reduce((o,a)=>o+a.offsetSize,0),i=s.parent;Ne(s);const r=s.index;return i._insertChild(r,e),Oe(i,r+e.length),Oe(i,r),new d(s,s.getShiftedBy(n))}function Pd(s){if(!s.isFlat)throw new f("operation-utils-remove-range-not-flat",this);const t=s.start.parent;Ne(s.start),Ne(s.end);const e=t._removeChildren(s.start.index,s.end.index-s.start.index);return Oe(t,s.start.index),e}function Ve(s,t){if(!s.isFlat)throw new f("operation-utils-move-range-not-flat",this);const e=Pd(s);return t=t._getTransformedByDeletion(s.start,s.end.offset-s.start.offset),Cn(t,e)}function Td(s,t,e){Ne(s.start),Ne(s.end);for(const n of s.getItems({shallow:!0})){const i=n.is("$textProxy")?n.textNode:n;e!==null?i._setAttribute(t,e):i._removeAttribute(t),Oe(i.parent,i.index)}Oe(s.end.parent,s.end.index)}function vo(s){const t=[];function e(n){if(typeof n=="string")t.push(new N(n));else if(n instanceof ot)t.push(new N(n.data,n.getAttributes()));else if(n instanceof fe)t.push(n);else if(st(n))for(const i of n)e(i)}e(s);for(let n=1;n<t.length;n++){const i=t[n],r=t[n-1];i instanceof N&&r instanceof N&&bo(i,r)&&(t.splice(n-1,2,new N(r.data+i.data,r.getAttributes())),n--)}return t}function Oe(s,t){const e=s.getChild(t-1),n=s.getChild(t);if(e&&n&&e.is("$text")&&n.is("$text")&&bo(e,n)){const i=new N(e.data+n.data,e.getAttributes());s._removeChildren(t-1,2),s._insertChild(t-1,i)}}function Ne(s){const t=s.textNode,e=s.parent;if(t){const n=s.offset-t.startOffset,i=t.index;e._removeChildren(i,1);const r=new N(t.data.substr(0,n),t.getAttributes()),o=new N(t.data.substr(n),t.getAttributes());e._insertChild(i,[r,o])}}function bo(s,t){const e=s.getAttributes(),n=t.getAttributes();for(const i of e){if(i[1]!==t.getAttribute(i[0]))return!1;n.next()}return n.next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R extends nt{constructor(t,e,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[d._createFromPositionAndShift(this.sourcePosition,this.howMany),d._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new R(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new R(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,n=this.sourcePosition.offset,i=this.targetPosition.offset;if(n+this.howMany>t.maxOffset)throw new f("move-operation-nodes-do-not-exist",this);if(t===e&&n<i&&i<n+this.howMany)throw new f("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&G(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=n&&this.targetPosition.path[r]<n+this.howMany)throw new f("move-operation-node-into-itself",this)}}_execute(){Ve(d._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const n=m.fromJSON(t.sourcePosition,e),i=m.fromJSON(t.targetPosition,e);return new this(n,t.howMany,i,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q extends nt{constructor(t,e,n){super(n),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Pe(vo(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new Pe([...this.nodes].map(n=>n._clone(!0))),e=new q(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new m(t,[0]);return new R(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new f("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new Pe([...t].map(e=>e._clone(!0))),Cn(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const n=[];for(const r of t.nodes)r.name?n.push(at.fromJSON(r)):n.push(N.fromJSON(r));const i=new q(m.fromJSON(t.position,e),n,t.baseVersion);return i.shouldReceiveAttributes=t.shouldReceiveAttributes,i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B extends nt{constructor(t,e,n,i,r){super(r),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=n,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new m(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new d(this.splitPosition,t)}get affectedSelectable(){const t=[d._createFromPositionAndShift(this.splitPosition,0),d._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(d._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new B(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new m(t,[0]);return new j(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new f("split-operation-position-invalid",this);if(t.parent){if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new f("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new f("split-operation-graveyard-position-invalid",this)}else throw new f("split-operation-split-in-root",this)}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)Ve(d._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const n=t._clone();Cn(this.insertionPosition,n)}const e=new d(m._createAt(t,this.splitPosition.offset),m._createAt(t,t.maxOffset));Ve(e,this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new m(t.root,e,"toPrevious")}static fromJSON(t,e){const n=m.fromJSON(t.splitPosition,e),i=m.fromJSON(t.insertionPosition,e),r=t.graveyardPosition?m.fromJSON(t.graveyardPosition,e):null;return new this(n,t.howMany,i,r,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j extends nt{constructor(t,e,n,i,r){super(r),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=n.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new m(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new d(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[d._createOn(t),d._createFromPositionAndShift(this.targetPosition,0),d._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new j(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),n=new m(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new B(t,this.howMany,n,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(t.parent)if(e.parent){if(this.howMany!=t.maxOffset)throw new f("merge-operation-how-many-invalid",this)}else throw new f("merge-operation-target-position-invalid",this);else throw new f("merge-operation-source-position-invalid",this)}_execute(){const t=this.sourcePosition.parent,e=d._createIn(t);Ve(e,this.targetPosition),Ve(d._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const n=m.fromJSON(t.sourcePosition,e),i=m.fromJSON(t.targetPosition,e),r=m.fromJSON(t.graveyardPosition,e);return new this(n,t.howMany,i,r,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tt extends nt{constructor(t,e,n,i,r,o){super(o),this.name=t,this.oldRange=e?e.clone():null,this.newRange=n?n.clone():null,this.affectsData=r,this._markers=i}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new tt(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new tt(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new tt(t.name,t.oldRange?d.fromJSON(t.oldRange,e):null,t.newRange?d.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $ extends nt{constructor(t,e,n,i,r){super(r),this.range=t.clone(),this.key=e,this.oldValue=n===void 0?null:n,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new $(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new $(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new f("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!pi(t.getAttribute(this.key),this.oldValue))throw new f("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&t.hasAttribute(this.key))throw new f("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){pi(this.oldValue,this.newValue)||Td(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new $(d.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H extends nt{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new H(this.baseVersion)}getReversed(){return new H(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X extends nt{constructor(t,e,n,i){super(i),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=n}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new X(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new X(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(t instanceof at){if(t.name!==this.oldName)throw new f("rename-operation-wrong-name",this)}else throw new f("rename-operation-wrong-position",this)}_execute(){const t=this.position.nodeAfter;t.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new X(m.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class St extends nt{constructor(t,e,n,i,r){super(r),this.root=t,this.key=e,this.oldValue=n===void 0?null:n,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new St(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new St(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new f("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new f("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new f("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new f("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new St(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class It extends nt{constructor(t,e,n,i,r){if(super(r),this.rootName=t,this.elementName=e,this.isAdd=n,this._document=i,!this._document.getRoot(this.rootName)){const o=this._document.createRoot(this.elementName,this.rootName);o._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new It(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new It(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new It(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ht={};ht[$.className]=$;ht[q.className]=q;ht[tt.className]=tt;ht[R.className]=R;ht[H.className]=H;ht[nt.className]=nt;ht[X.className]=X;ht[St.className]=St;ht[It.className]=It;ht[B.className]=B;ht[j.className]=j;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ui=new Map;function A(s,t,e){let n=Ui.get(s);n||(n=new Map,Ui.set(s,n)),n.set(t,e)}A($,$,(s,t,e)=>{if(s.key===t.key&&s.range.start.hasSameParentAs(t.range.start)){const n=s.range.getDifference(t.range).map(r=>new $(r,s.key,s.oldValue,s.newValue,0)),i=s.range.getIntersection(t.range);return i&&e.aIsStrong&&n.push(new $(i,t.key,t.newValue,s.newValue,0)),n.length==0?[new H(0)]:n}else return[s]});A($,q,(s,t)=>{if(s.range.start.hasSameParentAs(t.position)&&s.range.containsPosition(t.position)){const n=s.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes).map(i=>new $(i,s.key,s.oldValue,s.newValue,s.baseVersion));if(t.shouldReceiveAttributes){const i=yo(t,s.key,s.oldValue);i&&n.unshift(i)}return n}return s.range=s.range._getTransformedByInsertion(t.position,t.howMany,!1)[0],[s]});function yo(s,t,e){const i=s.nodes.getNode(0).getAttribute(t);if(i==e)return null;const r=new d(s.position,s.position.getShiftedBy(s.howMany));return new $(r,t,i,e,0)}A($,j,(s,t)=>{const e=[];s.range.start.hasSameParentAs(t.deletionPosition)&&(s.range.containsPosition(t.deletionPosition)||s.range.start.isEqual(t.deletionPosition))&&e.push(d._createFromPositionAndShift(t.graveyardPosition,1));const n=s.range._getTransformedByMergeOperation(t);return n.isCollapsed||e.push(n),e.map(i=>new $(i,s.key,s.oldValue,s.newValue,s.baseVersion))});A($,R,(s,t)=>xd(s.range,t).map(n=>new $(n,s.key,s.oldValue,s.newValue,s.baseVersion)));function xd(s,t){const e=d._createFromPositionAndShift(t.sourcePosition,t.howMany);let n=null,i=[];e.containsRange(s,!0)?n=s:s.start.hasSameParentAs(e.start)?(i=s.getDifference(e),n=s.getIntersection(e)):i=[s];const r=[];for(let o of i){o=o._getTransformedByDeletion(t.sourcePosition,t.howMany);const a=t.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,t.howMany,l);r.push(...c)}return n&&r.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,!1)[0]),r}A($,B,(s,t)=>{if(s.range.end.isEqual(t.insertionPosition))return t.graveyardPosition||s.range.end.offset++,[s];if(s.range.start.hasSameParentAs(t.splitPosition)&&s.range.containsPosition(t.splitPosition)){const e=s.clone();return e.range=new d(t.moveTargetPosition.clone(),s.range.end._getCombined(t.splitPosition,t.moveTargetPosition)),s.range.end=t.splitPosition.clone(),s.range.end.stickiness="toPrevious",[s,e]}return s.range=s.range._getTransformedBySplitOperation(t),[s]});A(q,$,(s,t)=>{const e=[s];if(s.shouldReceiveAttributes&&s.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(s.position)){const n=yo(s,t.key,t.newValue);n&&e.push(n)}return e});A(q,q,(s,t,e)=>s.position.isEqual(t.position)&&e.aIsStrong?[s]:(s.position=s.position._getTransformedByInsertOperation(t),[s]));A(q,R,(s,t)=>(s.position=s.position._getTransformedByMoveOperation(t),[s]));A(q,B,(s,t)=>(s.position=s.position._getTransformedBySplitOperation(t),[s]));A(q,j,(s,t)=>(s.position=s.position._getTransformedByMergeOperation(t),[s]));A(tt,q,(s,t)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByInsertOperation(t)[0]),s.newRange&&(s.newRange=s.newRange._getTransformedByInsertOperation(t)[0]),[s]));A(tt,tt,(s,t,e)=>{if(s.name==t.name)if(e.aIsStrong)s.oldRange=t.newRange?t.newRange.clone():null;else return[new H(0)];return[s]});A(tt,j,(s,t)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByMergeOperation(t)),s.newRange&&(s.newRange=s.newRange._getTransformedByMergeOperation(t)),[s]));A(tt,R,(s,t,e)=>{if(s.oldRange&&(s.oldRange=d._createFromRanges(s.oldRange._getTransformedByMoveOperation(t))),s.newRange){if(e.abRelation){const n=d._createFromRanges(s.newRange._getTransformedByMoveOperation(t));if(e.abRelation.side=="left"&&t.targetPosition.isEqual(s.newRange.start))return s.newRange.end=n.end,s.newRange.start.path=e.abRelation.path,[s];if(e.abRelation.side=="right"&&t.targetPosition.isEqual(s.newRange.end))return s.newRange.start=n.start,s.newRange.end.path=e.abRelation.path,[s]}s.newRange=d._createFromRanges(s.newRange._getTransformedByMoveOperation(t))}return[s]});A(tt,B,(s,t,e)=>{if(s.oldRange&&(s.oldRange=s.oldRange._getTransformedBySplitOperation(t)),s.newRange){if(e.abRelation){const n=s.newRange._getTransformedBySplitOperation(t);return s.newRange.start.isEqual(t.splitPosition)&&e.abRelation.wasStartBeforeMergedElement?s.newRange.start=m._createAt(t.insertionPosition):s.newRange.start.isEqual(t.splitPosition)&&!e.abRelation.wasInLeftElement&&(s.newRange.start=m._createAt(t.moveTargetPosition)),s.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasInRightElement?s.newRange.end=m._createAt(t.moveTargetPosition):s.newRange.end.isEqual(t.splitPosition)&&e.abRelation.wasEndBeforeMergedElement?s.newRange.end=m._createAt(t.insertionPosition):s.newRange.end=n.end,[s]}s.newRange=s.newRange._getTransformedBySplitOperation(t)}return[s]});A(j,q,(s,t)=>(s.sourcePosition.hasSameParentAs(t.position)&&(s.howMany+=t.howMany),s.sourcePosition=s.sourcePosition._getTransformedByInsertOperation(t),s.targetPosition=s.targetPosition._getTransformedByInsertOperation(t),[s]));A(j,j,(s,t,e)=>{if(s.sourcePosition.isEqual(t.sourcePosition)&&s.targetPosition.isEqual(t.targetPosition))if(e.bWasUndone){const n=t.graveyardPosition.path.slice();return n.push(0),s.sourcePosition=new m(t.graveyardPosition.root,n),s.howMany=0,[s]}else return[new H(0)];if(s.sourcePosition.isEqual(t.sourcePosition)&&!s.targetPosition.isEqual(t.targetPosition)&&!e.bWasUndone&&e.abRelation!="splitAtSource"){const n=s.targetPosition.root.rootName=="$graveyard",i=t.targetPosition.root.rootName=="$graveyard";if(i&&!n||!(n&&!i)&&e.aIsStrong){const l=t.targetPosition._getTransformedByMergeOperation(t),c=s.targetPosition._getTransformedByMergeOperation(t);return[new R(l,s.howMany,c,0)]}else return[new H(0)]}return s.sourcePosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.sourcePosition=s.sourcePosition._getTransformedByMergeOperation(t),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),(!s.graveyardPosition.isEqual(t.graveyardPosition)||!e.aIsStrong)&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(t)),[s]});A(j,R,(s,t,e)=>{const n=d._createFromPositionAndShift(t.sourcePosition,t.howMany);return t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&s.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(s.sourcePosition)?[new H(0)]:(t.sourcePosition.getShiftedBy(t.howMany).isEqual(s.sourcePosition)?s.sourcePosition.stickiness="toNone":t.targetPosition.isEqual(s.sourcePosition)&&e.abRelation=="mergeSourceAffected"?s.sourcePosition.stickiness="toNext":t.sourcePosition.isEqual(s.targetPosition)?(s.targetPosition.stickiness="toNone",s.howMany-=t.howMany):t.targetPosition.isEqual(s.targetPosition)&&e.abRelation=="mergeTargetWasBefore"?(s.targetPosition.stickiness="toPrevious",s.howMany+=t.howMany):(s.sourcePosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.sourcePosition.hasSameParentAs(t.sourcePosition)&&(s.howMany-=t.howMany)),s.sourcePosition=s.sourcePosition._getTransformedByMoveOperation(t),s.targetPosition=s.targetPosition._getTransformedByMoveOperation(t),s.sourcePosition.stickiness="toPrevious",s.targetPosition.stickiness="toNext",s.graveyardPosition.isEqual(t.targetPosition)||(s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(t)),[s])});A(j,B,(s,t,e)=>{if(t.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1),s.deletionPosition.isEqual(t.graveyardPosition)&&(s.howMany=t.howMany)),s.targetPosition.isEqual(t.splitPosition)){const n=t.howMany!=0,i=t.graveyardPosition&&s.deletionPosition.isEqual(t.graveyardPosition);if(n||i||e.abRelation=="mergeTargetNotMoved")return s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(t),[s]}if(s.sourcePosition.isEqual(t.splitPosition)){if(e.abRelation=="mergeSourceNotMoved")return s.howMany=0,s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s];if(e.abRelation=="mergeSameElement"||s.sourcePosition.offset>0)return s.sourcePosition=t.moveTargetPosition.clone(),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s]}return s.sourcePosition.hasSameParentAs(t.splitPosition)&&(s.howMany=t.splitPosition.offset),s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(t),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(t),[s]});A(R,q,(s,t)=>{const n=d._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByInsertOperation(t,!1)[0];return s.sourcePosition=n.start,s.howMany=n.end.offset-n.start.offset,s.targetPosition.isEqual(t.position)||(s.targetPosition=s.targetPosition._getTransformedByInsertOperation(t)),[s]});A(R,R,(s,t,e)=>{const n=d._createFromPositionAndShift(s.sourcePosition,s.howMany),i=d._createFromPositionAndShift(t.sourcePosition,t.howMany);let r=e.aIsStrong,o=!e.aIsStrong;e.abRelation=="insertBefore"||e.baRelation=="insertAfter"?o=!0:(e.abRelation=="insertAfter"||e.baRelation=="insertBefore")&&(o=!1);let a;if(s.targetPosition.isEqual(t.targetPosition)&&o?a=s.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany):a=s.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),Wi(s,t)&&Wi(t,s))return[t.getReversed()];if(n.containsPosition(t.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),oe([n],a);if(i.containsPosition(s.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),oe([n],a);const h=G(s.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany),oe([n],a);s.type=="remove"&&t.type!="remove"&&!e.aWasUndone&&!e.forceWeakRemove?r=!0:s.type!="remove"&&t.type=="remove"&&!e.bWasUndone&&!e.forceWeakRemove&&(r=!1);const u=[],g=n.getDifference(i);for(const y of g){y.start=y.start._getTransformedByDeletion(t.sourcePosition,t.howMany),y.end=y.end._getTransformedByDeletion(t.sourcePosition,t.howMany);const E=G(y.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same",k=y._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,E);u.push(...k)}const p=n.getIntersection(i);return p!==null&&r&&(p.start=p.start._getCombined(t.sourcePosition,t.getMovedRangeStart()),p.end=p.end._getCombined(t.sourcePosition,t.getMovedRangeStart()),u.length===0?u.push(p):u.length==1?i.start.isBefore(n.start)||i.start.isEqual(n.start)?u.unshift(p):u.push(p):u.splice(1,0,p)),u.length===0?[new H(s.baseVersion)]:oe(u,a)});A(R,B,(s,t,e)=>{let n=s.targetPosition.clone();(!s.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||e.abRelation=="moveTargetAfter")&&(n=s.targetPosition._getTransformedBySplitOperation(t));const i=d._createFromPositionAndShift(s.sourcePosition,s.howMany);if(i.end.isEqual(t.insertionPosition))return t.graveyardPosition||s.howMany++,s.targetPosition=n,[s];if(i.start.hasSameParentAs(t.splitPosition)&&i.containsPosition(t.splitPosition)){let a=new d(t.splitPosition,i.end);a=a._getTransformedBySplitOperation(t);const l=[new d(i.start,t.splitPosition),a];return oe(l,n)}s.targetPosition.isEqual(t.splitPosition)&&e.abRelation=="insertAtSource"&&(n=t.moveTargetPosition),s.targetPosition.isEqual(t.insertionPosition)&&e.abRelation=="insertBetween"&&(n=s.targetPosition);const o=[i._getTransformedBySplitOperation(t)];if(t.graveyardPosition){const a=i.start.isEqual(t.graveyardPosition)||i.containsPosition(t.graveyardPosition);s.howMany>1&&a&&!e.aWasUndone&&o.push(d._createFromPositionAndShift(t.insertionPosition,1))}return oe(o,n)});A(R,j,(s,t,e)=>{const n=d._createFromPositionAndShift(s.sourcePosition,s.howMany);if(t.deletionPosition.hasSameParentAs(s.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(s.type=="remove"&&!e.forceWeakRemove){if(!e.aWasUndone){const o=[];let a=t.graveyardPosition.clone(),l=t.targetPosition._getTransformedByMergeOperation(t);s.howMany>1&&(o.push(new R(s.sourcePosition,s.howMany-1,s.targetPosition,0)),a=a._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany-1),l=l._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany-1));const c=t.deletionPosition._getCombined(s.sourcePosition,s.targetPosition),h=new R(a,1,c,0),u=h.getMovedRangeStart().path.slice();u.push(0);const g=new m(h.targetPosition.root,u);l=l._getTransformedByMove(a,c,1);const p=new R(l,t.howMany,g,0);return o.push(h),o.push(p),o}}else if(s.howMany==1)return e.bWasUndone?(s.sourcePosition=t.graveyardPosition.clone(),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),[s]):[new H(0)]}const r=d._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByMergeOperation(t);return s.sourcePosition=r.start,s.howMany=r.end.offset-r.start.offset,s.targetPosition=s.targetPosition._getTransformedByMergeOperation(t),[s]});A(X,q,(s,t)=>(s.position=s.position._getTransformedByInsertOperation(t),[s]));A(X,j,(s,t)=>s.position.isEqual(t.deletionPosition)?(s.position=t.graveyardPosition.clone(),s.position.stickiness="toNext",[s]):(s.position=s.position._getTransformedByMergeOperation(t),[s]));A(X,R,(s,t)=>(s.position=s.position._getTransformedByMoveOperation(t),[s]));A(X,X,(s,t,e)=>{if(s.position.isEqual(t.position))if(e.aIsStrong)s.oldName=t.newName;else return[new H(0)];return[s]});A(X,B,(s,t)=>{const e=s.position.path,n=t.splitPosition.getParentPath();if(G(e,n)=="same"&&!t.graveyardPosition){const i=new X(s.position.getShiftedBy(1),s.oldName,s.newName,0);return[s,i]}return s.position=s.position._getTransformedBySplitOperation(t),[s]});A(St,St,(s,t,e)=>{if(s.root===t.root&&s.key===t.key){if(!e.aIsStrong||s.newValue===t.newValue)return[new H(0)];s.oldValue=t.newValue}return[s]});A(It,It,(s,t)=>s.rootName===t.rootName&&s.isAdd===t.isAdd?[new H(0)]:[s]);A(B,q,(s,t)=>(s.splitPosition.hasSameParentAs(t.position)&&s.splitPosition.offset<t.position.offset&&(s.howMany+=t.howMany),s.splitPosition=s.splitPosition._getTransformedByInsertOperation(t),s.insertionPosition=s.insertionPosition._getTransformedByInsertOperation(t),[s]));A(B,j,(s,t,e)=>{if(!s.graveyardPosition&&!e.bWasUndone&&s.splitPosition.hasSameParentAs(t.sourcePosition)){const n=t.graveyardPosition.path.slice();n.push(0);const i=new m(t.graveyardPosition.root,n),r=B.getInsertionPosition(new m(t.graveyardPosition.root,n)),o=new B(i,0,r,null,0);return s.splitPosition=s.splitPosition._getTransformedByMergeOperation(t),s.insertionPosition=B.getInsertionPosition(s.splitPosition),s.graveyardPosition=o.insertionPosition.clone(),s.graveyardPosition.stickiness="toNext",[o,s]}return s.splitPosition.hasSameParentAs(t.deletionPosition)&&!s.splitPosition.isAfter(t.deletionPosition)&&s.howMany--,s.splitPosition.hasSameParentAs(t.targetPosition)&&(s.howMany+=t.howMany),s.splitPosition=s.splitPosition._getTransformedByMergeOperation(t),s.insertionPosition=B.getInsertionPosition(s.splitPosition),s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(t)),[s]});A(B,R,(s,t,e)=>{const n=d._createFromPositionAndShift(t.sourcePosition,t.howMany);if(s.graveyardPosition){const r=n.start.isEqual(s.graveyardPosition)||n.containsPosition(s.graveyardPosition);if(!e.bWasUndone&&r){const o=s.splitPosition._getTransformedByMoveOperation(t),a=s.graveyardPosition._getTransformedByMoveOperation(t),l=a.path.slice();l.push(0);const c=new m(a.root,l);return[new R(o,s.howMany,c,0)]}s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(t)}const i=s.splitPosition.isEqual(t.targetPosition);if(i&&(e.baRelation=="insertAtSource"||e.abRelation=="splitBefore"))return s.howMany+=t.howMany,s.splitPosition=s.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany),s.insertionPosition=B.getInsertionPosition(s.splitPosition),[s];if(i&&e.abRelation&&e.abRelation.howMany){const{howMany:r,offset:o}=e.abRelation;return s.howMany+=r,s.splitPosition=s.splitPosition.getShiftedBy(o),[s]}if(s.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(s.splitPosition)){const r=t.howMany-(s.splitPosition.offset-t.sourcePosition.offset);return s.howMany-=r,s.splitPosition.hasSameParentAs(t.targetPosition)&&s.splitPosition.offset<t.targetPosition.offset&&(s.howMany+=t.howMany),s.splitPosition=t.sourcePosition.clone(),s.insertionPosition=B.getInsertionPosition(s.splitPosition),[s]}return t.sourcePosition.isEqual(t.targetPosition)||(s.splitPosition.hasSameParentAs(t.sourcePosition)&&s.splitPosition.offset<=t.sourcePosition.offset&&(s.howMany-=t.howMany),s.splitPosition.hasSameParentAs(t.targetPosition)&&s.splitPosition.offset<t.targetPosition.offset&&(s.howMany+=t.howMany)),s.splitPosition.stickiness="toNone",s.splitPosition=s.splitPosition._getTransformedByMoveOperation(t),s.splitPosition.stickiness="toNext",s.graveyardPosition?s.insertionPosition=s.insertionPosition._getTransformedByMoveOperation(t):s.insertionPosition=B.getInsertionPosition(s.splitPosition),[s]});A(B,B,(s,t,e)=>{if(s.splitPosition.isEqual(t.splitPosition)){if(!s.graveyardPosition&&!t.graveyardPosition)return[new H(0)];if(s.graveyardPosition&&t.graveyardPosition&&s.graveyardPosition.isEqual(t.graveyardPosition))return[new H(0)];if(e.abRelation=="splitBefore")return s.howMany=0,s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(t),[s]}if(s.graveyardPosition&&t.graveyardPosition&&s.graveyardPosition.isEqual(t.graveyardPosition)){const n=s.splitPosition.root.rootName=="$graveyard",i=t.splitPosition.root.rootName=="$graveyard";if(i&&!n||!(n&&!i)&&e.aIsStrong){const l=[];return t.howMany&&l.push(new R(t.moveTargetPosition,t.howMany,t.splitPosition,0)),s.howMany&&l.push(new R(s.splitPosition,s.howMany,s.moveTargetPosition,0)),l}else return[new H(0)]}if(s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(t)),s.splitPosition.isEqual(t.insertionPosition)&&e.abRelation=="splitBefore")return s.howMany++,[s];if(t.splitPosition.isEqual(s.insertionPosition)&&e.baRelation=="splitBefore"){const n=t.insertionPosition.path.slice();n.push(0);const i=new m(t.insertionPosition.root,n),r=new R(s.insertionPosition,1,i,0);return[s,r]}return s.splitPosition.hasSameParentAs(t.splitPosition)&&s.splitPosition.offset<t.splitPosition.offset&&(s.howMany-=t.howMany),s.splitPosition=s.splitPosition._getTransformedBySplitOperation(t),s.insertionPosition=B.getInsertionPosition(s.splitPosition),[s]});function Wi(s,t){return s.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null}function oe(s,t){const e=[];for(let n=0;n<s.length;n++){const i=s[n],r=new R(i.start,i.end.offset-i.start.offset,t,0);e.push(r);for(let o=n+1;o<s.length;o++)s[o]=s[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];t=t._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ad extends C(m){constructor(t,e,n="toNone"){if(super(t,e,n),!this.root.is("rootElement"))throw new f("model-liveposition-root-not-rootelement",t);Ed.call(this)}detach(){this.stopListening()}toPosition(){return new m(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}Ad.prototype.is=function(s){return s==="livePosition"||s==="model:livePosition"||s=="position"||s==="model:position"};function Ed(){this.listenTo(this.root.document.model,"applyOperation",(s,t)=>{const e=t[0];e.isDocumentOperation&&kd.call(this,e)},{priority:"low"})}function kd(s){const t=this.getTransformedByOperation(s);if(!this.isEqual(t)){const e=this.toPosition();this.path=t.path,this.root=t.root,this.fire("change",e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cd{constructor(t){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=t}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(t){const e=t;switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const n of e.range.getItems({shallow:!0}))this._isInInsertedElement(n.parent)||this._markAttribute(n);break}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;const n=this._isInInsertedElement(e.sourcePosition.parent),i=this._isInInsertedElement(e.targetPosition.parent);n||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),i||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break}case"rename":{if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);const n=d._createFromPositionAndShift(e.position,1);for(const i of this._markerCollection.getMarkersIntersectingRange(n)){const r=i.getData();this.bufferMarkerChange(i.name,r,r)}break}case"split":{const n=e.splitPosition.parent;this._isInInsertedElement(n)||this._markRemove(n,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break}case"merge":{const n=e.sourcePosition.parent;this._isInInsertedElement(n.parent)||this._markRemove(n.parent,n.startOffset,1);const i=e.graveyardPosition.parent;this._markInsert(i,e.graveyardPosition.offset,1);const r=e.targetPosition.parent;this._isInInsertedElement(r)||this._markInsert(r,e.targetPosition.offset,n.maxOffset);break}case"detachRoot":case"addRoot":{const n=e.affectedSelectable;if(!n._isLoaded||n.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!e.root._isLoaded)return;const n=e.root.rootName;this._bufferRootAttributeChange(n,e.key,e.oldValue,e.newValue);break}}this._cachedChanges=null}bufferMarkerChange(t,e,n){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null);let i=this._changedMarkers.get(t);i?i.newMarkerData=n:(i={newMarkerData:n,oldMarkerData:e},this._changedMarkers.set(t,i)),i.oldMarkerData.range==null&&n.range==null&&this._changedMarkers.delete(t)}getMarkersToRemove(){const t=[];for(const[e,n]of this._changedMarkers)n.oldMarkerData.range!=null&&t.push({name:e,range:n.oldMarkerData.range});return t}getMarkersToAdd(){const t=[];for(const[e,n]of this._changedMarkers)n.newMarkerData.range!=null&&t.push({name:e,range:n.newMarkerData.range});return t}getChangedMarkers(){return Array.from(this._changedMarkers).map(([t,e])=>({name:t,data:{oldRange:e.oldMarkerData.range,newRange:e.newMarkerData.range}}))}hasDataChanges(){if(this._changesInElement.size>0||this._changedRoots.size>0)return!0;for(const{newMarkerData:t,oldMarkerData:e}of this._changedMarkers.values()){if(t.affectsData!==e.affectsData)return!0;if(t.affectsData){const n=t.range&&!e.range,i=!t.range&&e.range,r=t.range&&e.range&&!t.range.isEqual(e.range);if(n||i||r)return!0}}return!1}getChanges(t={}){if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let e=[];for(const n of this._changesInElement.keys()){const i=this._changesInElement.get(n).sort((h,u)=>h.offset===u.offset?h.type!=u.type?h.type=="remove"?-1:1:0:h.offset<u.offset?-1:1),r=this._elementSnapshots.get(n),o=qi(n.getChildren()),a=Md(r.length,i);let l=0,c=0;for(const h of a)if(h==="i")e.push(this._getInsertDiff(n,l,o[l])),l++;else if(h==="r")e.push(this._getRemoveDiff(n,l,r[c])),c++;else if(h==="a"){const u=o[l].attributes,g=r[c].attributes;let p;if(o[l].name=="$text")p=new d(m._createAt(n,l),m._createAt(n,l+1));else{const y=n.offsetToIndex(l);p=new d(m._createAt(n,l),m._createAt(n.getChild(y),0))}e.push(...this._getAttributesDiff(p,g,u)),l++,c++}else l++,c++}e.sort((n,i)=>n.position.root!=i.position.root?n.position.root.rootName<i.position.root.rootName?-1:1:n.position.isEqual(i.position)?n.changeCount-i.changeCount:n.position.isBefore(i.position)?-1:1);for(let n=1,i=0;n<e.length;n++){const r=e[i],o=e[n],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),l=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,c=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||l||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),e[n]=null):i=n}e=e.filter(n=>n);for(const n of e)delete n.changeCount,n.type=="attribute"&&(delete n.position,delete n.length);return this._changeCount=0,this._cachedChangesWithGraveyard=e,this._cachedChanges=e.filter(Sd),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(t=>{const e={...t};return e.state!==void 0&&delete e.attributes,e})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(t,e){if(!this._changedRoots.has(t)){this._changedRoots.set(t,{name:t,state:e?"attached":"detached"});return}const n=this._changedRoots.get(t);n.state!==void 0?(delete n.state,n.attributes===void 0&&this._changedRoots.delete(t)):n.state=e?"attached":"detached"}_bufferRootAttributeChange(t,e,n,i){const r=this._changedRoots.get(t)||{name:t},o=r.attributes||{};if(o[e]){const a=o[e];i===a.oldValue?delete o[e]:a.newValue=i}else o[e]={oldValue:n,newValue:i};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(t)):(r.attributes=o,this._changedRoots.set(t,r))}_refreshItem(t){if(this._isInInsertedElement(t.parent))return;this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t);const e=d._createOn(t);for(const n of this._markerCollection.getMarkersIntersectingRange(e)){const i=n.getData();this.bufferMarkerChange(n.name,i,i)}this._cachedChanges=null}_bufferRootLoad(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);for(const e of t.getAttributeKeys())this._bufferRootAttributeChange(t.rootName,e,null,t.getAttribute(e));for(const e of this._markerCollection)if(e.getRange().root==t){const n=e.getData();this.bufferMarkerChange(e.name,{...n,range:null},n)}}}_markInsert(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"insert",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i)}_markRemove(t,e,n){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const i={type:"remove",offset:e,howMany:n,count:this._changeCount++};this._markChange(t,i),this._removeAllNestedChanges(t,e,n)}_markAttribute(t){if(t.root.is("rootElement")&&!t.root._isLoaded)return;const e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}_markChange(t,e){this._makeSnapshot(t);const n=this._getChangesForElement(t);this._handleChange(e,n),n.push(e);for(let i=0;i<n.length;i++)n[i].howMany<1&&(n.splice(i,1),i--)}_getChangesForElement(t){let e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}_makeSnapshot(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,qi(t.getChildren()))}_handleChange(t,e){t.nodesToHandle=t.howMany;for(const n of e){const i=t.offset+t.howMany,r=n.offset+n.howMany;if(t.type=="insert"&&(n.type=="insert"&&(t.offset<=n.offset?n.offset+=t.howMany:t.offset<r&&(n.howMany+=t.nodesToHandle,t.nodesToHandle=0)),n.type=="remove"&&t.offset<n.offset&&(n.offset+=t.howMany),n.type=="attribute")){if(t.offset<=n.offset)n.offset+=t.howMany;else if(t.offset<r){const o=n.howMany;n.howMany=t.offset-n.offset,e.unshift({type:"attribute",offset:i,howMany:o-n.howMany,count:this._changeCount++})}}if(t.type=="remove"){if(n.type=="insert"){if(i<=n.offset)n.offset-=t.howMany;else if(i<=r)if(t.offset<n.offset){const o=i-n.offset;n.offset=t.offset,n.howMany-=o,t.nodesToHandle-=o}else n.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=n.offset)t.nodesToHandle-=n.howMany,n.howMany=0;else if(t.offset<r){const o=r-t.offset;n.howMany-=o,t.nodesToHandle-=o}}if(n.type=="remove"&&(i<=n.offset?n.offset-=t.howMany:t.offset<n.offset&&(t.nodesToHandle+=n.howMany,n.howMany=0)),n.type=="attribute"){if(i<=n.offset)n.offset-=t.howMany;else if(t.offset<n.offset){const o=i-n.offset;n.offset=t.offset,n.howMany-=o}else if(t.offset<r)if(i<=r){const o=n.howMany;n.howMany=t.offset-n.offset;const a=o-n.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:a,count:this._changeCount++})}else n.howMany-=r-t.offset}}if(t.type=="attribute"){if(n.type=="insert")if(t.offset<n.offset&&i>n.offset){if(i>r){const o={type:"attribute",offset:r,howMany:i-r,count:this._changeCount++};this._handleChange(o,e),e.push(o)}t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=n.offset&&t.offset<r&&(i>r?(t.nodesToHandle=i-r,t.offset=r):t.nodesToHandle=0);if(n.type=="remove"&&t.offset<n.offset&&i>n.offset){const o={type:"attribute",offset:n.offset,howMany:i-n.offset,count:this._changeCount++};this._handleChange(o,e),e.push(o),t.nodesToHandle=n.offset-t.offset,t.howMany=t.nodesToHandle}n.type=="attribute"&&(t.offset>=n.offset&&i<=r?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=n.offset&&i>=r&&(n.howMany=0))}}t.howMany=t.nodesToHandle,delete t.nodesToHandle}_getInsertDiff(t,e,n){return{type:"insert",position:m._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++,_element:n.element}}_getRemoveDiff(t,e,n){return{type:"remove",position:m._createAt(t,e),name:n.name,attributes:new Map(n.attributes),length:1,changeCount:this._changeCount++,_element:n.element}}_getAttributesDiff(t,e,n){const i=[];n=new Map(n);for(const[r,o]of e){const a=n.has(r)?n.get(r):null;a!==o&&i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),n.delete(r)}for(const[r,o]of n)i.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return i}_isInInsertedElement(t){const e=t.parent;if(!e)return!1;const n=this._changesInElement.get(e),i=t.startOffset;if(n){for(const r of n)if(r.type=="insert"&&i>=r.offset&&i<r.offset+r.howMany)return!0}return this._isInInsertedElement(e)}_removeAllNestedChanges(t,e,n){const i=new d(m._createAt(t,e),m._createAt(t,e+n));for(const r of i.getItems({shallow:!0}))r.is("element")&&(this._elementSnapshots.delete(r),this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}}function qi(s){const t=[];for(const e of s)if(e.is("$text"))for(let n=0;n<e.data.length;n++)t.push({name:"$text",attributes:new Map(e.getAttributes())});else t.push({name:e.name,attributes:new Map(e.getAttributes()),element:e});return t}function Md(s,t){const e=[];let n=0,i=0;for(const r of t){if(r.offset>n){for(let o=0;o<r.offset-n;o++)e.push("e");i+=r.offset-n}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)e.push("i");n=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)e.push("r");n=r.offset,i+=r.howMany}else e.push(..."a".repeat(r.howMany).split("")),n=r.offset+r.howMany,i+=r.howMany}if(i<s)for(let r=0;r<s-i-n;r++)e.push("e");return e}function Sd(s){const t="position"in s&&s.position.root.rootName=="$graveyard",e="range"in s&&s.range.root.rootName=="$graveyard";return!t&&!e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Id{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(t){if(t.baseVersion!==this.version)throw new f("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}getOperations(t,e=this.version){if(!this._operations.length)return[];const n=this._operations[0];t===void 0&&(t=n.baseVersion);let i=e-1;for(const[a,l]of this._gaps)t>a&&t<l&&(t=l),i>a&&i<l&&(i=a-1);if(i<n.baseVersion||t>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(t);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(i);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(t){const e=this._baseVersionToOperationIndex.get(t);if(e!==void 0)return this._operations[e]}setOperationAsUndone(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}isUndoingOperation(t){return this._undoPairs.has(t)}isUndoneOperation(t){return this._undoneOperations.has(t)}getUndoneOperation(t){return this._undoPairs.get(t)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Po extends at{constructor(t,e,n="main"){super(e),this._isAttached=!0,this._isLoaded=!0,this._document=t,this.rootName=n}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}Po.prototype.is=function(s,t){return t?t===this.name&&(s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"):s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"||s==="node"||s==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zi="$graveyard";class kp extends C(){constructor(t){super(),this.model=t,this.history=new Id,this.selection=new po(this),this.roots=new Kt({idProperty:"rootName"}),this.differ=new Cd(t.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",Zi),this.listenTo(t,"applyOperation",(e,n)=>{const i=n[0];i.isDocumentOperation&&this.differ.bufferOperation(i)},{priority:"high"}),this.listenTo(t,"applyOperation",(e,n)=>{const i=n[0];i.isDocumentOperation&&this.history.addOperation(i)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(t.markers,"update",(e,n,i,r,o)=>{const a={...n.getData(),range:r};this.differ.bufferMarkerChange(n.name,o,a),i===null&&n.on("change",(l,c)=>{const h=n.getData();this.differ.bufferMarkerChange(n.name,{...h,range:c},h)})}),this.registerPostFixer(e=>{let n=!1;for(const i of this.roots)!i.isAttached()&&!i.isEmpty&&(e.remove(e.createRangeIn(i)),n=!0);for(const i of this.model.markers)i.getRange().root.isAttached()||(e.removeMarker(i),n=!0);return n})}get version(){return this.history.version}set version(t){this.history.version=t}get graveyard(){return this.getRoot(Zi)}createRoot(t="$root",e="main"){if(this.roots.get(e))throw new f("model-document-createroot-name-exists",this,{name:e});const n=new Po(this,t,e);return this.roots.add(n),n}destroy(){this.selection.destroy(),this.stopListening()}getRoot(t="main"){return this.roots.get(t)}getRootNames(t=!1){return this.getRoots(t).map(e=>e.rootName)}getRoots(t=!1){return this.roots.filter(e=>e!=this.graveyard&&(t||e.isAttached())&&e._isLoaded)}registerPostFixer(t){this._postFixers.add(t)}toJSON(){const t=Hr(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}_handleChangeBlock(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const t=this.getRoots();return t.length?t[0]:this.graveyard}_getDefaultRange(){const t=this._getDefaultRoot(),e=this.model,n=e.schema,i=e.createPositionFromPath(t,[0]);return n.getNearestSelectionRange(i)||e.createRange(i)}_validateSelectionRange(t){return ji(t.start)&&ji(t.end)}_callPostFixers(t){let e=!1;do for(const n of this._postFixers)if(this.selection.refresh(),e=n(t),e)break;while(e)}}function ji(s){const t=s.textNode;if(t){const e=t.data,n=s.offset-t.startOffset;return!af(e,n)&&!lf(e,n)}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cp extends C(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(t){const e=t instanceof re?t.name:t;return this._markers.has(e)}get(t){return this._markers.get(t)||null}_set(t,e,n=!1,i=!1){const r=t instanceof re?t.name:t;if(r.includes(","))throw new f("markercollection-incorrect-marker-name",this);const o=this._markers.get(r);if(o){const c=o.getData(),h=o.getRange();let u=!1;return h.isEqual(e)||(o._attachLiveRange(ce.fromRange(e)),u=!0),n!=o.managedUsingOperations&&(o._managedUsingOperations=n,u=!0),typeof i=="boolean"&&i!=o.affectsData&&(o._affectsData=i,u=!0),u&&this.fire(`update:${r}`,o,h,e,c),o}const a=ce.fromRange(e),l=new re(r,a,n,i);return this._markers.set(r,l),this.fire(`update:${r}`,l,null,e,{...l.getData(),range:null}),l}_remove(t){const e=t instanceof re?t.name:t,n=this._markers.get(e);return n?(this._markers.delete(e),this.fire(`update:${e}`,n,n.getRange(),null,n.getData()),this._destroyMarker(n),!0):!1}_refresh(t){const e=t instanceof re?t.name:t,n=this._markers.get(e);if(!n)throw new f("markercollection-refresh-marker-not-exists",this);const i=n.getRange();this.fire(`update:${e}`,n,i,i,n.getData())}*getMarkersAtPosition(t){for(const e of this)e.getRange().containsPosition(t)&&(yield e)}*getMarkersIntersectingRange(t){for(const e of this)e.getRange().getIntersection(t)!==null&&(yield e)}destroy(){for(const t of this._markers.values())this._destroyMarker(t);this._markers=null,this.stopListening()}*getMarkersGroup(t){for(const e of this._markers.values())e.name.startsWith(t+":")&&(yield e)}_destroyMarker(t){t.stopListening(),t._detachLiveRange()}}class re extends C(Ot){constructor(t,e,n,i){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=n,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new f("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}re.prototype.is=function(s){return s==="marker"||s==="model:marker"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mn extends Ot{constructor(t){super(),this.markers=new Map,this._children=new Pe,t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const n of t)e=e.getChild(e.offsetToIndex(n));return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const n of t)n.name?e.push(at.fromJSON(n)):e.push(N.fromJSON(n));return new Mn(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const n=Rd(e);for(const i of n)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(t,n)}_removeChildren(t,e=1){const n=this._children._removeNodes(t,e);for(const i of n)i.parent=null;return n}}Mn.prototype.is=function(s){return s==="documentFragment"||s==="model:documentFragment"};function Rd(s){return typeof s=="string"?[new N(s)]:(st(s)||(s=[s]),Array.from(s).map(t=>typeof t=="string"?new N(t):t instanceof ot?new N(t.data,t.getAttributes()):t))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vd{constructor(t){this.document=t}createDocumentFragment(t){return new zt(this.document,t)}createElement(t,e,n){return new lt(this.document,t,e,n)}createText(t){return new D(this.document,t)}clone(t,e=!1){return t._clone(e)}appendChild(t,e){return e._appendChild(t)}insertChild(t,e,n){return n._insertChild(t,e)}removeChildren(t,e,n){return n._removeChildren(t,e)}remove(t){const e=t.parent;return e?this.removeChildren(e.getChildIndex(t),1,e):[]}replace(t,e){const n=t.parent;if(n){const i=n.getChildIndex(t);return this.removeChildren(i,1,n),this.insertChild(i,e,n),!0}return!1}unwrapElement(t){const e=t.parent;if(e){const n=e.getChildIndex(t);this.remove(t),this.insertChild(n,t.getChildren(),e)}}rename(t,e){const n=new lt(this.document,t,e.getAttributes(),e.getChildren());return this.replace(e,n)?n:null}setAttribute(t,e,n){n._setAttribute(t,e)}removeAttribute(t,e){e._removeAttribute(t)}addClass(t,e){e._addClass(t)}removeClass(t,e){e._removeClass(t)}setStyle(t,e,n){qt(t)&&n===void 0?e._setStyle(t):n._setStyle(t,e)}removeStyle(t,e){e._removeStyle(t)}setCustomProperty(t,e,n){n._setCustomProperty(t,e)}removeCustomProperty(t,e){return e._removeCustomProperty(t)}createPositionAt(t,e){return w._createAt(t,e)}createPositionAfter(t){return w._createAfter(t)}createPositionBefore(t){return w._createBefore(t)}createRange(t,e){return new x(t,e)}createRangeOn(t){return x._createOn(t)}createRangeIn(t){return x._createIn(t)}createSelection(...t){return new Ht(...t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gi extends so{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Kt({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(t){if(typeof t!="string")throw new f("pendingactions-add-invalid-message",this);const e=new(W());return e.set("message",t),this._actions.add(e),this.hasAny=!0,e}remove(t){this._actions.remove(t),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const Od="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m11.591%2010.177%204.243%204.242a1%201%200%200%201-1.415%201.415l-4.242-4.243-4.243%204.243a1%201%200%200%201-1.414-1.415l4.243-4.242L4.52%205.934A1%201%200%200%201%205.934%204.52l4.243%204.243%204.242-4.243a1%201%200%201%201%201.415%201.414l-4.243%204.243z'/%3e%3c/svg%3e",Nd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%2016h9a1%201%200%200%201%200%202H2a1%201%200%200%201%200-2z'/%3e%3cpath%20d='M17%201a2%202%200%200%201%202%202v9a2%202%200%200%201-2%202H3a2%202%200%200%201-2-2V3a2%202%200%200%201%202-2h14zm0%201.5H3a.5.5%200%200%200-.492.41L2.5%203v9a.5.5%200%200%200%20.41.492L3%2012.5h14a.5.5%200%200%200%20.492-.41L17.5%2012V3a.5.5%200%200%200-.41-.492L17%202.5z'%20fill-opacity='.6'/%3e%3c/svg%3e",Bd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.972%2016.615a.997.997%200%200%201-.744-.292l-4.596-4.596a1%201%200%201%201%201.414-1.414l3.926%203.926%209.937-9.937a1%201%200%200%201%201.414%201.415L7.717%2016.323a.997.997%200%200%201-.745.292z'/%3e%3c/svg%3e",Fd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m11.333%202%20.19%202.263a5.899%205.899%200%200%201%201.458.604L14.714%203.4%2016.6%205.286l-1.467%201.733c.263.452.468.942.605%201.46L18%208.666v2.666l-2.263.19a5.899%205.899%200%200%201-.604%201.458l1.467%201.733-1.886%201.886-1.733-1.467a5.899%205.899%200%200%201-1.46.605L11.334%2018H8.667l-.19-2.263a5.899%205.899%200%200%201-1.458-.604L5.286%2016.6%203.4%2014.714l1.467-1.733a5.899%205.899%200%200%201-.604-1.458L2%2011.333V8.667l2.262-.189a5.899%205.899%200%200%201%20.605-1.459L3.4%205.286%205.286%203.4l1.733%201.467a5.899%205.899%200%200%201%201.46-.605L8.666%202h2.666zM10%206.267a3.733%203.733%200%201%200%200%207.466%203.733%203.733%200%200%200%200-7.466z'/%3e%3c/svg%3e",Dd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.209%2018.717A8.5%208.5%200%201%201%2018.686%209.6h-.008l.002.12a3%203%200%200%201-2.866%202.997h-.268l-.046-.002v.002h-4.791a2%202%200%201%200%200%204%201%201%200%201%201-.128%201.992%208.665%208.665%200%200%201-.372.008Zm-3.918-7.01a1.25%201.25%200%201%200-2.415-.648%201.25%201.25%200%200%200%202.415.647ZM5.723%208.18a1.25%201.25%200%201%200%20.647-2.414%201.25%201.25%200%200%200-.647%202.414ZM9.76%206.155a1.25%201.25%200%201%200%20.647-2.415%201.25%201.25%200%200%200-.647%202.415Zm4.028%201.759a1.25%201.25%200%201%200%20.647-2.415%201.25%201.25%200%200%200-.647%202.415Z'/%3e%3c/svg%3e",Ld="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m8.636%209.531-2.758%203.94a.5.5%200%200%200%20.122.696l3.224%202.284h1.314l2.636-3.736L8.636%209.53zm.288%208.451L5.14%2015.396a2%202%200%200%201-.491-2.786l6.673-9.53a2%202%200%200%201%202.785-.49l3.742%202.62a2%202%200%200%201%20.491%202.785l-7.269%2010.053-2.147-.066z'/%3e%3cpath%20d='M4%2018h5.523v-1H4zm-2%200h1v-1H2z'/%3e%3c/svg%3e",$d="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%201a9%209%200%201%201-8.027%2013.075l1.128-1.129A7.502%207.502%200%200%200%2018.5%2010a7.5%207.5%200%201%200-14.962.759l-.745-.746-.76.76A9%209%200%200%201%2011%201z'/%3e%3cpath%20d='M.475%208.17a.75.75%200%200%201%20.978.047l.075.082%201.284%201.643%201.681-1.284a.75.75%200%200%201%20.978.057l.073.083a.75.75%200%200%201-.057.978l-.083.073-2.27%201.737a.75.75%200%200%201-.973-.052l-.074-.082-1.741-2.23a.75.75%200%200%201%20.13-1.052z'/%3e%3cpath%20d='M11.5%205v4.999l3.196%203.196-1.06%201.06L10.1%2010.72l-.1-.113V5z'/%3e%3c/svg%3e",Hd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.085%206.22%202.943%204.078a.75.75%200%201%201%201.06-1.06l2.592%202.59A11.094%2011.094%200%200%201%2010%205.068c4.738%200%208.578%203.101%208.578%205.083%200%201.197-1.401%202.803-3.555%203.887l1.714%201.713a.75.75%200%200%201-.09%201.138.488.488%200%200%201-.15.084.75.75%200%200%201-.821-.16L6.17%207.304c-.258.11-.51.233-.757.365l6.239%206.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55%208.197a7.2%207.2%200%200%200-.665.514l-.112.098%204.897%204.897-.005.006%201.276%201.276a10.164%2010.164%200%200%201-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563%202.563%200%200%200-.124.2c-.043.077-.08.158-.108.241a.534.534%200%200%200-.028.133.29.29%200%200%200%20.008.072.927.927%200%200%200%20.082.226c.067.133.145.26.234.379l3.242%203.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668%200-1.194%201.448-2.838%203.663-3.93zm7.07.531a4.632%204.632%200%200%201%201.108%205.992l.345.344.046-.018a9.313%209.313%200%200%200%202-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72%200%200%200%20.036-.12.29.29%200%200%200%20.008-.072.492.492%200%200%200-.028-.133.999.999%200%200%200-.036-.096%202.165%202.165%200%200%200-.071-.145%202.917%202.917%200%200%200-.125-.2%203.592%203.592%200%200%200-.263-.335%205.444%205.444%200%200%200-.53-.523%207.955%207.955%200%200%200-1.054-.768%209.766%209.766%200%200%200-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508%200%200%200-.254.097.496.496%200%200%200-.104.679.498.498%200%200%200%20.326.199l.045.005c.091.003.181.003.272.012a2.45%202.45%200%200%201%202.017%201.513c.024.061.043.125.069.185a.494.494%200%200%200%20.45.287h.008a.496.496%200%200%200%20.35-.158.482.482%200%200%200%20.13-.335.638.638%200%200%200-.048-.219%203.379%203.379%200%200%200-.36-.723%203.438%203.438%200%200%200-2.791-1.543l-.028-.001h-.013z'/%3e%3c/svg%3e",zd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.035%201C2.446%201%202%201.54%202%202.098V10.5h1.5v-8h13v8H18V2.098C18%201.539%2017.48%201%2016.9%201H3.035Zm10.453%202.61a1.885%201.885%200%200%200-1.442.736%201.89%201.89%200%200%200%201.011%202.976%201.903%201.903%200%200%200%202.253-1.114%201.887%201.887%200%200%200-1.822-2.598ZM7.463%208.163a.611.611%200%200%200-.432.154L5.071%2010.5h5.119L7.88%208.348a.628.628%200%200%200-.417-.185Zm6.236%201.059a.62.62%200%200%200-.42.164L12.07%2010.5h2.969l-.92-1.113a.618.618%200%200%200-.42-.165ZM.91%2011.5a.91.91%200%200%200-.91.912v6.877c0%20.505.405.91.91.91h18.178a.91.91%200%200%200%20.912-.91v-6.877a.908.908%200%200%200-.912-.912H.91ZM3.668%2013h1.947l2.135%205.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668%2013Zm4.947%200h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5%200h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517%201.457-.614%202.059h1.262l-.648-2.059Z'/%3e%3c/svg%3e",Ud="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.68%2013.74h-.001l4.209%204.208a1%201%200%201%200%201.414-1.414l-4.267-4.268a6%206%200%201%200-1.355%201.474ZM13%209a4%204%200%201%201-8%200%204%204%200%200%201%208%200Z'/%3e%3c/svg%3e",Wd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.463%205.187a.888.888%200%201%201%201.254%201.255L9.16%2010l3.557%203.557a.888.888%200%201%201-1.254%201.255L7.26%2010.61a.888.888%200%200%201%20.16-1.382l4.043-4.042z'/%3e%3c/svg%3e",qd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.537%2014.813a.888.888%200%201%201-1.254-1.255L10.84%2010%207.283%206.442a.888.888%200%201%201%201.254-1.255L12.74%209.39a.888.888%200%200%201-.16%201.382l-4.043%204.042z'/%3e%3c/svg%3e",Zd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.66%209.118a.693.693%200%200%201%20.956.032l3.65%203.411%202.422-2.238a.695.695%200%200%201%20.945%200L17.5%2013.6V2.5h-15v11.1l4.16-4.482ZM17.8%201c.652%200%201.2.47%201.2%201.1v14.362c0%20.64-.532%201.038-1.184%201.038H2.184C1.532%2017.5%201%2017.103%201%2016.462V2.1C1%201.47%201.537%201%202.2%201h15.6Zm-5.655%206a2.128%202.128%200%200%201%20.157-2.364A2.133%202.133%200%201%201%2012.145%207Z'/%3e%3c/svg%3e",jd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.201%201C.538%201%200%201.47%200%202.1v14.363c0%20.64.534%201.037%201.186%201.037h9.494a2.97%202.97%200%200%201-.414-.287%202.998%202.998%200%200%201-1.055-2.03%203.003%203.003%200%200%201%20.693-2.185l.383-.455-.02.018-3.65-3.41a.695.695%200%200%200-.957-.034L1.5%2013.6V2.5h15v5.535a2.97%202.97%200%200%201%201.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713%202.803a2.146%202.146%200%200%200-2.049%201.992%202.14%202.14%200%200%200%201.28%202.096%202.13%202.13%200%200%200%202.644-3.11%202.134%202.134%200%200%200-1.875-.978Z'/%3e%3cpath%20d='M15.522%2019.1a.79.79%200%200%200%20.79-.79v-5.373l2.059%202.455a.79.79%200%201%200%201.211-1.015l-3.352-3.995a.79.79%200%200%200-.995-.179.784.784%200%200%200-.299.221l-3.35%203.99a.79.79%200%201%200%201.21%201.017l1.936-2.306v5.185c0%20.436.353.79.79.79Z'/%3e%3cpath%20d='M15.522%2019.1a.79.79%200%200%200%20.79-.79v-5.373l2.059%202.455a.79.79%200%201%200%201.211-1.015l-3.352-3.995a.79.79%200%200%200-.995-.179.784.784%200%200%200-.299.221l-3.35%203.99a.79.79%200%201%200%201.21%201.017l1.936-2.306v5.185c0%20.436.353.79.79.79Z'/%3e%3c/svg%3e",Gd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.201%201c-.662%200-1.2.47-1.2%201.1v14.248c0%20.64.533%201.152%201.185%201.152h6.623v-7.236L6.617%209.15a.694.694%200%200%200-.957-.033L1.602%2013.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723%202.805a2.094%202.094%200%200%200-1.621.832%202.127%202.127%200%200%200%201.136%203.357%202.13%202.13%200%200%200%202.611-1.506%202.133%202.133%200%200%200-.76-2.244%202.13%202.13%200%200%200-1.366-.44Z'/%3e%3cpath%20clip-rule='evenodd'%20d='M19.898%2012.369v6.187a.844.844%200%200%201-.844.844h-8.719a.844.844%200%200%201-.843-.844v-7.312a.844.844%200%200%201%20.843-.844h2.531a.843.843%200%200%201%20.597.248l.838.852h4.75c.223%200%20.441.114.6.272a.844.844%200%200%201%20.247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z'/%3e%3c/svg%3e",Jd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.201%201C.538%201%200%201.47%200%202.1v14.363c0%20.64.534%201.037%201.186%201.037h7.029a5.401%205.401%200%200%201%20.615-4.338l.762-1.232-2.975-2.78a.696.696%200%200%200-.957-.033L1.5%2013.6V2.5h15v6.023c.449.131.887.32%201.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713%202.803a2.15%202.15%200%200%200-1.611.834%202.118%202.118%200%200%200-.438%201.158%202.14%202.14%200%200%200%201.277%202.096%202.132%202.132%200%200%200%202.645-3.11%202.13%202.13%200%200%200-1.873-.978Z'/%3e%3cpath%20d='M16.63%2010.294a3.003%203.003%200%200%200-4.142.887l-.117.177a.647.647%200%200%200-.096.492.664.664%200%200%200%20.278.418.7.7%200%200%200%20.944-.234%201.741%201.741%200%200%201%202.478-.463%201.869%201.869%200%200%201%20.476%202.55.637.637%200%200%200-.071.5.646.646%200%200%200%20.309.396.627.627%200%200%200%20.869-.19l.027-.041a3.226%203.226%200%200%200-.956-4.492Zm-6.061%203.78-.044.066a3.228%203.228%200%200%200%20.82%204.403%203.005%203.005%200%200%200%204.275-.798l.13-.197a.626.626%200%200%200%20.092-.475.638.638%200%200%200-.268-.402.713.713%200%200%200-.99.26l-.018.029a1.741%201.741%200%200%201-2.477.461%201.87%201.87%200%200%201-.475-2.55l.029-.047a.647.647%200%200%200%20.086-.485.66.66%200%200%200-.275-.408l-.04-.027a.609.609%200%200%200-.845.17Z'/%3e%3cpath%20d='M15.312%2013.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268%201.907c-.239.36-.153.838.192%201.067.345.23.818.123%201.057-.236l1.268-1.907Z'/%3e%3c/svg%3e",Kd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m9.239%2013.938-2.88-1.663a.75.75%200%200%201%20.75-1.3L9%2012.067V4.75a.75.75%200%201%201%201.5%200v7.318l1.89-1.093a.75.75%200%200%201%20.75%201.3l-2.879%201.663a.752.752%200%200%201-.511.187.752.752%200%200%201-.511-.187zM4.25%2017a.75.75%200%201%201%200-1.5h10.5a.75.75%200%200%201%200%201.5H4.25z'/%3e%3c/svg%3e",Yd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.75%2011.875a.752.752%200%200%201%20.508.184l2.883%201.666a.75.75%200%200%201-.659%201.344l-.091-.044-1.892-1.093.001%204.318a.75.75%200%201%201-1.5%200v-4.317l-1.89%201.092a.75.75%200%200%201-.75-1.3l2.879-1.663a.752.752%200%200%201%20.51-.187zM15.25%209a.75.75%200%201%201%200%201.5H4.75a.75.75%200%201%201%200-1.5h10.5zM9.75.375a.75.75%200%200%201%20.75.75v4.318l1.89-1.093.092-.045a.75.75%200%200%201%20.659%201.344l-2.883%201.667a.752.752%200%200%201-.508.184.752.752%200%200%201-.511-.187L6.359%205.65a.75.75%200%200%201%20.75-1.299L9%205.442V1.125a.75.75%200%200%201%20.75-.75z'/%3e%3c/svg%3e",Xd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m10.261%207.062%202.88%201.663a.75.75%200%200%201-.75%201.3L10.5%208.933v7.317a.75.75%200%201%201-1.5%200V8.932l-1.89%201.093a.75.75%200%200%201-.75-1.3l2.879-1.663a.752.752%200%200%201%20.511-.187.752.752%200%200%201%20.511.187zM15.25%204a.75.75%200%201%201%200%201.5H4.75a.75.75%200%200%201%200-1.5h10.5z'/%3e%3c/svg%3e",Qd="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%203.75c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0%208c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0%204c0%20.414.336.75.75.75h9.929a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0-8c0%20.414.336.75.75.75h9.929a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75z'/%3e%3c/svg%3e",t2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%203.75c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0%208c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm2.286%204c0%20.414.336.75.75.75h9.928a.75.75%200%201%200%200-1.5H5.036a.75.75%200%200%200-.75.75zm0-8c0%20.414.336.75.75.75h9.928a.75.75%200%201%200%200-1.5H5.036a.75.75%200%200%200-.75.75z'/%3e%3c/svg%3e",e2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18%203.75a.75.75%200%200%201-.75.75H2.75a.75.75%200%201%201%200-1.5h14.5a.75.75%200%200%201%20.75.75zm0%208a.75.75%200%200%201-.75.75H2.75a.75.75%200%201%201%200-1.5h14.5a.75.75%200%200%201%20.75.75zm0%204a.75.75%200%200%201-.75.75H7.321a.75.75%200%201%201%200-1.5h9.929a.75.75%200%200%201%20.75.75zm0-8a.75.75%200%200%201-.75.75H7.321a.75.75%200%201%201%200-1.5h9.929a.75.75%200%200%201%20.75.75z'/%3e%3c/svg%3e",s2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%203.75c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0%208c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0%204c0%20.414.336.75.75.75h9.929a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm0-8c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75z'/%3e%3c/svg%3e",n2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm0%2012h16v1.5H2z'/%3e%3cpath%20d='M12.003%207v5.5a1%201%200%200%201-1%201H2.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H3.5V12h6.997V7.5z'/%3e%3c/svg%3e",i2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm0%2012h16v1.5H2z'/%3e%3cpath%20d='M15.003%207v5.5a1%201%200%200%201-1%201H5.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H6.5V12h6.997V7.5z'/%3e%3c/svg%3e",r2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm0%2012h16v1.5H2z'/%3e%3cpath%20d='M18.003%207v5.5a1%201%200%200%201-1%201H8.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H9.5V12h6.997V7.5z'/%3e%3c/svg%3e",o2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm0%2012h16v1.5H2z'/%3e%3cpath%20d='M18%207v5.5a1%201%200%200%201-1%201H3a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h14a1%201%200%200%201%201%201zm-1.505.5H3.504V12h12.991V7.5z'/%3e%3c/svg%3e",a2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm11.5%209H18v1.5h-4.5zM2%2015h16v1.5H2z'/%3e%3cpath%20d='M12.003%207v5.5a1%201%200%200%201-1%201H2.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H3.5V12h6.997V7.5z'/%3e%3c/svg%3e",l2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm11.5%209H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2%2015h16v1.5H2z'/%3e%3cpath%20d='M12.003%207v5.5a1%201%200%200%201-1%201H2.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H3.5V12h6.997V7.5z'/%3e%3c/svg%3e",c2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20opacity='.5'%20d='M2%203h16v1.5H2zm0%2012h16v1.5H2zm0-9h5v1.5H2zm0%203h5v1.5H2zm0%203h5v1.5H2z'/%3e%3cpath%20d='M18.003%207v5.5a1%201%200%200%201-1%201H8.996a1%201%200%200%201-1-1V7a1%201%200%200%201%201-1h8.007a1%201%200%200%201%201%201zm-1.506.5H9.5V12h6.997V7.5z'/%3e%3c/svg%3e",h2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2020%2020'%3e%3cpath%20d='M2.5%2017v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zm2%200v1h-1v-1h1zM1%2015.5v1H0v-1h1zm19%200v1h-1v-1h1zm-19-2v1H0v-1h1zm19%200v1h-1v-1h1zm-19-2v1H0v-1h1zm19%200v1h-1v-1h1zm-19-2v1H0v-1h1zm19%200v1h-1v-1h1zm-19-2v1H0v-1h1zm19%200v1h-1v-1h1zm-19-2v1H0v-1h1zm19%200v1h-1v-1h1zm0-2v1h-1v-1h1zm-19%200v1H0v-1h1zM14.5%202v1h-1V2h1zm2%200v1h-1V2h1zm2%200v1h-1V2h1zm-8%200v1h-1V2h1zm-2%200v1h-1V2h1zm-2%200v1h-1V2h1zm-2%200v1h-1V2h1zm8%200v1h-1V2h1zm-10%200v1h-1V2h1z'/%3e%3cpath%20d='M18.095%202H1.905C.853%202%200%202.895%200%204v12c0%201.105.853%202%201.905%202h16.19C19.147%2018%2020%2017.105%2020%2016V4c0-1.105-.853-2-1.905-2zm0%201.5c.263%200%20.476.224.476.5v12c0%20.276-.213.5-.476.5H1.905a.489.489%200%200%201-.476-.5V4c0-.276.213-.5.476-.5h16.19z'/%3e%3c/svg%3e",u2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%2016.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1ZM1%2015v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2013v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2011v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%209v1H0V9h1Zm19%200v1h-1V9h1ZM1%207v1H0V7h1Zm19%200v1h-1V7h1ZM1%205v1H0V5h1Zm19%200v1h-1V5h1Zm0-2v1h-1V3h1ZM1%203v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm-8%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm8%200v1h-1v-1h1Zm-10%200v1h-1v-1h1Z'/%3e%3cpath%20d='M13%205.5H2a2%202%200%200%200-2%202v8a2%202%200%200%200%202%202h11a2%202%200%200%200%202-2v-8a2%202%200%200%200-2-2ZM13%207a.5.5%200%200%201%20.5.5v8a.5.5%200%200%201-.5.5H2a.5.5%200%200%201-.5-.5v-8A.5.5%200%200%201%202%207h11Z'/%3e%3c/svg%3e",f2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%2016.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1ZM1%2015v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2013v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2011v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%209v1H0V9h1Zm19%200v1h-1V9h1ZM1%207v1H0V7h1Zm19%200v1h-1V7h1ZM1%205v1H0V5h1Zm19%200v1h-1V5h1Zm0-2v1h-1V3h1ZM1%203v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm-8%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm8%200v1h-1v-1h1Zm-10%200v1h-1v-1h1Z'/%3e%3cpath%20d='M7%209.5H2a2%202%200%200%200-2%202v4a2%202%200%200%200%202%202h5a2%202%200%200%200%202-2v-4a2%202%200%200%200-2-2ZM7%2011a.5.5%200%200%201%20.5.5v4a.5.5%200%200%201-.5.5H2a.5.5%200%200%201-.5-.5v-4A.5.5%200%200%201%202%2011h5Z'/%3e%3c/svg%3e",d2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.5%2016.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1ZM1%2015v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2013v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%2011v1H0v-1h1Zm19%200v1h-1v-1h1ZM1%209v1H0V9h1Zm19%200v1h-1V9h1ZM1%207v1H0V7h1Zm19%200v1h-1V7h1ZM1%205v1H0V5h1Zm19%200v1h-1V5h1Zm0-2v1h-1V3h1ZM1%203v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2%200v1h-1v-1h1Zm2%200v1h-1v-1h1Zm-8%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm-2%200v1h-1v-1h1Zm8%200v1h-1v-1h1Zm-10%200v1h-1v-1h1Z'/%3e%3cpath%20d='M10%207.5H2a2%202%200%200%200-2%202v6a2%202%200%200%200%202%202h8a2%202%200%200%200%202-2v-6a2%202%200%200%200-2-2ZM10%209a.5.5%200%200%201%20.5.5v6a.5.5%200%200%201-.5.5H2a.5.5%200%200%201-.5-.5v-6A.5.5%200%200%201%202%209h8Z'/%3e%3c/svg%3e",g2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m7.3%2017.37-.061.088a1.518%201.518%200%200%201-.934.535l-4.178.663-.806-4.153a1.495%201.495%200%200%201%20.187-1.058l.056-.086L8.77%202.639c.958-1.351%202.803-1.076%204.296-.03%201.497%201.047%202.387%202.693%201.433%204.055L7.3%2017.37zM9.14%204.728l-5.545%208.346%203.277%202.294%205.544-8.346L9.14%204.728zM6.07%2016.512l-3.276-2.295.53%202.73%202.746-.435zM9.994%203.506%2013.271%205.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8%2018.5%209.375%2017H19v1.5H8z'/%3e%3c/svg%3e",m2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.999%202H15a1%201%200%200%201%200%202h-1.004v13a1%201%200%201%201-2%200V4H8.999v13a1%201%200%201%201-2%200v-7A4%204%200%200%201%203%206a4%204%200%200%201%203.999-4z'/%3e%3c/svg%3e",p2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%2010.423a6.5%206.5%200%200%201%206.056-6.408l.038.67C6.448%205.423%205.354%207.663%205.22%2010H9c.552%200%20.5.432.5.986v4.511c0%20.554-.448.503-1%20.503h-5c-.552%200-.5-.449-.5-1.003v-4.574zm8%200a6.5%206.5%200%200%201%206.056-6.408l.038.67c-2.646.739-3.74%202.979-3.873%205.315H17c.552%200%20.5.432.5.986v4.511c0%20.554-.448.503-1%20.503h-5c-.552%200-.5-.449-.5-1.003v-4.574z'/%3e%3c/svg%3e",w2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='9.5'%20cy='4.5'%20r='1.5'/%3e%3ccircle%20cx='9.5'%20cy='10.5'%20r='1.5'/%3e%3ccircle%20cx='9.5'%20cy='16.5'%20r='1.5'/%3e%3c/svg%3e",_2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5%203.25a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3cpath%20d='M12%203.25a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3cpath%20d='M5%2010a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3cpath%20d='M12%2010a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3cpath%20d='M5%2016.75a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3cpath%20d='M12%2016.75a1.5%201.5%200%201%200%203%200%201.5%201.5%200%201%200-3%200'/%3e%3c/svg%3e",v2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.187%2017H5.773c-.637%200-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406%201.354-.406h4.68c.69%200%201.288.041%201.793.124.506.083.96.242%201.36.478.341.197.644.447.906.75a3.262%203.262%200%200%201%20.808%202.162c0%201.401-.722%202.426-2.167%203.075C15.05%2010.175%2016%2011.315%2016%2013.01a3.756%203.756%200%200%201-2.296%203.504%206.1%206.1%200%200%201-1.517.377c-.571.073-1.238.11-2%20.11zm-.217-6.217H7v4.087h3.069c1.977%200%202.965-.69%202.965-2.072%200-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7%205.13v3.619h2.606c.729%200%201.292-.067%201.69-.2a1.6%201.6%200%200%200%20.91-.765c.165-.267.247-.566.247-.897%200-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z'/%3e%3c/svg%3e",b2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.5%205.5H7v5h3.5a2.5%202.5%200%201%200%200-5zM5%203h6.5v.025a5%205%200%200%201%200%209.95V13H7v4a1%201%200%200%201-1%201H5a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1z'/%3e%3c/svg%3e",y2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10%202a1%201%200%200%200-1%201v6H3a1%201%200%201%200%200%202h6v6a1%201%200%201%200%202%200v-6h6a1%201%200%201%200%200-2h-6V3a1%201%200%200%200-1-1Z'/%3e%3c/svg%3e",P2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.816%2011.5%207.038%204.785%204.261%2011.5h5.555Zm.62%201.5H3.641l-1.666%204.028H.312l5.789-14h1.875l5.789%2014h-1.663L10.436%2013Z'/%3e%3cpath%20d='m12.09%2017-.534-1.292.848-1.971.545%201.319L12.113%2017h-.023Zm1.142-5.187.545%201.319L15.5%209.13l1.858%204.316h-3.45l.398.965h3.467L18.887%2017H20l-3.873-9h-1.254l-1.641%203.813Z'/%3e%3c/svg%3e",T2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19%204.5%2014%200H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24%202.24%200%200%201%201.5.822V4.5ZM14%205V2l3.3%203H14Zm-3.692%2012.5c.062.105.133.206.213.303L11.52%2019H8v-.876a2.243%202.243%200%200%200%201.82-.624h.488Zm7.518-.657a.75.75%200%200%200-1.152-.96L15.5%2017.29V12H14v5.29l-1.174-1.408a.75.75%200%200%200-1.152.96l2.346%202.816a.95.95%200%200%200%201.46%200l2.346-2.815Zm-15.056-.38a.75.75%200%200%201-.096-1.056l2.346-2.815a.95.95%200%200%201%201.46%200l2.346%202.815a.75.75%200%201%201-1.152.96L6.5%2014.96V20H5v-5.04l-1.174%201.408a.75.75%200%200%201-1.056.096Z'/%3e%3c/svg%3e",x2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m14.958%209.367-2.189%201.837a.75.75%200%200%200%20.965%201.149l3.788-3.18a.747.747%200%200%200%20.21-.284.75.75%200%200%200-.17-.945L13.77%204.762a.75.75%200%201%200-.964%201.15l2.331%201.955H6.22A.75.75%200%200%200%206%207.9a4%204%200%201%200%201.477%207.718l-.344-1.489A2.5%202.5%200%201%201%206.039%209.4l-.008-.032h8.927z'/%3e%3c/svg%3e",A2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m5.042%209.367%202.189%201.837a.75.75%200%200%201-.965%201.149l-3.788-3.18a.747.747%200%200%201-.21-.284.75.75%200%200%201%20.17-.945L6.23%204.762a.75.75%200%201%201%20.964%201.15L4.863%207.866h8.917A.75.75%200%200%201%2014%207.9a4%204%200%201%201-1.477%207.718l.344-1.489a2.5%202.5%200%201%200%201.094-4.73l.008-.032H5.042z'/%3e%3c/svg%3e",E2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%205.75c0%20.414.336.75.75.75h9.5a.75.75%200%201%200%200-1.5h-9.5a.75.75%200%200%200-.75.75zm-6%200C1%204.784%201.777%204%202.75%204c.966%200%201.75.777%201.75%201.75%200%20.966-.777%201.75-1.75%201.75C1.784%207.5%201%206.723%201%205.75zm6%209c0%20.414.336.75.75.75h9.5a.75.75%200%201%200%200-1.5h-9.5a.75.75%200%200%200-.75.75zm-6%200c0-.966.777-1.75%201.75-1.75.966%200%201.75.777%201.75%201.75%200%20.966-.777%201.75-1.75%201.75-.966%200-1.75-.777-1.75-1.75z'/%3e%3c/svg%3e",k2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7%205.75c0%20.414.336.75.75.75h9.5a.75.75%200%201%200%200-1.5h-9.5a.75.75%200%200%200-.75.75zM3.5%203v5H2V3.7H1v-1h2.5V3zM.343%2017.857l2.59-3.257H2.92a.6.6%200%201%200-1.04%200H.302a2%202%200%201%201%203.995%200h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244%201.312H4.3v1h-4l.043-.043zM7%2014.75a.75.75%200%200%201%20.75-.75h9.5a.75.75%200%201%201%200%201.5h-9.5a.75.75%200%200%201-.75-.75z'/%3e%3c/svg%3e",C2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m2.315%2014.705%202.224-2.24a.689.689%200%200%201%20.963%200%20.664.664%200%200%201%200%20.949L2.865%2016.07a.682.682%200%200%201-.112.089.647.647%200%200%201-.852-.051L.688%2014.886a.635.635%200%200%201%200-.903.647.647%200%200%201%20.91%200l.717.722zm5.185.045a.75.75%200%200%201%20.75-.75h9.5a.75.75%200%201%201%200%201.5h-9.5a.75.75%200%200%201-.75-.75zM2.329%205.745l2.21-2.226a.689.689%200%200%201%20.963%200%20.664.664%200%200%201%200%20.95L2.865%207.125a.685.685%200%200%201-.496.196.644.644%200%200%201-.468-.187L.688%205.912a.635.635%200%200%201%200-.903.647.647%200%200%201%20.91%200l.73.736zM7.5%205.75A.75.75%200%200%201%208.25%205h9.5a.75.75%200%201%201%200%201.5h-9.5a.75.75%200%200%201-.75-.75z'/%3e%3c/svg%3e",M2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12.87%2012.61a.75.75%200%200%201-.089.976l-.085.07-3.154%202.254%203.412%202.414a.75.75%200%200%201%20.237.95l-.057.095a.75.75%200%200%201-.95.237l-.096-.058-4.272-3.022-.003-1.223%204.01-2.867a.75.75%200%200%201%201.047.174zm2.795-.231.095.057%204.011%202.867-.003%201.223-4.272%203.022-.095.058a.75.75%200%200%201-.88-.151l-.07-.086-.058-.095a.75.75%200%200%201%20.15-.88l.087-.07%203.412-2.414-3.154-2.253-.085-.071a.75.75%200%200%201%20.862-1.207zM16%200a2%202%200%200%201%202%202v9.354l-.663-.492-.837-.001V2a.5.5%200%200%200-.5-.5H2a.5.5%200%200%200-.5.5v15a.5.5%200%200%200%20.5.5h3.118L7.156%2019H2a2%202%200%200%201-2-2V2a2%202%200%200%201%202-2h14zM5.009%2015l.003%201H3v-1h2.009zm2.188-2-1.471%201H5v-1h2.197zM10%2011v.095L8.668%2012H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6%203v1H3V3h3z'/%3e%3c/svg%3e",S2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.627%2016.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457%201.044.785%201.5H2a1.5%201.5%200%200%201-1.5-1.5v-13A1.5%201.5%200%200%201%202%202h4.5a1.5%201.5%200%200%201%201.06.44L9.122%204H16a1.5%201.5%200%200%201%201.5%201.5v1A1.5%201.5%200%200%201%2019%208v2.531a6.027%206.027%200%200%200-1.5-1.228zM16%206.5v-1H8.5l-2-2H2v13h1V8a1.5%201.5%200%200%201%201.5-1.5H16z'/%3e%3cpath%20d='M14.5%2019.5a5%205%200%201%201%200-10%205%205%200%200%201%200%2010zM15%2014v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z'/%3e%3c/svg%3e",I2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M19%209v10h-2v-8h-2V9h4zM4%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201H10a1%201%200%200%201-1-1V11H4v4.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1H3a1%201%200%200%201%201%201v4.5z'/%3e%3c/svg%3e",R2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201H9a1%201%200%200%201-1-1V11H3v4.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1H2a1%201%200%200%201%201%201v4.5zm16.076%208.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561%201.006-1.305%202.005-2.232.804-.749%201.297-1.257%201.479-1.523.245-.368.368-.732.368-1.092%200-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372%200-.669.111-.889.336-.22.224-.347.596-.38%201.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427%201.257-.64%202.095-.64.918%200%201.64.247%202.164.742.525.495.787%201.11.787%201.847%200%20.419-.075.818-.225%201.197-.15.378-.388.775-.714%201.19-.216.275-.605.67-1.168%201.187-.563.516-.92.859-1.07%201.028a3.11%203.11%200%200%200-.365.495h3.542z'/%3e%3c/svg%3e",V2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201H9a1%201%200%200%201-1-1V11H3v4.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1H2a1%201%200%200%201%201%201v4.5zm9.989%207.53%201.726-.209c.055.44.203.777.445%201.01.24.232.533.349.876.349.368%200%20.678-.14.93-.42.251-.279.377-.655.377-1.13%200-.448-.12-.803-.362-1.066a1.153%201.153%200%200%200-.882-.393c-.228%200-.501.044-.819.133l.197-1.453c.482.012.85-.092%201.105-.315.253-.222.38-.517.38-.885%200-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07%201.07%200%200%200-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24%203.24%200%200%201%201.387-.289c.876%200%201.579.28%202.108.838.436.457.653.973.653%201.549%200%20.817-.446%201.468-1.339%201.955.533.114.96.37%201.28.768.319.398.478.878.478%201.441%200%20.817-.298%201.513-.895%202.088-.596.576-1.339.864-2.228.864-.842%200-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z'/%3e%3c/svg%3e",O2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.5%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V11h-5v4.5a1%201%200%200%201-1%201H2a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v4.5zm13.55%2010v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14%203.18h2.14z'/%3e%3c/svg%3e",N2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.5%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V11h-5v4.5a1%201%200%200%201-1%201H2a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v4.5zm9.578%207.607%201.777-.184c.05.402.201.72.45.955a1.223%201.223%200%200%200%201.81-.101c.258-.303.387-.759.387-1.368%200-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512%200-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28%201.58a2.697%202.697%200%200%201%201.219-.298%202.68%202.68%200%200%201%202.012.863c.55.576.825%201.323.825%202.241a3.36%203.36%200%200%201-.666%202.05c-.605.821-1.445%201.232-2.52%201.232-.86%200-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z'/%3e%3c/svg%3e",B2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.5%208.5h5V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v11.5a1%201%200%200%201-1%201h-.5a1%201%200%200%201-1-1V11h-5v4.5a1%201%200%200%201-1%201H2a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1h.5a1%201%200%200%201%201%201v4.5zm15.595%202.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377%200-.695.169-.956.507-.26.339-.424%201.043-.492%202.114.445-.525.997-.787%201.657-.787.745%200%201.383.284%201.914.85.531.568.797%201.3.797%202.197%200%20.952-.28%201.716-.838%202.291-.559.576-1.276.864-2.152.864-.94%200-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59%200-1.705.316-2.935.946-3.688.63-.753%201.45-1.13%202.457-1.13.706%200%201.291.198%201.755.594.463.395.758.97.885%201.723zm-4.043%203.891c0%20.58.133%201.028.4%201.343.266.315.57.473.914.473.33%200%20.605-.13.825-.388.22-.258.33-.68.33-1.27%200-.604-.118-1.047-.355-1.329a1.115%201.115%200%200%200-.89-.422c-.342%200-.632.134-.869.403s-.355.666-.355%201.19z'/%3e%3c/svg%3e",F2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%209h16v2H2z'/%3e%3c/svg%3e",D2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17%200a2%202%200%200%201%202%202v7a1%201%200%200%201%201%201v5a1%201%200%200%201-.883.993l-.118.006L19%2017a2%202%200%200%201-2%202H3a2%202%200%200%201-2-2l-.001-1.001-.116-.006A1%201%200%200%201%200%2015v-5a1%201%200%200%201%20.999-1L1%202a2%202%200%200%201%202-2h14zm.499%2015.999h-15L2.5%2017a.5.5%200%200%200%20.5.5h14a.5.5%200%200%200%20.5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525%201.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428%201.43.048.043.131-.129L14%2011.421V15h1v-5h-.965l-.014-.014zM2%2010H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7%200H6v1h1v4h1v-4h1v-1zm8%200h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5%200%200%200-.5.5l-.001%206.999h15L17.5%202a.5.5%200%200%200-.5-.5zM10%207v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z'/%3e%3c/svg%3e",L2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%203.75c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm5%206c0%20.414.336.75.75.75h9.5a.75.75%200%201%200%200-1.5h-9.5a.75.75%200%200%200-.75.75zM2.75%2016.5h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%201%200%200%201.5zM1.632%206.95%205.02%209.358a.4.4%200%200%201-.013.661l-3.39%202.207A.4.4%200%200%201%201%2011.892V7.275a.4.4%200%200%201%20.632-.326z'/%3e%3c/svg%3e",$2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2%203.75c0%20.414.336.75.75.75h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%200%200-.75.75zm5%206c0%20.414.336.75.75.75h9.5a.75.75%200%201%200%200-1.5h-9.5a.75.75%200%200%200-.75.75zM2.75%2016.5h14.5a.75.75%200%201%200%200-1.5H2.75a.75.75%200%201%200%200%201.5zm1.618-9.55L.98%209.358a.4.4%200%200%200%20.013.661l3.39%202.207A.4.4%200%200%200%205%2011.892V7.275a.4.4%200%200%200-.632-.326z'/%3e%3c/svg%3e",H2="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%205.5v3h4v-3H3Zm0%204v3h4v-3H3Zm0%204v3h4v-3H3Zm5%203h4v-3H8v3Zm5%200h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5%208A1.5%201.5%200%200%201%2017%2018H3a1.5%201.5%200%200%201-1.5-1.5V3c.222-.863%201.068-1.5%202-1.5h13c.932%200%201.778.637%202%201.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z'/%3e%3c/svg%3e";/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zt={bold:v2,cancel:Od,caption:Nd,check:Bd,cog:Fd,colorPalette:Dd,eraser:Ld,history:$d,image:Zd,imageUpload:jd,imageAssetManager:Gd,imageUrl:Jd,lowVision:Hd,textAlternative:zd,loupe:Ud,previousArrow:Wd,nextArrow:qd,importExport:T2,paragraph:b2,plus:y2,text:P2,alignBottom:Kd,alignMiddle:Yd,alignTop:Xd,alignLeft:Qd,alignCenter:t2,alignRight:e2,alignJustify:s2,objectLeft:l2,objectCenter:i2,objectRight:c2,objectFullWidth:o2,objectInline:a2,objectBlockLeft:n2,objectBlockRight:r2,objectSizeFull:h2,objectSizeLarge:u2,objectSizeSmall:f2,objectSizeMedium:d2,pencil:g2,pilcrow:m2,quote:p2,threeVerticalDots:w2,dragIndicator:_2,redo:x2,undo:A2,bulletedList:E2,numberedList:k2,todoList:C2,codeBlock:M2,browseFiles:S2,heading1:I2,heading2:R2,heading3:V2,heading4:O2,heading5:N2,heading6:B2,horizontalLine:F2,html:D2,indent:L2,outdent:$2,table:H2};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z2 extends Zf{constructor(t){super(t),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const e=this.document;this.listenTo(e,"paste",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"drop",n("clipboardInput"),{priority:"low"}),this.listenTo(e,"dragover",n("dragging"),{priority:"low"});function n(i){return(r,o)=>{o.preventDefault();const a=o.dropRange?[o.dropRange]:null,l=new Rt(e,i);e.fire(l,{dataTransfer:o.dataTransfer,method:r.name,targetRanges:a,target:o.target,domEvent:o.domEvent}),l.stop.called&&o.stopPropagation()}}}onDomEvent(t){const e="clipboardData"in t?t.clipboardData:t.dataTransfer,n=t.type=="drop"||t.type=="paste",i={dataTransfer:new jf(e,{cacheFiles:n})};(t.type=="drop"||t.type=="dragover")&&(i.dropRange=U2(this.view,t)),this.fire(t.type,t,i)}}function U2(s,t){const e=t.target.ownerDocument,n=t.clientX,i=t.clientY;let r;return e.caretRangeFromPoint&&e.caretRangeFromPoint(n,i)?r=e.caretRangeFromPoint(n,i):t.rangeParent&&(r=e.createRange(),r.setStart(t.rangeParent,t.rangeOffset),r.collapse(!0)),r?s.domConverter.domRangeToView(r):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function W2(s){return s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(s.includes("</p><p>")||s.includes("<br>"))&&(s=`<p>${s}</p>`),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function q2(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(t,e)=>e.length==1?" ":e).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ji=["figcaption","li"],Ki=["ol","ul"];function To(s){if(s.is("$text")||s.is("$textProxy"))return s.data;if(s.is("element","img")&&s.hasAttribute("alt"))return s.getAttribute("alt");if(s.is("element","br"))return`
`;let t="",e=null;for(const n of s.getChildren())t+=Z2(n,e)+To(n),e=n;return t}function Z2(s,t){return t?s.is("element","li")&&!s.isEmpty&&s.getChild(0).is("containerElement")||Ki.includes(s.name)&&Ki.includes(t.name)?`

`:!s.is("containerElement")&&!t.is("containerElement")?"":Ji.includes(s.name)||Ji.includes(t.name)?`
`:`

`:""}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j2 extends rt{constructor(){super(...arguments),this._markersToCopy=new Map}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(t,e){const n=Array.isArray(e)?e:this._mapRestrictionPresetToActions(e);n.length&&this._markersToCopy.set(t,n)}_mapRestrictionPresetToActions(t){switch(t){case"always":return["copy","cut","dragstart"];case"default":return["cut","dragstart"];case"never":return[];default:return[]}}_copySelectedFragmentWithMarkers(t,e,n=i=>i.model.getSelectedContent(i.model.document.selection)){return this.editor.model.change(i=>{const r=i.model.document.selection;i.setSelection(e);const o=this._insertFakeMarkersIntoSelection(i,i.model.document.selection,t),a=n(i),l=this._removeFakeMarkersInsideElement(i,a);for(const[c,h]of Object.entries(o)){l[c]||(l[c]=i.createRangeIn(a));for(const u of h)i.remove(u)}a.markers.clear();for(const[c,h]of Object.entries(l))a.markers.set(c,h);return i.setSelection(r),a})}_pasteMarkersIntoTransformedElement(t,e){const n=this._getCopyableMarkersFromRangeMap(t);return this.editor.model.change(i=>{const r=this._insertFakeMarkersElements(i,n),o=e(i),a=this._removeFakeMarkersInsideElement(i,o);for(const l of Object.values(r).flat())i.remove(l);for(const[l,c]of Object.entries(a)){const h=i.model.markers.has(l)?this._getUniqueMarkerName(l):l;i.addMarker(h,{usingOperation:!0,affectsData:!0,range:c})}return o})}_forceMarkersCopy(t,e){const n=this._markersToCopy.get(t);this._markersToCopy.set(t,this._mapRestrictionPresetToActions("always")),e(),n?this._markersToCopy.set(t,n):this._markersToCopy.delete(t)}_canPerformMarkerClipboardAction(t,e){const[n]=t.split(":");return e?(this._markersToCopy.get(n)||[]).includes(e):this._markersToCopy.has(n)}_setUniqueMarkerNamesInFragment(t){const e=Array.from(t.markers);t.markers.clear();for(const[n,i]of e){const r=this._canPerformMarkerClipboardAction(n,null)?this._getUniqueMarkerName(n):n;t.markers.set(r,i)}}_insertFakeMarkersIntoSelection(t,e,n){const i=this._getCopyableMarkersFromSelection(t,e,n);return this._insertFakeMarkersElements(t,i)}_getCopyableMarkersFromSelection(t,e,n){return Array.from(e.getRanges()).flatMap(i=>Array.from(t.model.markers.getMarkersIntersectingRange(i))).filter(i=>this._canPerformMarkerClipboardAction(i.name,n)).map(i=>({name:i.name,range:i.getRange()}))}_getCopyableMarkersFromRangeMap(t,e=null){return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).map(([i,r])=>({name:i,range:r})).filter(i=>this._canPerformMarkerClipboardAction(i.name,e))}_insertFakeMarkersElements(t,e){const n={},i=e.flatMap(r=>{const{start:o,end:a}=r.range;return[{position:o,marker:r,type:"start"},{position:a,marker:r,type:"end"}]}).sort(({position:r},{position:o})=>r.isBefore(o)?1:-1);for(const{position:r,marker:o,type:a}of i){const l=t.createElement("$marker",{"data-name":o.name,"data-type":a});n[o.name]||(n[o.name]=[]),n[o.name].push(l),t.insert(l,r)}return n}_removeFakeMarkersInsideElement(t,e){const i=this._getAllFakeMarkersFromElement(t,e).reduce((r,o)=>{const a=o.markerElement&&t.createPositionBefore(o.markerElement);let l=r[o.name];return l&&l.start&&l.end&&(r[this._getUniqueMarkerName(o.name)]=r[o.name],l=null),r[o.name]={...l,[o.type]:a},o.markerElement&&t.remove(o.markerElement),r},{});return M0(i,r=>new d(r.start||t.createPositionFromPath(e,[0]),r.end||t.createPositionAt(e,"end")))}_getAllFakeMarkersFromElement(t,e){const n=Array.from(t.createRangeIn(e)).flatMap(({item:o})=>{if(!o.is("element","$marker"))return[];const a=o.getAttribute("data-name"),l=o.getAttribute("data-type");return[{markerElement:o,name:a,type:l}]}),i=[],r=[];for(const o of n)o.type==="end"&&(n.some(l=>l.name===o.name&&l.type==="start")||i.push({markerElement:null,name:o.name,type:"start"})),o.type==="start"&&(n.some(l=>l.name===o.name&&l.type==="end")||r.unshift({markerElement:null,name:o.name,type:"end"}));return[...i,...n,...r]}_getUniqueMarkerName(t){const e=t.split(":"),n=mt().substring(1,6);return e.length===3?`${e.slice(0,2).join(":")}:${n}`:`${e.join(":")}:${n}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G2 extends rt{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[j2]}init(){this.editor.editing.view.addObserver(z2),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(t,e,n){const r=this.editor.plugins.get("ClipboardMarkersUtils")._copySelectedFragmentWithMarkers(n,e);this.fire("outputTransformation",{dataTransfer:t,content:r,method:n})}_setupPasteDrop(){const t=this.editor,e=t.model,n=t.editing.view,i=n.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(o,a)=>{a.method=="paste"&&!t.model.canEditAt(t.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let u="";l.getData("text/html")?u=q2(l.getData("text/html")):l.getData("text/plain")&&(u=W2(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(u)}const h=new Rt(this,"inputTransformation");this.fire(h,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&o.stop(),n.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),e.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{r._setUniqueMarkerNamesInFragment(a.content)},{priority:"highest"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=e.insertContent(a.content)},{priority:"low"})}_setupCopyCut(){const t=this.editor,e=t.model.document,i=t.editing.view.document,r=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,e.selection,o.name)};this.listenTo(i,"copy",r,{priority:"low"}),this.listenTo(i,"cut",(o,a)=>{t.model.canEditAt(t.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=t.data.toView(a.content);i.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",To(a.content))),a.method=="cut"&&t.model.deleteContent(e.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J2({emitter:s,activator:t,callback:e,contextElements:n}){s.listenTo(document,"mousedown",(i,r)=>{if(!t())return;const o=typeof r.composedPath=="function"?r.composedPath():[],a=typeof n=="function"?n():n;for(const l of a)if(l.contains(r.target)||o.includes(l))return;e()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function K2({view:s}){s.listenTo(s.element,"submit",(t,e)=>{e.preventDefault(),s.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class de extends Kt{constructor(t=[]){super(t,{idProperty:"viewUid"}),this.on("add",(e,n,i)=>{this._renderViewIntoCollectionParent(n,i)}),this.on("remove",(e,n)=>{n.element&&this._parentElement&&n.element.remove()}),this._parentElement=null}destroy(){this.map(t=>t.destroy())}setParent(t){this._parentElement=t;for(const e of this)this._renderViewIntoCollectionParent(e)}delegate(...t){if(!t.length||!Y2(t))throw new f("ui-viewcollection-delegate-wrong-events",this);return{to:e=>{for(const n of this)for(const i of t)n.delegate(i).to(e);this.on("add",(n,i)=>{for(const r of t)i.delegate(r).to(e)}),this.on("remove",(n,i)=>{for(const r of t)i.stopDelegating(r,e)})}}}_renderViewIntoCollectionParent(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}remove(t){return super.remove(t)}}function Y2(s){return s.every(t=>typeof t=="string")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const X2="http://www.w3.org/1999/xhtml";class Ae extends C(){constructor(t){super(),Object.assign(this,Xi(Yi(t))),this._isRendered=!1,this._revertData=null}render(){const t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}apply(t){return this._revertData=er(),this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}revert(t){if(!this._revertData)throw new f("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}*getViews(){function*t(e){if(e.children)for(const n of e.children)cs(n)?yield n:Sn(n)&&(yield*t(n))}yield*t(this)}static bind(t,e){return{to(n,i){return new Q2({eventNameOrFunction:n,attribute:n,observable:t,emitter:e,callback:i})},if(n,i,r){return new xo({observable:t,emitter:e,attribute:n,valueIfTrue:i,callback:r})}}}static extend(t,e){if(t._isRendered)throw new f("template-extend-render",[this,t]);Co(t,Xi(Yi(e)))}_renderNode(t){let e;if(t.node?e=this.tag&&this.text:e=this.tag?this.text:!this.text,e)throw new f("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}_renderElement(t){let e=t.node;return e||(e=t.node=document.createElementNS(this.ns||X2,this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}_renderText(t){let e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),Ye(this.text)?this._bindToObservable({schema:this.text,updater:eg(e),data:t}):e.textContent=this.text.join(""),e}_renderAttributes(t){if(!this.attributes)return;const e=t.node,n=t.revertData;for(const i in this.attributes){const r=e.getAttribute(i),o=this.attributes[i];n&&(n.attributes[i]=r);const a=tr(o)?o[0].ns:null;if(Ye(o)){const l=tr(o)?o[0].value:o;n&&sr(i)&&l.unshift(r),this._bindToObservable({schema:l,updater:sg(e,i,a),data:t})}else if(i=="style"&&typeof o[0]!="string")this._renderStyleAttribute(o[0],t);else{n&&r&&sr(i)&&o.unshift(r);const l=o.map(c=>c&&(c.value||c)).reduce((c,h)=>c.concat(h),[]).reduce(ko,"");he(l)||e.setAttributeNS(a,i,l)}}}_renderStyleAttribute(t,e){const n=e.node;for(const i in t){const r=t[i];Ye(r)?this._bindToObservable({schema:[r],updater:ng(n,i),data:e}):n.style[i]=r}}_renderElementChildren(t){const e=t.node,n=t.intoFragment?document.createDocumentFragment():e,i=t.isApplying;let r=0;for(const o of this.children)if(In(o)){if(!i){o.setParent(e);for(const a of o)n.appendChild(a.element)}}else if(cs(o))i||(o.isRendered||o.render(),n.appendChild(o.element));else if(rs(o))n.appendChild(o);else if(i){const a=t.revertData,l=er();a.children.push(l),o._renderNode({intoFragment:!1,node:n.childNodes[r++],isApplying:!0,revertData:l})}else n.appendChild(o.render());t.intoFragment&&e.appendChild(n)}_setUpListeners(t){if(this.eventListeners)for(const e in this.eventListeners){const n=this.eventListeners[e].map(i=>{const[r,o]=e.split("@");return i.activateDomEventListener(r,o,t)});t.revertData&&t.revertData.bindings.push(n)}}_bindToObservable({schema:t,updater:e,data:n}){const i=n.revertData;Ao(t,e,n);const r=t.filter(o=>!he(o)).filter(o=>o.observable).map(o=>o.activateAttributeListener(t,e,n));i&&i.bindings.push(r)}_revertTemplateFromNode(t,e){for(const i of e.bindings)for(const r of i)r();if(e.text){t.textContent=e.text;return}const n=t;for(const i in e.attributes){const r=e.attributes[i];r===null?n.removeAttribute(i):n.setAttribute(i,r)}for(let i=0;i<e.children.length;++i)this._revertTemplateFromNode(n.childNodes[i],e.children[i])}}class He{constructor(t){this.attribute=t.attribute,this.observable=t.observable,this.emitter=t.emitter,this.callback=t.callback}getValue(t){const e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}activateAttributeListener(t,e,n){const i=()=>Ao(t,e,n);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class Q2 extends He{constructor(t){super(t),this.eventNameOrFunction=t.eventNameOrFunction}activateDomEventListener(t,e,n){const i=(r,o)=>{(!e||o.target.matches(e))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(o):this.observable.fire(this.eventNameOrFunction,o))};return this.emitter.listenTo(n.node,t,i),()=>{this.emitter.stopListening(n.node,t,i)}}}class xo extends He{constructor(t){super(t),this.valueIfTrue=t.valueIfTrue}getValue(t){const e=super.getValue(t);return he(e)?!1:this.valueIfTrue||!0}}function Ye(s){return s?(s.value&&(s=s.value),Array.isArray(s)?s.some(Ye):s instanceof He):!1}function tg(s,t){return s.map(e=>e instanceof He?e.getValue(t):e)}function Ao(s,t,{node:e}){const n=tg(s,e);let i;s.length==1&&s[0]instanceof xo?i=n[0]:i=n.reduce(ko,""),he(i)?t.remove():t.set(i)}function eg(s){return{set(t){s.textContent=t},remove(){s.textContent=""}}}function sg(s,t,e){return{set(n){s.setAttributeNS(e,t,n)},remove(){s.removeAttributeNS(e,t)}}}function ng(s,t){return{set(e){s.style[t]=e},remove(){s.style[t]=null}}}function Yi(s){return Eu(s,e=>{if(e&&(e instanceof He||Sn(e)||cs(e)||In(e)))return e})}function Xi(s){if(typeof s=="string"?s=og(s):s.text&&ag(s),s.on&&(s.eventListeners=rg(s.on),delete s.on),!s.text){s.attributes&&ig(s.attributes);const t=[];if(s.children)if(In(s.children))t.push(s.children);else for(const e of s.children)Sn(e)||cs(e)||rs(e)?t.push(e):t.push(new Ae(e));s.children=t}return s}function ig(s){for(const t in s)s[t].value&&(s[t].value=K(s[t].value)),Eo(s,t)}function rg(s){for(const t in s)Eo(s,t);return s}function og(s){return{text:[s]}}function ag(s){s.text=K(s.text)}function Eo(s,t){s[t]=K(s[t])}function ko(s,t){return he(t)?s:he(s)?t:`${s} ${t}`}function Qi(s,t){for(const e in t)s[e]?s[e].push(...t[e]):s[e]=t[e]}function Co(s,t){if(t.attributes&&(s.attributes||(s.attributes={}),Qi(s.attributes,t.attributes)),t.eventListeners&&(s.eventListeners||(s.eventListeners={}),Qi(s.eventListeners,t.eventListeners)),t.text&&s.text.push(...t.text),t.children&&t.children.length){if(s.children.length!=t.children.length)throw new f("ui-template-extend-children-mismatch",s);let e=0;for(const n of t.children)Co(s.children[e++],n)}}function he(s){return!s&&s!==0}function cs(s){return s instanceof M}function Sn(s){return s instanceof Ae}function In(s){return s instanceof de}function tr(s){return Y(s[0])&&s[0].ns}function er(){return{children:[],bindings:[],attributes:{}}}function sr(s){return s=="class"||s=="style"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M extends Vt(W()){constructor(t){super(),this.element=null,this.isRendered=!1,this.locale=t,this.t=t&&t.t,this._viewCollections=new Kt,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(e,n)=>{n.locale=t,n.t=t&&t.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ae.bind(this,this)}createCollection(t){const e=new de(t);return this._viewCollections.add(e),e}registerChild(t){st(t)||(t=[t]);for(const e of t)this._unboundChildren.add(e)}deregisterChild(t){st(t)||(t=[t]);for(const e of t)this._unboundChildren.remove(e)}setTemplate(t){this.template=new Ae(t)}extendTemplate(t){Ae.extend(this.template,t)}render(){if(this.isRendered)throw new f("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(t=>t.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lg extends M{constructor(t){super(t),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${mt()}`;const e=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:e.to("for")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nt extends M{constructor(){super();const t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",e=>!e),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const e=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),n=e.getAttribute("viewBox");n&&(this.viewBox=n);for(const{name:i,value:r}of Array.from(e.attributes))Nt.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;e.childNodes.length>0;)this.element.appendChild(e.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}Nt.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cg extends M{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const t=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:t.to("style"),id:t.to("id")},children:[{text:t.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class it extends M{constructor(t,e=new cg){super(t),this._focusDelayed=null;const n=this.bindTemplate,i=mt();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(e),this.iconView=new Nt,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const r={tag:"button",attributes:{class:["ck","ck-button",n.to("class"),n.if("isEnabled","ck-disabled",o=>!o),n.if("isVisible","ck-hidden",o=>!o),n.to("isOn",o=>o?"ck-on":"ck-off"),n.if("withText","ck-button_with-text"),n.if("withKeystroke","ck-button_with-keystroke")],role:n.to("role"),type:n.to("type",o=>o||"button"),tabindex:n.to("tabindex"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy"),"aria-disabled":n.if("isEnabled",!0,o=>!o),"aria-pressed":n.to("isOn",o=>this.isToggleable?String(!!o):!1),"data-cke-tooltip-text":n.to("_tooltipString"),"data-cke-tooltip-position":n.to("tooltipPosition")},children:this.children,on:{click:n.to(o=>{this.isEnabled?this.fire("execute"):o.preventDefault()})}};Ut.isSafari&&(this._focusDelayed||(this._focusDelayed=sf(()=>this.focus(),0)),r.on.mousedown=n.to(()=>{this._focusDelayed()}),r.on.mouseup=n.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(r)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}_createKeystrokeView(){const t=new M;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",e=>xi(e))}]}),t}_getTooltipString(t,e,n){return t?typeof t=="string"?t:(n&&(n=xi(n)),t instanceof Function?t(e,n):`${e}${n?` (${n})`:""}`):""}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hg extends it{constructor(t){super(t),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const t=new M;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}const Rn="data:image/svg+xml,%3csvg%20viewBox='0%200%2010%2010'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M.941%204.523a.75.75%200%201%201%201.06-1.06l3.006%203.005%203.005-3.005a.75.75%200%201%201%201.06%201.06l-3.549%203.55a.75.75%200%200%201-1.168-.136L.941%204.523z'/%3e%3c/svg%3e";/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Mo extends M{constructor(t,e){super(t);const n=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),e&&this.children.addMany(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",n.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:n.if("isCollapsed","hidden"),"aria-labelledby":n.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const t=new it(this.locale),e=t.bindTemplate;return t.set({withText:!0,icon:Rn}),t.extendTemplate({attributes:{"aria-expanded":e.to("isOn",n=>String(n))}}),t.bind("label").to(this),t.bind("isOn").to(this,"isCollapsed",n=>!n),t.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),t}}var ug={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Be=ug,So={};for(const s of Object.keys(Be))So[Be[s]]=s;const _={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Io=_;for(const s of Object.keys(_)){if(!("channels"in _[s]))throw new Error("missing channels property: "+s);if(!("labels"in _[s]))throw new Error("missing channel labels property: "+s);if(_[s].labels.length!==_[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:t,labels:e}=_[s];delete _[s].channels,delete _[s].labels,Object.defineProperty(_[s],"channels",{value:t}),Object.defineProperty(_[s],"labels",{value:e})}_.rgb.hsl=function(s){const t=s[0]/255,e=s[1]/255,n=s[2]/255,i=Math.min(t,e,n),r=Math.max(t,e,n),o=r-i;let a,l;r===i?a=0:t===r?a=(e-n)/o:e===r?a=2+(n-t)/o:n===r&&(a=4+(t-e)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+r)/2;return r===i?l=0:c<=.5?l=o/(r+i):l=o/(2-r-i),[a,l*100,c*100]};_.rgb.hsv=function(s){let t,e,n,i,r;const o=s[0]/255,a=s[1]/255,l=s[2]/255,c=Math.max(o,a,l),h=c-Math.min(o,a,l),u=function(g){return(c-g)/6/h+1/2};return h===0?(i=0,r=0):(r=h/c,t=u(o),e=u(a),n=u(l),o===c?i=n-e:a===c?i=1/3+t-n:l===c&&(i=2/3+e-t),i<0?i+=1:i>1&&(i-=1)),[i*360,r*100,c*100]};_.rgb.hwb=function(s){const t=s[0],e=s[1];let n=s[2];const i=_.rgb.hsl(s)[0],r=1/255*Math.min(t,Math.min(e,n));return n=1-1/255*Math.max(t,Math.max(e,n)),[i,r*100,n*100]};_.rgb.cmyk=function(s){const t=s[0]/255,e=s[1]/255,n=s[2]/255,i=Math.min(1-t,1-e,1-n),r=(1-t-i)/(1-i)||0,o=(1-e-i)/(1-i)||0,a=(1-n-i)/(1-i)||0;return[r*100,o*100,a*100,i*100]};function fg(s,t){return(s[0]-t[0])**2+(s[1]-t[1])**2+(s[2]-t[2])**2}_.rgb.keyword=function(s){const t=So[s];if(t)return t;let e=1/0,n;for(const i of Object.keys(Be)){const r=Be[i],o=fg(s,r);o<e&&(e=o,n=i)}return n};_.keyword.rgb=function(s){return Be[s]};_.rgb.xyz=function(s){let t=s[0]/255,e=s[1]/255,n=s[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const i=t*.4124+e*.3576+n*.1805,r=t*.2126+e*.7152+n*.0722,o=t*.0193+e*.1192+n*.9505;return[i*100,r*100,o*100]};_.rgb.lab=function(s){const t=_.rgb.xyz(s);let e=t[0],n=t[1],i=t[2];e/=95.047,n/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const r=116*n-16,o=500*(e-n),a=200*(n-i);return[r,o,a]};_.hsl.rgb=function(s){const t=s[0]/360,e=s[1]/100,n=s[2]/100;let i,r,o;if(e===0)return o=n*255,[o,o,o];n<.5?i=n*(1+e):i=n+e-n*e;const a=2*n-i,l=[0,0,0];for(let c=0;c<3;c++)r=t+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?o=a+(i-a)*6*r:2*r<1?o=i:3*r<2?o=a+(i-a)*(2/3-r)*6:o=a,l[c]=o*255;return l};_.hsl.hsv=function(s){const t=s[0];let e=s[1]/100,n=s[2]/100,i=e;const r=Math.max(n,.01);n*=2,e*=n<=1?n:2-n,i*=r<=1?r:2-r;const o=(n+e)/2,a=n===0?2*i/(r+i):2*e/(n+e);return[t,a*100,o*100]};_.hsv.rgb=function(s){const t=s[0]/60,e=s[1]/100;let n=s[2]/100;const i=Math.floor(t)%6,r=t-Math.floor(t),o=255*n*(1-e),a=255*n*(1-e*r),l=255*n*(1-e*(1-r));switch(n*=255,i){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};_.hsv.hsl=function(s){const t=s[0],e=s[1]/100,n=s[2]/100,i=Math.max(n,.01);let r,o;o=(2-e)*n;const a=(2-e)*i;return r=e*i,r/=a<=1?a:2-a,r=r||0,o/=2,[t,r*100,o*100]};_.hwb.rgb=function(s){const t=s[0]/360;let e=s[1]/100,n=s[2]/100;const i=e+n;let r;i>1&&(e/=i,n/=i);const o=Math.floor(6*t),a=1-n;r=6*t-o,o&1&&(r=1-r);const l=e+r*(a-e);let c,h,u;switch(o){default:case 6:case 0:c=a,h=l,u=e;break;case 1:c=l,h=a,u=e;break;case 2:c=e,h=a,u=l;break;case 3:c=e,h=l,u=a;break;case 4:c=l,h=e,u=a;break;case 5:c=a,h=e,u=l;break}return[c*255,h*255,u*255]};_.cmyk.rgb=function(s){const t=s[0]/100,e=s[1]/100,n=s[2]/100,i=s[3]/100,r=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,e*(1-i)+i),a=1-Math.min(1,n*(1-i)+i);return[r*255,o*255,a*255]};_.xyz.rgb=function(s){const t=s[0]/100,e=s[1]/100,n=s[2]/100;let i,r,o;return i=t*3.2406+e*-1.5372+n*-.4986,r=t*-.9689+e*1.8758+n*.0415,o=t*.0557+e*-.204+n*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),[i*255,r*255,o*255]};_.xyz.lab=function(s){let t=s[0],e=s[1],n=s[2];t/=95.047,e/=100,n/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const i=116*e-16,r=500*(t-e),o=200*(e-n);return[i,r,o]};_.lab.xyz=function(s){const t=s[0],e=s[1],n=s[2];let i,r,o;r=(t+16)/116,i=e/500+r,o=r-n/200;const a=r**3,l=i**3,c=o**3;return r=a>.008856?a:(r-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,r*=100,o*=108.883,[i,r,o]};_.lab.lch=function(s){const t=s[0],e=s[1],n=s[2];let i;i=Math.atan2(n,e)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(e*e+n*n);return[t,o,i]};_.lch.lab=function(s){const t=s[0],e=s[1],i=s[2]/360*2*Math.PI,r=e*Math.cos(i),o=e*Math.sin(i);return[t,r,o]};_.rgb.ansi16=function(s,t=null){const[e,n,i]=s;let r=t===null?_.rgb.hsv(s)[2]:t;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return r===2&&(o+=60),o};_.hsv.ansi16=function(s){return _.rgb.ansi16(_.hsv.rgb(s),s[2])};_.rgb.ansi256=function(s){const t=s[0],e=s[1],n=s[2];return t===e&&e===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(e/255*5)+Math.round(n/255*5)};_.ansi16.rgb=function(s){let t=s%10;if(t===0||t===7)return s>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const e=(~~(s>50)+1)*.5,n=(t&1)*e*255,i=(t>>1&1)*e*255,r=(t>>2&1)*e*255;return[n,i,r]};_.ansi256.rgb=function(s){if(s>=232){const r=(s-232)*10+8;return[r,r,r]}s-=16;let t;const e=Math.floor(s/36)/5*255,n=Math.floor((t=s%36)/6)/5*255,i=t%6/5*255;return[e,n,i]};_.rgb.hex=function(s){const e=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(e.length)+e};_.hex.rgb=function(s){const t=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let e=t[0];t[0].length===3&&(e=e.split("").map(a=>a+a).join(""));const n=parseInt(e,16),i=n>>16&255,r=n>>8&255,o=n&255;return[i,r,o]};_.rgb.hcg=function(s){const t=s[0]/255,e=s[1]/255,n=s[2]/255,i=Math.max(Math.max(t,e),n),r=Math.min(Math.min(t,e),n),o=i-r;let a,l;return o<1?a=r/(1-o):a=0,o<=0?l=0:i===t?l=(e-n)/o%6:i===e?l=2+(n-t)/o:l=4+(t-e)/o,l/=6,l%=1,[l*360,o*100,a*100]};_.hsl.hcg=function(s){const t=s[1]/100,e=s[2]/100,n=e<.5?2*t*e:2*t*(1-e);let i=0;return n<1&&(i=(e-.5*n)/(1-n)),[s[0],n*100,i*100]};_.hsv.hcg=function(s){const t=s[1]/100,e=s[2]/100,n=t*e;let i=0;return n<1&&(i=(e-n)/(1-n)),[s[0],n*100,i*100]};_.hcg.rgb=function(s){const t=s[0]/360,e=s[1]/100,n=s[2]/100;if(e===0)return[n*255,n*255,n*255];const i=[0,0,0],r=t%1*6,o=r%1,a=1-o;let l=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-e)*n,[(e*i[0]+l)*255,(e*i[1]+l)*255,(e*i[2]+l)*255]};_.hcg.hsv=function(s){const t=s[1]/100,e=s[2]/100,n=t+e*(1-t);let i=0;return n>0&&(i=t/n),[s[0],i*100,n*100]};_.hcg.hsl=function(s){const t=s[1]/100,n=s[2]/100*(1-t)+.5*t;let i=0;return n>0&&n<.5?i=t/(2*n):n>=.5&&n<1&&(i=t/(2*(1-n))),[s[0],i*100,n*100]};_.hcg.hwb=function(s){const t=s[1]/100,e=s[2]/100,n=t+e*(1-t);return[s[0],(n-t)*100,(1-n)*100]};_.hwb.hcg=function(s){const t=s[1]/100,n=1-s[2]/100,i=n-t;let r=0;return i<1&&(r=(n-i)/(1-i)),[s[0],i*100,r*100]};_.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]};_.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]};_.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]};_.gray.hsl=function(s){return[0,0,s[0]]};_.gray.hsv=_.gray.hsl;_.gray.hwb=function(s){return[0,100,s[0]]};_.gray.cmyk=function(s){return[0,0,0,s[0]]};_.gray.lab=function(s){return[s[0],0,0]};_.gray.hex=function(s){const t=Math.round(s[0]/100*255)&255,n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n};_.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]};const hs=Io;function dg(){const s={},t=Object.keys(hs);for(let e=t.length,n=0;n<e;n++)s[t[n]]={distance:-1,parent:null};return s}function gg(s){const t=dg(),e=[s];for(t[s].distance=0;e.length;){const n=e.pop(),i=Object.keys(hs[n]);for(let r=i.length,o=0;o<r;o++){const a=i[o],l=t[a];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,e.unshift(a))}}return t}function mg(s,t){return function(e){return t(s(e))}}function pg(s,t){const e=[t[s].parent,s];let n=hs[t[s].parent][s],i=t[s].parent;for(;t[i].parent;)e.unshift(t[i].parent),n=mg(hs[t[i].parent][i],n),i=t[i].parent;return n.conversion=e,n}var wg=function(s){const t=gg(s),e={},n=Object.keys(t);for(let i=n.length,r=0;r<i;r++){const o=n[r];t[o].parent!==null&&(e[o]=pg(o,t))}return e};const sn=Io,_g=wg,_e={},vg=Object.keys(sn);function bg(s){const t=function(...e){const n=e[0];return n==null?n:(n.length>1&&(e=n),s(e))};return"conversion"in s&&(t.conversion=s.conversion),t}function yg(s){const t=function(...e){const n=e[0];if(n==null)return n;n.length>1&&(e=n);const i=s(e);if(typeof i=="object")for(let r=i.length,o=0;o<r;o++)i[o]=Math.round(i[o]);return i};return"conversion"in s&&(t.conversion=s.conversion),t}vg.forEach(s=>{_e[s]={},Object.defineProperty(_e[s],"channels",{value:sn[s].channels}),Object.defineProperty(_e[s],"labels",{value:sn[s].labels});const t=_g(s);Object.keys(t).forEach(n=>{const i=t[n];_e[s][n]=yg(i),_e[s][n].raw=bg(i)})});/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ro extends M{constructor(t,e){super(t);const n=`ck-labeled-field-view-${mt()}`,i=`ck-labeled-field-view-status-${mt()}`;this.fieldView=e(this,n,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(n),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(o,a)=>o||a);const r=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o),r.if("isEmpty","ck-labeled-field-view_empty"),r.if("isFocused","ck-labeled-field-view_focused"),r.if("placeholder","ck-labeled-field-view_placeholder"),r.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(t){const e=new lg(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}_createStatusView(t){const e=new M(this.locale),n=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",n.if("errorText","ck-labeled-field-view__status_error"),n.if("_statusText","ck-hidden",i=>!i)],id:t,role:n.if("errorText","alert")},children:[{text:n.to("_statusText")}]}),e}focus(t){this.fieldView.focus(t)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pg extends M{constructor(t){super(t),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.focusTracker=new kt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",e.if("isFocused","ck-input_focused"),e.if("isEmpty","ck-input-text_empty"),e.if("hasError","ck-error")],id:e.to("id"),placeholder:e.to("placeholder"),readonly:e.to("isReadOnly"),"aria-invalid":e.if("hasError",!0),"aria-describedby":e.to("ariaDescribedById")},on:{input:e.to((...n)=>{this.fire("input",...n),this._updateIsEmpty()}),change:e.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(t,e,n)=>{this._setDomElementValue(n),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Tg(this.element)}_setDomElementValue(t){this.element.value=!t&&t!==0?"":t}}function Tg(s){return!s.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xg extends Pg{constructor(t){super(t),this.set("inputMode","text");const e=this.bindTemplate;this.extendTemplate({attributes:{inputmode:e.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ag extends xg{constructor(t){super(t),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Eg extends M{constructor(t){super(t);const e=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",e.to("position",n=>`ck-dropdown__panel_${n}`),e.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:e.to(n=>{n.target.tagName.toLocaleLowerCase()!=="input"&&n.preventDefault()})}})}focus(){if(this.children.length){const t=this.children.first;typeof t.focus=="function"?t.focus():J("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const t=this.children.last;typeof t.focusLast=="function"?t.focusLast():t.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ue extends M{constructor(t,e,n){super(t);const i=this.bindTemplate;this.buttonView=e,this.panelView=n,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Yt,this.focusTracker=new kt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[e,n]}),e.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(e,n,i)=>{if(i)if(this.panelPosition==="auto"){const r=ue._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const t=(e,n)=>{this.isOpen&&(this.isOpen=!1,n())};this.keystrokes.set("arrowdown",(e,n)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,n())}),this.keystrokes.set("arrowright",(e,n)=>{this.isOpen&&n()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:t,north:e,southEast:n,southWest:i,northEast:r,northWest:o,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:h}=ue.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[n,i,a,l,t,r,o,c,h,e]:[i,n,l,a,t,o,r,h,c,e]}}ue.defaultPanelPositions={south:(s,t)=>({top:s.bottom,left:s.left-(t.width-s.width)/2,name:"s"}),southEast:s=>({top:s.bottom,left:s.left,name:"se"}),southWest:(s,t)=>({top:s.bottom,left:s.left-t.width+s.width,name:"sw"}),southMiddleEast:(s,t)=>({top:s.bottom,left:s.left-(t.width-s.width)/4,name:"sme"}),southMiddleWest:(s,t)=>({top:s.bottom,left:s.left-(t.width-s.width)*3/4,name:"smw"}),north:(s,t)=>({top:s.top-t.height,left:s.left-(t.width-s.width)/2,name:"n"}),northEast:(s,t)=>({top:s.top-t.height,left:s.left,name:"ne"}),northWest:(s,t)=>({top:s.top-t.height,left:s.left-t.width+s.width,name:"nw"}),northMiddleEast:(s,t)=>({top:s.top-t.height,left:s.left-(t.width-s.width)/4,name:"nme"}),northMiddleWest:(s,t)=>({top:s.top-t.height,left:s.left-(t.width-s.width)*3/4,name:"nmw"})};ue._getOptimalPosition=yn;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vo extends it{constructor(t){super(t),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",e=>String(e))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const t=new Nt;return t.content=Rn,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class te extends C(){constructor(t){if(super(),this.focusables=t.focusables,this.focusTracker=t.focusTracker,this.keystrokeHandler=t.keystrokeHandler,this.actions=t.actions,t.actions&&t.keystrokeHandler)for(const e in t.actions){let n=t.actions[e];typeof n=="string"&&(n=[n]);for(const i of n)t.keystrokeHandler.set(i,(r,o)=>{this[e](),o()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Bs)||null}get last(){return this.focusables.filter(Bs).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let t=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((e,n)=>{const i=e.element===this.focusTracker.focusedElement;return i&&(t=n),i}),t)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const t=this.next;if(t&&this.focusables.getIndex(t)===this.current){this.fire("forwardCycle");return}t===this.first?this.fire("forwardCycle"):this._focus(t,1)}focusPrevious(){const t=this.previous;if(t&&this.focusables.getIndex(t)===this.current){this.fire("backwardCycle");return}t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}_focus(t,e){t&&this.focusTracker.focusedElement!==t.element&&t.focus(e)}_getDomFocusableItem(t){const e=this.focusables.length;if(!e)return null;const n=this.current;if(n===null)return this[t===1?"first":"last"];let i=this.focusables.get(n),r=(n+e+t)%e;do{const o=this.focusables.get(r);if(Bs(o)){i=o;break}r=(r+e+t)%e}while(r!==n);return i}}function Bs(s){return Vn(s)&&Js(s.element)}function Vn(s){return"focus"in s&&typeof s.focus=="function"}function kg(s){return Vn(s)&&"focusCycler"in s&&s.focusCycler instanceof te}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oo extends M{constructor(t,e){super(t);const n=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(e),this.arrowView=this._createArrowView(),this.keystrokes=new Yt,this.focusTracker=new kt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",n.to("class"),n.if("isVisible","ck-hidden",i=>!i),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(t,e)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),e())}),this.keystrokes.set("arrowleft",(t,e)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),e())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(t){const e=t||new it;return t||e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}_createArrowView(){const t=new it,e=t.bindTemplate;return t.icon=Rn,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":e.to("isOn"),"aria-haspopup":!0,"aria-expanded":e.to("isOn",n=>String(n))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cg(s,t=Vo){const e=typeof t=="function"?new t(s):t,n=new Eg(s),i=new ue(s,e,n);return e.bind("isEnabled").to(i),e instanceof Oo?e.arrowView.bind("isOn").to(i,"isOpen"):e.bind("isOn").to(i,"isOpen"),Mg(i),i}function Mg(s){Sg(s),Ig(s),Rg(s),Vg(s),Og(s),Ng(s)}function Sg(s){s.on("render",()=>{J2({emitter:s,activator:()=>s.isOpen,callback:()=>{s.isOpen=!1},contextElements:()=>[s.element,...s.focusTracker._elements]})})}function Ig(s){s.on("execute",t=>{t.source instanceof hg||(s.isOpen=!1)})}function Rg(s){s.focusTracker.on("change:isFocused",(t,e,n)=>{s.isOpen&&!n&&(s.isOpen=!1)})}function Vg(s){s.keystrokes.set("arrowdown",(t,e)=>{s.isOpen&&(s.panelView.focus(),e())}),s.keystrokes.set("arrowup",(t,e)=>{s.isOpen&&(s.panelView.focusLast(),e())})}function Og(s){s.on("change:isOpen",(t,e,n)=>{if(n)return;const i=s.panelView.element;i&&i.contains(P.document.activeElement)&&s.buttonView.focus()})}function Ng(s){s.on("change:isOpen",(t,e,n)=>{n&&s.panelView.focus()},{priority:"low"})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const No=(s,t,e)=>{const n=new Ag(s.locale);return n.set({id:t,ariaDescribedById:e}),n.bind("isReadOnly").to(s,"isEnabled",i=>!i),n.bind("hasError").to(s,"errorText",i=>!!i),n.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(n),n};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bg extends M{constructor(t,e={}){super(t);const n=this.bindTemplate;this.set("label",e.label||""),this.set("class",e.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",n.to("class")]},children:this.children}),e.icon&&(this.iconView=new Nt,this.iconView.content=e.icon,this.children.add(this.iconView));const i=new M(t);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:n.to("label")}]}),this.children.add(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Fg(s){class t extends s{constructor(...n){super(...n),this._onDragBound=this._onDrag.bind(this),this._onDragEndBound=this._onDragEnd.bind(this),this._lastDraggingCoordinates={x:0,y:0},this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(P.document,"mouseup",this._onDragEndBound),this.listenTo(P.document,"touchend",this._onDragEndBound),this.listenTo(P.document,"mousemove",this._onDragBound),this.listenTo(P.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(P.document,"mouseup",this._onDragEndBound),this.stopListening(P.document,"touchend",this._onDragEndBound),this.stopListening(P.document,"mousemove",this._onDragBound),this.stopListening(P.document,"touchmove",this._onDragBound)}_onDragStart(n,i){if(!this._isHandleElementPressed(i))return;this._attachDragListeners();let r=0,o=0;i instanceof MouseEvent?(r=i.clientX,o=i.clientY):(r=i.touches[0].clientX,o=i.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:o},this.isDragging=!0}_onDrag(n,i){if(!this.isDragging){this._detachDragListeners();return}let r=0,o=0;i instanceof MouseEvent?(r=i.clientX,o=i.clientY):(r=i.touches[0].clientX,o=i.touches[0].clientY),i.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(o-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:o}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(n){return this.dragHandleElement?this.dragHandleElement===n.target||n.target instanceof HTMLElement&&this.dragHandleElement.contains(n.target):!1}}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dg extends M{constructor(t){super(t),this.children=this.createCollection(),this.keystrokes=new Yt,this._focusTracker=new kt,this._focusables=new de,this.focusCycler=new te({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(t){for(const e of t){const n=new it(this.locale);let i;n.on("execute",()=>e.onExecute()),e.onCreate&&e.onCreate(n);for(i in e)i!="onExecute"&&i!="onCreate"&&n.set(i,e[i]);this.children.add(n)}this._updateFocusCyclableItems()}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lg extends M{constructor(t){super(t),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yt={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},nr=bn("px");class On extends Fg(M){constructor(t,{getCurrentDomRoot:e,getViewportOffset:n}){super(t),this.wasMoved=!1;const i=this.bindTemplate,r=t.t;this.set("className",""),this.set("ariaLabel",r("Editor dialog")),this.set("isModal",!1),this.set("position",yt.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=e,this._getViewportOffset=n,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Yt,this.focusTracker=new kt,this._focusables=new de,this._focusCycler=new te({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",i.if("isModal","ck-dialog-overlay__transparent",o=>!o),i.if("_isVisible","ck-hidden",o=>!o)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",i.to("className")],role:"dialog","aria-label":i.to("ariaLabel"),style:{top:i.to("_top",o=>nr(o)),left:i.to("_left",o=>nr(o)),visibility:i.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,e)=>{this.fire("close",{source:"escKeyPress"}),e()}),this.on("drag",(t,{deltaX:e,deltaY:n})=>{this.wasMoved=!0,this.moveBy(e,n)}),this.listenTo(P.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(P.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,e,n)=>{n&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:t,title:e,hasCloseButton:n=!0,content:i,actionButtons:r}){e&&(this.headerView=new Bg(this.locale,{icon:t}),n&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=e,this.ariaLabel=e,this.parts.add(this.headerView,0)),i&&(i instanceof M&&(i=[i]),this.contentView=new Lg(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),r&&(this.actionsView=new Dg(this.locale),this.actionsView.setButtons(r),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,e){const n=this._getViewportRect(),i=this._getDialogRect();t+i.width>n.right&&(t=n.right-i.width),t<n.left&&(t=n.left),e<n.top&&(e=n.top),this._moveTo(t,e)}_moveTo(t,e){this._left=t,this._top=e}moveBy(t,e){this.moveTo(this._left+t,this._top+e)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const t=this._getViewportRect();let e=this.position,n;this._getCurrentDomRoot()?n=this._getVisibleDomRootRect(t):e=yt.SCREEN_CENTER;const i=On.defaultOffset,r=this._getDialogRect();switch(e){case yt.EDITOR_TOP_SIDE:{if(n){const o=this.locale.contentLanguageDirection==="ltr"?n.right-r.width-i:n.left+i;this.moveTo(o,n.top+i)}else this._moveOffScreen();break}case yt.EDITOR_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-r.width/2),Math.round(n.top+n.height/2-r.height/2)):this._moveOffScreen();break}case yt.SCREEN_CENTER:{this.moveTo(Math.round((t.width-r.width)/2),Math.round((t.height-r.height)/2));break}case yt.EDITOR_TOP_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-r.width/2),n.top+i):this._moveOffScreen();break}case yt.EDITOR_BOTTOM_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-r.width/2),n.bottom-r.height-i):this._moveOffScreen();break}case yt.EDITOR_ABOVE_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-r.width/2),n.top-r.height-i):this._moveOffScreen();break}case yt.EDITOR_BELOW_CENTER:{n?this.moveTo(Math.round(n.left+n.width/2-r.width/2),n.bottom+i):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let e=new U(this._getCurrentDomRoot()).getVisible();if(e){if(e=t.getIntersection(e),!e)return null}else return null;return e}_getDialogRect(){return new U(this.element.firstElementChild)}_getViewportRect(){return $g(this._getViewportOffset())}_updateFocusCyclableItems(){const t=[];if(this.contentView)for(const e of this.contentView.children)Vn(e)&&t.push(e);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element),kg(e)&&(this.listenTo(e.focusCycler,"forwardCycle",n=>{this._focusCycler.focusNext(),this._focusCycler.next!==this._focusCycler.focusables.get(this._focusCycler.current)&&n.stop()}),this.listenTo(e.focusCycler,"backwardCycle",n=>{this._focusCycler.focusPrevious(),this._focusCycler.previous!==this._focusCycler.focusables.get(this._focusCycler.current)&&n.stop()}))})}_createCloseButton(){const t=new it(this.locale),e=this.locale.t;return t.set({label:e("Close"),tooltip:!0,icon:Zt.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}On.defaultOffset=15;function $g(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);const t=new U(P.window);return t.top+=s.top,t.height-=s.top,t.bottom-=s.bottom,t.height-=s.bottom,t.left+=s.left,t.right-=s.right,t.width-=s.left+s.right,t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ir=bn("px"),rr=P.document.body,Hg={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class et extends M{constructor(t){super(t);const e=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",e.to("position",n=>`ck-balloon-panel_${n}`),e.if("isVisible","ck-balloon-panel_visible"),e.if("withArrow","ck-balloon-panel_with-arrow"),e.to("class")],style:{top:e.to("top",ir),left:e.to("left",ir)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){this.show();const e=et.defaultPositions,n=Object.assign({},{element:this.element,positions:[e.southArrowNorth,e.southArrowNorthMiddleWest,e.southArrowNorthMiddleEast,e.southArrowNorthWest,e.southArrowNorthEast,e.northArrowSouth,e.northArrowSouthMiddleWest,e.northArrowSouthMiddleEast,e.northArrowSouthWest,e.northArrowSouthEast,e.viewportStickyNorth],limiter:rr,fitInViewport:!0},t),i=et._getOptimalPosition(n)||Hg,r=parseInt(i.left),o=parseInt(i.top),a=i.name,l=i.config||{},{withArrow:c=!0}=l;this.top=o,this.left=r,this.position=a,this.withArrow=c}pin(t){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){this.attachTo(t);const e=nn(t.target),n=t.limiter?nn(t.limiter):rr;this.listenTo(P.document,"scroll",(i,r)=>{const o=r.target,a=e&&o.contains(e),l=n&&o.contains(n);(a||l||!e||!n)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(P.window,"resize",()=>{this.attachTo(t)})}_stopPinning(){this.stopListening(P.document,"scroll"),this.stopListening(P.window,"resize")}}et.arrowSideOffset=25;et.arrowHeightOffset=10;et.stickyVerticalOffset=20;et._getOptimalPosition=yn;et.defaultPositions=Bo();function nn(s){return vn(s)?s:Yr(s)?s.commonAncestorContainer:typeof s=="function"?nn(s()):null}function Bo(s={}){const{sideOffset:t=et.arrowSideOffset,heightOffset:e=et.arrowHeightOffset,stickyVerticalOffset:n=et.stickyVerticalOffset,config:i}=s;return{northWestArrowSouthWest:(a,l)=>({top:r(a,l),left:a.left-t,name:"arrow_sw",...i&&{config:i}}),northWestArrowSouthMiddleWest:(a,l)=>({top:r(a,l),left:a.left-l.width*.25-t,name:"arrow_smw",...i&&{config:i}}),northWestArrowSouth:(a,l)=>({top:r(a,l),left:a.left-l.width/2,name:"arrow_s",...i&&{config:i}}),northWestArrowSouthMiddleEast:(a,l)=>({top:r(a,l),left:a.left-l.width*.75+t,name:"arrow_sme",...i&&{config:i}}),northWestArrowSouthEast:(a,l)=>({top:r(a,l),left:a.left-l.width+t,name:"arrow_se",...i&&{config:i}}),northArrowSouthWest:(a,l)=>({top:r(a,l),left:a.left+a.width/2-t,name:"arrow_sw",...i&&{config:i}}),northArrowSouthMiddleWest:(a,l)=>({top:r(a,l),left:a.left+a.width/2-l.width*.25-t,name:"arrow_smw",...i&&{config:i}}),northArrowSouth:(a,l)=>({top:r(a,l),left:a.left+a.width/2-l.width/2,name:"arrow_s",...i&&{config:i}}),northArrowSouthMiddleEast:(a,l)=>({top:r(a,l),left:a.left+a.width/2-l.width*.75+t,name:"arrow_sme",...i&&{config:i}}),northArrowSouthEast:(a,l)=>({top:r(a,l),left:a.left+a.width/2-l.width+t,name:"arrow_se",...i&&{config:i}}),northEastArrowSouthWest:(a,l)=>({top:r(a,l),left:a.right-t,name:"arrow_sw",...i&&{config:i}}),northEastArrowSouthMiddleWest:(a,l)=>({top:r(a,l),left:a.right-l.width*.25-t,name:"arrow_smw",...i&&{config:i}}),northEastArrowSouth:(a,l)=>({top:r(a,l),left:a.right-l.width/2,name:"arrow_s",...i&&{config:i}}),northEastArrowSouthMiddleEast:(a,l)=>({top:r(a,l),left:a.right-l.width*.75+t,name:"arrow_sme",...i&&{config:i}}),northEastArrowSouthEast:(a,l)=>({top:r(a,l),left:a.right-l.width+t,name:"arrow_se",...i&&{config:i}}),southWestArrowNorthWest:a=>({top:o(a),left:a.left-t,name:"arrow_nw",...i&&{config:i}}),southWestArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.left-l.width*.25-t,name:"arrow_nmw",...i&&{config:i}}),southWestArrowNorth:(a,l)=>({top:o(a),left:a.left-l.width/2,name:"arrow_n",...i&&{config:i}}),southWestArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.left-l.width*.75+t,name:"arrow_nme",...i&&{config:i}}),southWestArrowNorthEast:(a,l)=>({top:o(a),left:a.left-l.width+t,name:"arrow_ne",...i&&{config:i}}),southArrowNorthWest:a=>({top:o(a),left:a.left+a.width/2-t,name:"arrow_nw",...i&&{config:i}}),southArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width*.25-t,name:"arrow_nmw",...i&&{config:i}}),southArrowNorth:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width/2,name:"arrow_n",...i&&{config:i}}),southArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width*.75+t,name:"arrow_nme",...i&&{config:i}}),southArrowNorthEast:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width+t,name:"arrow_ne",...i&&{config:i}}),southEastArrowNorthWest:a=>({top:o(a),left:a.right-t,name:"arrow_nw",...i&&{config:i}}),southEastArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.right-l.width*.25-t,name:"arrow_nmw",...i&&{config:i}}),southEastArrowNorth:(a,l)=>({top:o(a),left:a.right-l.width/2,name:"arrow_n",...i&&{config:i}}),southEastArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.right-l.width*.75+t,name:"arrow_nme",...i&&{config:i}}),southEastArrowNorthEast:(a,l)=>({top:o(a),left:a.right-l.width+t,name:"arrow_ne",...i&&{config:i}}),westArrowEast:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.left-l.width-e,name:"arrow_e",...i&&{config:i}}),eastArrowWest:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.right+e,name:"arrow_w",...i&&{config:i}}),viewportStickyNorth:(a,l,c,h)=>{const u=h||c;return!a.getIntersection(u)||u.height-a.height>n?null:{top:u.top+n,left:a.left+a.width/2-l.width/2,name:"arrowless",config:{withArrow:!1,...i}}}};function r(a,l){return a.top-l.height-e}function o(a){return a.bottom+e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const or="ck-tooltip";class z extends Vt(){constructor(t){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,this._mutationObserver=null,z._editors.add(t),z._instance)return z._instance;z._instance=this,this.tooltipTextView=new M(t.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new et(t.locale),this.balloonPanelView.class=or,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=zg(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=x0(this._pinTooltip,600),this.listenTo(P.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(P.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(P.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(P.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(P.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(t){const e=t.ui.view&&t.ui.view.body;z._editors.delete(t),this.stopListening(t.ui),e&&e.has(this.balloonPanelView)&&e.remove(this.balloonPanelView),z._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),z._instance=null)}static getPositioningFunctions(t){const e=z.defaultBalloonPositions;return{s:[e.southArrowNorth,e.southArrowNorthEast,e.southArrowNorthWest],n:[e.northArrowSouth],e:[e.eastArrowWest],w:[e.westArrowEast],sw:[e.southArrowNorthEast],se:[e.southArrowNorthWest]}[t]}_onEnterOrFocus(t,{target:e}){const n=Fs(e);n&&n!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(n,ar(n)))}_onLeaveOrBlur(t,{target:e,relatedTarget:n}){if(t.name==="mouseleave"){if(!vn(e)||this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;const i=Fs(e),r=Fs(n);i&&i!==r&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&e!==this._currentElementWithTooltip)return;this._unpinTooltip()}}_onScroll(t,{target:e}){this._currentElementWithTooltip&&(e.contains(this.balloonPanelView.element)&&e.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(t,{text:e,position:n,cssClass:i}){const r=Pn(z._editors.values()).ui.view.body;r.has(this.balloonPanelView)||r.add(this.balloonPanelView),this.tooltipTextView.text=e,this.balloonPanelView.pin({target:t,positions:z.getPositioningFunctions(n)}),this._resizeObserver=new O(t,()=>{Js(t)||this._unpinTooltip()}),this._mutationObserver.attach(t),this.balloonPanelView.class=[or,i].filter(o=>o).join(" ");for(const o of z._editors)this.listenTo(o.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=t,this._currentTooltipPosition=n}_unpinTooltip(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const t of z._editors)this.stopListening(t.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}_updateTooltipPosition(){const t=ar(this._currentElementWithTooltip);if(!Js(this._currentElementWithTooltip)||!t.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:z.getPositioningFunctions(t.position)})}}z.defaultBalloonPositions=Bo({heightOffset:5,sideOffset:13});z._editors=new Set;z._instance=null;function Fs(s){return vn(s)?s.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function ar(s){return{text:s.dataset.ckeTooltipText,position:s.dataset.ckeTooltipPosition||"s",cssClass:s.dataset.ckeTooltipClass||""}}function zg(s){const t=new MutationObserver(()=>{s()});return{attach(e){t.observe(e,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){t.disconnect()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lr extends so{static get pluginName(){return"Notification"}init(){this.on("show:warning",(t,e)=>{window.alert(e.message)},{priority:"lowest"})}showSuccess(t,e={}){this._showNotification({message:t,type:"success",namespace:e.namespace,title:e.title})}showInfo(t,e={}){this._showNotification({message:t,type:"info",namespace:e.namespace,title:e.title})}showWarning(t,e={}){this._showNotification({message:t,type:"warning",namespace:e.namespace,title:e.title})}_showNotification(t){const e=t.namespace?`show:${t.type}:${t.namespace}`:`show:${t.type}`;this.fire(e,{message:t.message,type:t.type,title:t.title||""})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ug extends Ro{constructor(t,e){const n=t.t,i=Object.assign({},{showResetButton:!0,showIcon:!0,creator:No},e);super(t,i.creator),this.label=e.label,this._viewConfig=i,this._viewConfig.showIcon&&(this.iconView=new Nt,this.iconView.content=Zt.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new it(t),this.resetButtonView.set({label:n("Clear"),icon:Zt.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",r=>!r),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wg extends M{constructor(){super();const t=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",t.if("isVisible","ck-hidden",e=>!e)],tabindex:-1},children:[{tag:"span",children:[{text:[t.to("primaryText")]}]},{tag:"span",children:[{text:[t.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qg extends M{constructor(t){super(t),this.children=this.createCollection(),this.focusTracker=new kt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new te({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const t of this.children)this.focusTracker.add(t.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zg extends M{constructor(t,e){super(t),this._config=e,this.filteredView=e.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new kt,this.keystrokes=new Yt,this.resultsView=new qg(t),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),e.infoView&&e.infoView.instance?this.infoView=e.infoView.instance:(this.infoView=new Wg,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new te({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(n,{resultsCount:i,totalItemsCount:r})=>{this.resultsCount=i,this.totalItemsCount=r}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",e.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const t=e=>e.stopPropagation();for(const e of this.focusableChildren)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search("")}search(t){const e=t?new RegExp(k0(t),"ig"):null,n=this.filteredView.filter(e);this.fire("search",{query:t,...n})}_createSearchTextQueryView(){const t=new Ug(this.locale,this._config.queryView);return this.listenTo(t.fieldView,"input",()=>{this.search(t.fieldView.element.value)}),t.on("reset",()=>this.reset()),t.bind("isEnabled").to(this),t}_enableDefaultInfoViewBehavior(){const t=this.locale.t,e=this.infoView;this.on("search",(i,r)=>{if(r.resultsCount)e.set({isVisible:!1});else{const o=this._config.infoView&&this._config.infoView.text;let a,l;r.totalItemsCount?o&&o.notFound?(a=o.notFound.primary,l=o.notFound.secondary):(a=t("No results found"),l=""):o&&o.noSearchableItems?(a=o.noSearchableItems.primary,l=o.noSearchableItems.secondary):(a=t("No searchable items"),l=""),e.set({primaryText:n(a,r),secondaryText:n(l,r),isVisible:!0})}});function n(i,{query:r,resultsCount:o,totalItemsCount:a}){return typeof i=="function"?i(r,o,a):i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fe extends Zg{constructor(t,e){super(t,e),this._config=e;const n=bn("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const i=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[i.if("isVisible","ck-hidden",r=>!r),i.to("_position",r=>`ck-search__results_${r}`)],style:{width:i.to("_width",n)}}}),this.focusTracker.on("change:isFocused",(r,o,a)=>{this._updateResultsVisibility(),a?this.resultsView.element.scrollTop=0:e.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(r,o)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,o())}),this.listenTo(P.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(r,{value:o})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=o,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new U(this.queryView.fieldView.element).width;const t=Fe._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:Fe.defaultResultsPositions});this.resultsView._position=t?t.name:"s"}_updateResultsVisibility(){const t=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,e=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&e>=t}}Fe.defaultResultsPositions=[s=>({top:s.bottom,left:s.left,name:"s"}),(s,t)=>({top:s.top-t.height,left:s.left,name:"n"})];Fe._getOptimalPosition=yn;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jg extends C(){constructor(){super(...arguments),this._stack=[]}add(t,e){const n=this._stack,i=n[0];this._insertDescriptor(t);const r=n[0];i!==r&&!Ds(i,r)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:r,writer:e})}remove(t,e){const n=this._stack,i=n[0];this._removeDescriptor(t);const r=n[0];i!==r&&!Ds(i,r)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:r,writer:e})}_insertDescriptor(t){const e=this._stack,n=e.findIndex(r=>r.id===t.id);if(Ds(t,e[n]))return;n>-1&&e.splice(n,1);let i=0;for(;e[i]&&Gg(e[i],t);)i++;e.splice(i,0,t)}_removeDescriptor(t){const e=this._stack,n=e.findIndex(i=>i.id===t);n>-1&&e.splice(n,1)}}function Ds(s,t){return s&&t&&s.priority==t.priority&&us(s.classes)==us(t.classes)}function Gg(s,t){return s.priority>t.priority?!0:s.priority<t.priority?!1:us(s.classes)>us(t.classes)}function us(s){return Array.isArray(s)?s.sort().join(","):s}const Jg="data:image/svg+xml,%3csvg%20viewBox='0%200%2016%2016'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4%200v1H1v3H0V.5A.5.5%200%200%201%20.5%200H4zm8%200h3.5a.5.5%200%200%201%20.5.5V4h-1V1h-3V0zM4%2016H.5a.5.5%200%200%201-.5-.5V12h1v3h3v1zm8%200v-1h3v-3h1v3.5a.5.5%200%200%201-.5.5H12z'/%3e%3cpath%20fill-opacity='.256'%20d='M1%201h14v14H1z'/%3e%3cg%20class='ck-icon__selected-indicator'%3e%3cpath%20d='M7%200h2v1H7V0zM0%207h1v2H0V7zm15%200h1v2h-1V7zm-8%208h2v1H7v-1z'/%3e%3cpath%20fill-opacity='.254'%20d='M1%201h14v14H1z'/%3e%3c/g%3e%3c/svg%3e";/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Kg="ck-widget";function Yg(s){return s.is("element")?!!s.getCustomProperty("widget"):!1}function Xg(s,t,e={}){if(!s.is("containerElement"))throw new f("widget-to-widget-wrong-element-type",null,{element:s});return t.setAttribute("contenteditable","false",s),t.addClass(Kg,s),t.setCustomProperty("widget",!0,s),s.getFillerOffset=im,t.setCustomProperty("widgetLabel",[],s),e.label&&sm(s,e.label),e.hasSelectionHandle&&rm(s,t),em(s,t),s}function Qg(s,t,e){if(t.classes&&e.addClass(K(t.classes),s),t.attributes)for(const n in t.attributes)e.setAttribute(n,t.attributes[n],s)}function tm(s,t,e){if(t.classes&&e.removeClass(K(t.classes),s),t.attributes)for(const n in t.attributes)e.removeAttribute(n,s)}function em(s,t,e=Qg,n=tm){const i=new jg;i.on("change:top",(a,l)=>{l.oldDescriptor&&n(s,l.oldDescriptor,l.writer),l.newDescriptor&&e(s,l.newDescriptor,l.writer)});const r=(a,l,c)=>i.add(l,c),o=(a,l,c)=>i.remove(l,c);t.setCustomProperty("addHighlight",r,s),t.setCustomProperty("removeHighlight",o,s)}function sm(s,t){s.getCustomProperty("widgetLabel").push(t)}function nm(s,t){const e=s.getSelectedElement();if(e){const n=am(s);if(n)return t.createRange(t.createPositionAt(e,n))}return t.schema.findOptimalInsertionRange(s)}function im(){return null}function rm(s,t){const e=t.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(n){const i=this.toDomElement(n),r=new Nt;return r.set("content",Jg),r.render(),i.appendChild(r.element),i});t.insert(t.createPositionAt(s,0),e),t.addClass(["ck-widget_with-selection-handle"],s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const om="widget-type-around";function am(s){return s.getAttribute(om)}const lm="data:image/svg+xml,%3csvg%20viewBox='0%200%2010%208'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.055.263v3.972h-6.77M1%204.216l2-2.038m-2%202%202%202.038'/%3e%3c/svg%3e";/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */new DOMParser().parseFromString(lm,"image/svg+xml").firstChild;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cm(s,t){const e=Pn(t.getSelectedBlocks());return!e||s.isObject(e)||e.isEmpty&&e.name!="listItem"?"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hm=/^(image|image-inline)$/;class Fo extends rt{constructor(){super(...arguments),this._domEmitter=new(Vt())}static get pluginName(){return"ImageUtils"}isImage(t){return this.isInlineImage(t)||this.isBlockImage(t)}isInlineImageView(t){return!!t&&t.is("element","img")}isBlockImageView(t){return!!t&&t.is("element","figure")&&t.hasClass("image")}insertImage(t={},e=null,n=null,i={}){const r=this.editor,o=r.model,a=o.document.selection,l=Do(r,e||a,n);t={...Object.fromEntries(a.getAttributes()),...t};for(const c in t)o.schema.checkAttribute(l,c)||delete t[c];return o.change(c=>{const{setImageSizes:h=!0}=i,u=c.createElement(l,t);return o.insertObject(u,e,null,{setSelection:"on",findOptimalPosition:!e&&l!="imageInline"?"auto":void 0}),u.parent?(h&&this.setImageNaturalSizeAttributes(u),u):null})}setImageNaturalSizeAttributes(t){const e=t.getAttribute("src");e&&(t.getAttribute("width")||t.getAttribute("height")||this.editor.model.change(n=>{const i=new P.window.Image;this._domEmitter.listenTo(i,"load",()=>{!t.getAttribute("width")&&!t.getAttribute("height")&&this.editor.model.enqueueChange(n.batch,r=>{r.setAttribute("width",i.naturalWidth,t),r.setAttribute("height",i.naturalHeight,t)}),this._domEmitter.stopListening(i,"load")}),i.src=e}))}getClosestSelectedImageWidget(t){const e=t.getFirstPosition();if(!e)return null;const n=t.getSelectedElement();if(n&&this.isImageWidget(n))return n;let i=e.parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(t){const e=t.getSelectedElement();return this.isImage(e)?e:t.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(t){return t.findAncestor({classes:hm})}isImageAllowed(){const e=this.editor.model.document.selection;return um(this.editor,e)&&fm(e)}toImageWidget(t,e,n){return e.setCustomProperty("image",!0,t),Xg(t,e,{label:()=>{const o=this.findViewImgElement(t).getAttribute("alt");return o?`${o} ${n}`:n}})}isImageWidget(t){return!!t.getCustomProperty("image")&&Yg(t)}isBlockImage(t){return!!t&&t.is("element","imageBlock")}isInlineImage(t){return!!t&&t.is("element","imageInline")}findViewImgElement(t){if(this.isInlineImageView(t))return t;const e=this.editor.editing.view;for(const{item:n}of e.createRangeIn(t))if(this.isInlineImageView(n))return n}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function um(s,t){if(Do(s,t,null)=="imageBlock"){const n=dm(t,s.model);if(s.model.schema.checkChild(n,"imageBlock"))return!0}else if(s.model.schema.checkChild(t.focus,"imageInline"))return!0;return!1}function fm(s){return[...s.focus.getAncestors()].every(t=>!t.is("element","imageBlock"))}function dm(s,t){const n=nm(s,t).start.parent;return n.isEmpty&&!n.is("element","$root")?n.parent:n}function Do(s,t,e){const n=s.model.schema,i=s.config.get("image.insert.type");return s.plugins.has("ImageBlockEditing")?s.plugins.has("ImageInlineEditing")?e||(i==="inline"?"imageInline":i!=="auto"?"imageBlock":t.is("selection")?cm(n,t):n.checkChild(t,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gm extends M{constructor(t,e=[]){super(t),this.focusTracker=new kt,this.keystrokes=new Yt,this._focusables=new de,this.children=this.createCollection(),this._focusCycler=new te({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const n of e)this.children.add(n),this._focusables.add(n),n instanceof Mo&&this._focusables.addMany(n.children);if(this._focusables.length>1)for(const n of this._focusables)mm(n)&&(n.focusCycler.on("forwardCycle",i=>{this._focusCycler.focusNext(),i.stop()}),n.focusCycler.on("backwardCycle",i=>{this._focusCycler.focusPrevious(),i.stop()}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),K2({view:this});for(const e of this._focusables)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element);const t=e=>e.stopPropagation();this.keystrokes.set("arrowright",t),this.keystrokes.set("arrowleft",t),this.keystrokes.set("arrowup",t),this.keystrokes.set("arrowdown",t)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}function mm(s){return"focusCycler"in s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nn extends rt{static get pluginName(){return"ImageInsertUI"}static get requires(){return[Fo]}constructor(t){super(t),this._integrations=new Map,t.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const t=this.editor,e=t.model.document.selection,n=t.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(t.model.document,"change",()=>{this.isImageSelected=n.isImage(e.getSelectedElement())});const i=r=>this._createToolbarComponent(r);t.ui.componentFactory.add("insertImage",i),t.ui.componentFactory.add("imageInsert",i)}registerIntegration({name:t,observable:e,buttonViewCreator:n,formViewCreator:i,requiresForm:r}){this._integrations.has(t)&&J("image-insert-integration-exists",{name:t}),this._integrations.set(t,{observable:e,buttonViewCreator:n,formViewCreator:i,requiresForm:!!r})}_createToolbarComponent(t){const e=this.editor,n=t.t,i=this._prepareIntegrations();if(!i.length)return null;let r;const o=i[0];if(i.length==1){if(!o.requiresForm)return o.buttonViewCreator(!0);r=o.buttonViewCreator(!0)}else{const c=o.buttonViewCreator(!1);r=new Oo(t,c),r.tooltip=!0,r.bind("label").to(this,"isImageSelected",h=>n(h?"Replace image":"Insert image"))}const a=this.dropdownView=Cg(t,r),l=i.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(h=>h)),a.once("change:isOpen",()=>{const c=i.map(({formViewCreator:u})=>u(i.length==1)),h=new gm(e.locale,c);a.panelView.children.add(h)}),a}_prepareIntegrations(){const e=this.editor.config.get("image.insert.integrations"),n=[];if(!e.length)return J("image-insert-integrations-not-specified"),n;for(const i of e){if(!this._integrations.has(i)){["upload","assetManager","url"].includes(i)||J("image-insert-unknown-integration",{item:i});continue}n.push(this._integrations.get(i))}return n.length||J("image-insert-integrations-not-registered"),n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pm extends W(){constructor(){super();const t=new window.FileReader;this._reader=t,this._data=void 0,this.set("loaded",0),t.onprogress=e=>{this.loaded=e.loaded}}get error(){return this._reader.error}get data(){return this._data}read(t){const e=this._reader;return this.total=t.size,new Promise((n,i)=>{e.onload=()=>{const r=e.result;this._data=r,n(r)},e.onerror=()=>{i("error")},e.onabort=()=>{i("aborted")},this._reader.readAsDataURL(t)})}abort(){this._reader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ee extends rt{constructor(){super(...arguments),this.loaders=new Kt,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[Gi]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(t,e)=>e?t/e*100:0)}getLoader(t){return this._loadersMap.get(t)||null}createLoader(t){if(!this.createUploadAdapter)return J("filerepository-no-upload-adapter"),null;const e=new cr(Promise.resolve(t),this.createUploadAdapter);return this.loaders.add(e),this._loadersMap.set(t,e),t instanceof Promise&&e.file.then(n=>{this._loadersMap.set(n,e)}).catch(()=>{}),e.on("change:uploaded",()=>{let n=0;for(const i of this.loaders)n+=i.uploaded;this.uploaded=n}),e.on("change:uploadTotal",()=>{let n=0;for(const i of this.loaders)i.uploadTotal&&(n+=i.uploadTotal);this.uploadTotal=n}),e}destroyLoader(t){const e=t instanceof cr?t:this.getLoader(t);e._destroy(),this.loaders.remove(e),this._loadersMap.forEach((n,i)=>{n===e&&this._loadersMap.delete(i)})}_updatePendingAction(){const t=this.editor.plugins.get(Gi);if(this.loaders.length){if(!this._pendingAction){const e=this.editor.t,n=i=>`${e("Upload in progress")} ${parseInt(i)}%.`;this._pendingAction=t.add(n(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",n)}}else t.remove(this._pendingAction),this._pendingAction=null}}class cr extends W(){constructor(t,e){super(),this.id=mt(),this._filePromiseWrapper=this._createFilePromiseWrapper(t),this._adapter=e(this),this._reader=new pm,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,i)=>i?n/i*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(t=>this._filePromiseWrapper?t:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new f("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(t=>this._reader.read(t)).then(t=>{if(this.status!=="reading")throw this.status;return this.status="idle",t}).catch(t=>{throw t==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:t)})}upload(){if(this.status!="idle")throw new f("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(t=>(this.uploadResponse=t,this.status="idle",t)).catch(t=>{throw this.status==="aborted"?"aborted":(this.status="error",t)})}abort(){const t=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?t=="reading"?this._reader.abort():t=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(t){const e={};return e.promise=new Promise((n,i)=>{e.rejecter=i,e.isFulfilled=!1,t.then(r=>{e.isFulfilled=!0,n(r)}).catch(r=>{e.isFulfilled=!0,i(r)})}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wm extends it{constructor(t){super(t),this.buttonView=this,this._fileInputView=new _m(t),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}class _m extends M{constructor(t){super(t),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const e=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:e.to("acceptedType"),multiple:e.to("allowMultipleFiles")},on:{change:e.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lo(s){const t=s.map(e=>e.replace("+","\\+"));return new RegExp(`^image\\/(${t.join("|")})$`)}function vm(s){return new Promise((t,e)=>{const n=s.getAttribute("src");fetch(n).then(i=>i.blob()).then(i=>{const r=$o(i,n),a=`image.${r.replace("image/","")}`,l=new File([i],a,{type:r});t(l)}).catch(i=>i&&i.name==="TypeError"?ym(n).then(t).catch(e):e(i))})}function bm(s,t){return!s.isInlineImageView(t)||!t.getAttribute("src")?!1:!!t.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!t.getAttribute("src").match(/^blob:/g)}function $o(s,t){return s.type?s.type:t.match(/data:(image\/\w+);base64/)?t.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function ym(s){return Pm(s).then(t=>{const e=$o(t,s),i=`image.${e.replace("image/","")}`;return new File([t],i,{type:e})})}function Pm(s){return new Promise((t,e)=>{const n=P.document.createElement("img");n.addEventListener("load",()=>{const i=P.document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0),i.toBlob(o=>o?t(o):e())}),n.addEventListener("error",()=>e()),n.src=s})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tm extends rt{static get pluginName(){return"ImageUploadUI"}init(){const t=this.editor,e=t.t,n=i=>{const r=new wm(i),o=t.commands.get("uploadImage"),a=t.config.get("image.upload.types"),l=Lo(a);return r.set({acceptedType:a.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:e("Upload image from computer"),icon:Zt.imageUpload,tooltip:!0}),r.bind("isEnabled").to(o),r.on("done",(c,h)=>{const u=Array.from(h).filter(g=>l.test(g.type));u.length&&(t.execute("uploadImage",{file:u}),t.editing.view.focus())}),r};if(t.ui.componentFactory.add("uploadImage",n),t.ui.componentFactory.add("imageUpload",n),t.plugins.has("ImageInsertUI")){const i=t.plugins.get("ImageInsertUI");i.registerIntegration({name:"upload",observable:()=>t.commands.get("uploadImage"),buttonViewCreator:()=>{const r=t.ui.componentFactory.create("uploadImage");return r.bind("label").to(i,"isImageSelected",o=>e(o?"Replace image from computer":"Upload image from computer")),r},formViewCreator:()=>{const r=t.ui.componentFactory.create("uploadImage");return r.withText=!0,r.bind("label").to(i,"isImageSelected",o=>e(o?"Replace from computer":"Upload from computer")),r.on("execute",()=>{i.dropdownView.isOpen=!1}),r}})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xm extends rt{static get pluginName(){return"ImageUploadProgress"}constructor(t){super(t),this.uploadStatusChange=(e,n,i)=>{const r=this.editor,o=n.item,a=o.getAttribute("uploadId");if(!i.consumable.consume(n.item,e.name))return;const l=r.plugins.get("ImageUtils"),c=r.plugins.get(Ee),h=a?n.attributeNewValue:null,u=this.placeholder,g=r.editing.mapper.toViewElement(o),p=i.writer;if(h=="reading"){hr(g,p),ur(l,u,g,p);return}if(h=="uploading"){const y=c.loaders.get(a);hr(g,p),y?(fr(g,p),Em(g,p,y,r.editing.view),Im(l,g,p,y)):ur(l,u,g,p);return}h=="complete"&&c.loaders.get(a)&&Cm(g,p,r.editing.view),km(g,p),fr(g,p),Am(g,p)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const t=this.editor;t.plugins.has("ImageBlockEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),t.plugins.has("ImageInlineEditing")&&t.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function hr(s,t){s.hasClass("ck-appear")||t.addClass("ck-appear",s)}function Am(s,t){t.removeClass("ck-appear",s)}function ur(s,t,e,n){e.hasClass("ck-image-upload-placeholder")||n.addClass("ck-image-upload-placeholder",e);const i=s.findViewImgElement(e);i.getAttribute("src")!==t&&n.setAttribute("src",t,i),Ho(e,"placeholder")||n.insert(n.createPositionAfter(i),Sm(n))}function fr(s,t){s.hasClass("ck-image-upload-placeholder")&&t.removeClass("ck-image-upload-placeholder",s),zo(s,t,"placeholder")}function Em(s,t,e,n){const i=Mm(t);t.insert(t.createPositionAt(s,"end"),i),e.on("change:uploadedPercent",(r,o,a)=>{n.change(l=>{l.setStyle("width",a+"%",i)})})}function km(s,t){zo(s,t,"progressBar")}function Cm(s,t,e){const n=t.createUIElement("div",{class:"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(s,"end"),n),setTimeout(()=>{e.change(i=>i.remove(i.createRangeOn(n)))},3e3)}function Mm(s){const t=s.createUIElement("div",{class:"ck-progress-bar"});return s.setCustomProperty("progressBar",!0,t),t}function Sm(s){const t=s.createUIElement("div",{class:"ck-upload-placeholder-loader"});return s.setCustomProperty("placeholder",!0,t),t}function Ho(s,t){for(const e of s.getChildren())if(e.getCustomProperty(t))return e}function zo(s,t,e){const n=Ho(s,e);n&&t.remove(t.createRangeOn(n))}function Im(s,t,e,n){if(n.data){const i=s.findViewImgElement(t);e.setAttribute("src",n.data,i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rm extends hf{refresh(){const t=this.editor,e=t.plugins.get("ImageUtils"),n=t.model.document.selection.getSelectedElement();this.isEnabled=e.isImageAllowed()||e.isImage(n)}execute(t){const e=K(t.file),n=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(n.getAttributes());e.forEach((o,a)=>{const l=n.getSelectedElement();if(a&&l&&i.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(o,r,c)}else this._uploadImage(o,r)})}_uploadImage(t,e,n){const i=this.editor,o=i.plugins.get(Ee).createLoader(t),a=i.plugins.get("ImageUtils");o&&a.insertImage({...e,uploadId:o.id},n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vm extends rt{static get requires(){return[Ee,lr,G2,Fo]}static get pluginName(){return"ImageUploadEditing"}constructor(t){super(t),t.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const t=this.editor,e=t.model.document,n=t.conversion,i=t.plugins.get(Ee),r=t.plugins.get("ImageUtils"),o=t.plugins.get("ClipboardPipeline"),a=Lo(t.config.get("image.upload.types")),l=new Rm(t);t.commands.add("uploadImage",l),t.commands.add("imageUpload",l),n.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(t.editing.view.document,"clipboardInput",(c,h)=>{if(Om(h.dataTransfer))return;const u=Array.from(h.dataTransfer.files).filter(g=>g?a.test(g.type):!1);u.length&&(c.stop(),t.model.change(g=>{h.targetRanges&&g.setSelection(h.targetRanges.map(p=>t.editing.mapper.toModelRange(p))),t.execute("uploadImage",{file:u})}))}),this.listenTo(o,"inputTransformation",(c,h)=>{const u=Array.from(t.editing.view.createRangeIn(h.content)).map(p=>p.item).filter(p=>bm(r,p)&&!p.getAttribute("uploadProcessed")).map(p=>({promise:vm(p),imageElement:p}));if(!u.length)return;const g=new Vd(t.editing.view.document);for(const p of u){g.setAttribute("uploadProcessed",!0,p.imageElement);const y=i.createLoader(p.promise);y&&(g.setAttribute("src","",p.imageElement),g.setAttribute("uploadId",y.id,p.imageElement))}}),t.editing.view.document.on("dragover",(c,h)=>{h.preventDefault()}),e.on("change",()=>{const c=e.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),h=new Set;for(const u of c)if(u.type=="insert"&&u.name!="$text"){const g=u.position.nodeAfter,p=u.position.root.rootName=="$graveyard";for(const y of Nm(t,g)){const E=y.getAttribute("uploadId");if(!E)continue;const k=i.loaders.get(E);k&&(p?h.has(E)||k.abort():(h.add(E),this._uploadImageElements.set(E,y),k.status=="idle"&&this._readAndUpload(k)))}}}),this.on("uploadComplete",(c,{imageElement:h,data:u})=>{const g=u.urls?u.urls:u;this.editor.model.change(p=>{p.setAttribute("src",g.default,h),this._parseAndSetSrcsetAttributeOnImage(g,h,p),r.setImageNaturalSizeAttributes(h)})},{priority:"low"})}afterInit(){const t=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&t.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(t){const e=this.editor,n=e.model,i=e.locale.t,r=e.plugins.get(Ee),o=e.plugins.get(lr),a=e.plugins.get("ImageUtils"),l=this._uploadImageElements;return n.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","reading",l.get(t.id))}),t.read().then(()=>{const h=t.upload(),u=l.get(t.id);/* istanbul ignore next -- @preserve */if(Ut.isSafari){const g=e.editing.mapper.toViewElement(u),p=a.findViewImgElement(g);e.editing.view.once("render",()=>{if(!p.parent)return;const y=e.editing.view.domConverter.mapViewToDom(p.parent);if(!y)return;const E=y.style.display;y.style.display="none",y._ckHack=y.offsetHeight,y.style.display=E})}return n.enqueueChange({isUndoable:!1},g=>{g.setAttribute("uploadStatus","uploading",u)}),h}).then(h=>{n.enqueueChange({isUndoable:!1},u=>{const g=l.get(t.id);u.setAttribute("uploadStatus","complete",g),this.fire("uploadComplete",{data:h,imageElement:g})}),c()}).catch(h=>{if(t.status!=="error"&&t.status!=="aborted")throw h;t.status=="error"&&h&&o.showWarning(h,{title:i("Upload failed"),namespace:"upload"}),n.enqueueChange({isUndoable:!1},u=>{u.remove(l.get(t.id))}),c()});function c(){n.enqueueChange({isUndoable:!1},h=>{const u=l.get(t.id);h.removeAttribute("uploadId",u),h.removeAttribute("uploadStatus",u),l.delete(t.id)}),r.destroyLoader(t)}}_parseAndSetSrcsetAttributeOnImage(t,e,n){let i=0;const r=Object.keys(t).filter(o=>{const a=parseInt(o,10);if(!isNaN(a))return i=Math.max(i,a),!0}).map(o=>`${t[o]} ${o}w`).join(", ");if(r!=""){const o={srcset:r};!e.hasAttribute("width")&&!e.hasAttribute("height")&&(o.width=i),n.setAttributes(o,e)}}}function Om(s){return Array.from(s.types).includes("text/html")&&s.getData("text/html")!==""}function Nm(s,t){const e=s.plugins.get("ImageUtils");return Array.from(s.model.createRangeOn(t)).filter(n=>e.isImage(n.item)).map(n=>n.item)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bm extends rt{static get pluginName(){return"ImageUpload"}static get requires(){return[Vm,Tm,xm]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fm extends M{constructor(t){super(t),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.focusTracker=new kt,this.keystrokes=new Yt,this._focusables=new de,this.focusCycler=new te({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.urlInputView=this._createUrlInputView(),this.insertButtonView=this._createInsertButton(),this.cancelButtonView=this._createCancelButton(),this._focusables.addMany([this.urlInputView,this.insertButtonView,this.cancelButtonView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-image-insert-url"]},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]},children:[this.insertButtonView,this.cancelButtonView]}]})}render(){super.render();for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const t=this.locale,e=t.t,n=new Ro(t,No);return n.bind("label").to(this,"isImageSelected",i=>e(i?"Update image URL":"Insert image via URL")),n.bind("isEnabled").to(this),n.fieldView.placeholder="https://example.com/image.png",n.fieldView.bind("value").to(this,"imageURLInputValue",i=>i||""),n.fieldView.on("input",()=>{this.imageURLInputValue=n.fieldView.element.value.trim()}),n}_createInsertButton(){const t=this.locale,e=t.t,n=new it(t);return n.set({icon:Zt.check,class:"ck-button-save",type:"submit",withText:!0}),n.bind("label").to(this,"isImageSelected",i=>e(i?"Update":"Insert")),n.bind("isEnabled").to(this,"imageURLInputValue",this,"isEnabled",(...i)=>i.every(r=>r)),n.delegate("execute").to(this,"submit"),n}_createCancelButton(){const t=this.locale,e=t.t,n=new it(t);return n.set({label:e("Cancel"),icon:Zt.cancel,class:"ck-button-cancel",withText:!0}),n.bind("isEnabled").to(this),n.delegate("execute").to(this,"cancel"),n}focus(t){t===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dm extends rt{static get pluginName(){return"ImageInsertViaUrlUI"}static get requires(){return[Nn]}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),requiresForm:!0,buttonViewCreator:t=>this._createInsertUrlButton(t),formViewCreator:t=>this._createInsertUrlView(t)})}_createInsertUrlView(t){const e=this.editor,n=e.locale,i=n.t,r=e.commands.get("replaceImageSource"),o=e.commands.get("insertImage"),a=new Fm(n),l=t?null:new Mo(n,[a]);return a.bind("isImageSelected").to(this._imageInsertUI),a.bind("isEnabled").toMany([o,r],"isEnabled",(...c)=>c.some(h=>h)),a.imageURLInputValue=r.value||"",this._imageInsertUI.dropdownView.on("change:isOpen",()=>{this._imageInsertUI.dropdownView.isOpen&&(a.imageURLInputValue=r.value||"",l&&(l.isCollapsed=!0))},{priority:"low"}),a.on("submit",()=>{r.isEnabled?e.execute("replaceImageSource",{source:a.imageURLInputValue}):e.execute("insertImage",{source:a.imageURLInputValue}),this._closePanel()}),a.on("cancel",()=>this._closePanel()),l?(l.set({isCollapsed:!0}),l.bind("label").to(this._imageInsertUI,"isImageSelected",c=>i(c?"Update image URL":"Insert image via URL")),l):a}_createInsertUrlButton(t){const e=t?Vo:it,n=this.editor,i=new e(n.locale),r=n.locale.t;return i.set({icon:Zt.imageUrl,tooltip:!0}),i.bind("label").to(this._imageInsertUI,"isImageSelected",o=>r(o?"Update image URL":"Insert image via URL")),i}_closePanel(){this.editor.editing.view.focus(),this._imageInsertUI.dropdownView.isOpen=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lm extends rt{static get pluginName(){return"ImageInsertViaUrl"}static get requires(){return[Dm,Nn]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $m extends rt{static get pluginName(){return"ImageInsert"}static get requires(){return[Bm,Lm,Nn]}}var Hm={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"ahmomoz",BASE_URL:"/vue-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:zm,VITE_APIPATH:Um}=Hm,Wm={data(){return{drag:!1,article:{},editor:Wo,editorData:"",editorConfig:{dataProcessor:{writer:{enter:"<br>"}},plugins:[$m],toolbar:["insertImage"]},isLoading:!0,currentDate:new Date}},methods:{addArticle(){this.article.create_at=Math.floor(this.currentDate.getTime()/1e3),this.article.isPublic=this.article.isPublic||!1;const s=this.article;this.isLoading=!0,this.$axios.post(`${zm}/api/${Um}/admin/article`,{data:s}).then(t=>{this.isLoading=!1,this.$Swal.fire({position:"top-end",icon:"success",title:"新增成功",showConfirmButton:!1,timer:700}),this.$router.push("/dashboard/articles")}).catch(t=>{this.isLoading=!1,this.$Swal.fire({icon:"error",title:t.response.data.message})})},goBack(){this.$router.go(-1)}},mounted(){this.isLoading=!1},components:{Loading:Uo,VueDatePicker:qo}},qm={class:"container"},Zm=S("h1",{class:"fs-3 mt-3"},"新增文章",-1),jm={class:"mx-auto"},Gm={class:"card mt-4 shadow-sm"},Jm=S("div",{class:"card-header"},[S("h5",{class:"my-1"},"基本資訊")],-1),Km={class:"card-body"},Ym={class:"mb-3"},Xm=S("label",{for:"title",class:"form-label"},"*文章名稱",-1),Qm={class:"row"},tp={class:"mb-3 col-md-4"},ep=S("label",{for:"tag",class:"form-label"},"*標籤",-1),sp={class:"mb-3 col-md-4"},np=S("label",{for:"author",class:"form-label"},"*作者",-1),ip={class:"mb-3 col-md-4"},rp=S("label",{for:"create_at",class:"form-label"},"*建立時間",-1),op={class:"mb-3"},ap=S("label",{for:"content",class:"form-label"},"*文章內容",-1),lp={class:"mb-3"},cp={class:"form-check"},hp=S("label",{class:"form-check-label",for:"isPublic"},"是否公開",-1),up={class:"text-end mt-3 mb-5"};function fp(s,t,e,n,i,r){const o=Ps("loading"),a=Ps("VueDatePicker"),l=Ps("ckeditor");return Fn(),jo("div",qm,[Zm,S("div",jm,[i.isLoading?(Fn(),Go(o,{key:0,active:i.isLoading,"can-cancel":!1},null,8,["active"])):Jo("",!0),S("div",Gm,[Jm,S("div",Km,[S("div",Ym,[Xm,ze(S("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入文章名稱","onUpdate:modelValue":t[0]||(t[0]=c=>i.article.title=c)},null,512),[[Ts,i.article.title]])]),S("div",Qm,[S("div",tp,[ep,ze(S("input",{id:"tag",type:"text",class:"form-control",placeholder:"請輸入標籤","onUpdate:modelValue":t[1]||(t[1]=c=>i.article.tag=c)},null,512),[[Ts,i.article.tag]])]),S("div",sp,[np,ze(S("input",{id:"author",type:"text",class:"form-control",placeholder:"請輸入文章作者","onUpdate:modelValue":t[2]||(t[2]=c=>i.article.author=c)},null,512),[[Ts,i.article.author]])]),S("div",ip,[rp,Dn(a,{modelValue:i.currentDate,"onUpdate:modelValue":t[3]||(t[3]=c=>i.currentDate=c)},null,8,["modelValue"])])]),S("div",op,[ap,Dn(l,{editor:i.editor,modelValue:i.article.content,"onUpdate:modelValue":t[4]||(t[4]=c=>i.article.content=c),config:i.editorConfig},null,8,["editor","modelValue","config"])]),S("div",lp,[S("div",cp,[ze(S("input",{id:"isPublic",class:"form-check-input",type:"checkbox","true-value":!0,"false-value":!1,"onUpdate:modelValue":t[5]||(t[5]=c=>i.article.isPublic=c)},null,512),[[Ko,i.article.isPublic]]),hp])])])])]),S("div",up,[S("button",{type:"button",class:"btn btn-outline-secondary mx-2",onClick:t[6]||(t[6]=(...c)=>r.goBack&&r.goBack(...c))}," 取消 "),S("button",{type:"button",class:"btn btn-primary text-light",onClick:t[7]||(t[7]=(...c)=>r.addArticle&&r.addArticle(...c))}," 新增 ")])])}const Mp=Zo(Wm,[["render",fp]]);export{Mp as default};
