import{L as f}from"./index-RIvZXr4n.js";import{d as v}from"./vuedraggable.umd-3TuldhJb.js";import{_ as y,c,a as o,m as x,i as u,b as U,w,j as i,v as d,s as k,r as h,o as n}from"./index-CEKiAcMy.js";const V={data(){return{drag:!1,product:{imagesUrl:[]},isLoading:!0}},methods:{addProduct(){const l=this.product;this.isLoading=!0,this.$axios.post("https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/product",{data:l}).then(e=>{this.isLoading=!1,this.$Swal.fire({icon:"success",title:"新增成功"}),this.$router.push("/admin/products")}).catch(e=>{this.isLoading=!1,this.$Swal.fire({icon:"error",title:e.response.data.message})})},deleteAllImg(l){this.product.imagesUrl=[""]},deleteImg(l){this.product.imagesUrl.splice(l,1)},imgUrlUpdate(l){this.product.imagesUrl[0]===""?this.product.imagesUrl[0]=l:this.product.imagesUrl.push(l)},imgUpload(l){const e=l.target.files[0],m=new FormData;m.append("file-to-upload",e),this.$axios.post("https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/upload",m).then(a=>{const s=a.data.imageUrl;this.imgUrlUpdate(s)}).catch(a=>{this.$Swal.fire({icon:"error",title:a.response.data.message})})},changeCursor(l){const e=document.querySelector(".row.align-items-center");e&&(e.style.cursor=l?"move":"auto")},goBack(){this.$router.go(-1)}},mounted(){this.isLoading=!1},components:{Loading:f,draggable:v}},C={class:"container"},L=o("h1",{class:"fs-3 mt-3"},"新增產品",-1),B={class:"mx-auto"},A={class:"card mt-4 shadow-sm"},M=o("div",{class:"card-header"},[o("h5",{class:"my-1"},"圖片資訊")],-1),I={class:"card-body"},S={class:"mb-3"},P=o("p",null,"上傳圖片",-1),z={class:"border-dashed-blue mb-3"},D=o("p",{class:"m-0 text-primary px-2"},"*第一張圖為商品主圖",-1),N={key:0,class:"py-5 bg-light"},E=o("p",{class:"px-2"},"請上傳圖片",-1),j=[E],q={class:"mb-3",style:{"max-width":"160px"}},F=["onClick"],K={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash-circle-fill",viewBox:"0 0 16 16",style:{color:"rgb(180, 81, 81)"}},T=o("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1z"},null,-1),G=[T],H=["src"],J={class:"card mt-4 shadow-sm"},O=o("div",{class:"card-header"},[o("h5",{class:"my-1"},"基本資訊")],-1),Q={class:"card-body"},R={class:"mb-3"},W=o("label",{for:"title",class:"form-label"},"*標題",-1),X={class:"mb-3"},Y=o("label",{for:"feature",class:"form-label"},"*特色標語",-1),Z={class:"row"},$={class:"mb-3 col-md-6"},oo=o("label",{for:"nation",class:"form-label"},"*地區",-1),eo={class:"mb-3 col-md-6"},to=o("label",{for:"area",class:"form-label"},"*縣市",-1),so={class:"row"},lo={class:"mb-3 col-md-6"},io=o("label",{for:"category",class:"form-label"},"*分類",-1),ro={class:"mb-3 col-md-6"},no=o("label",{for:"price",class:"form-label"},"*單位",-1),co={class:"row"},ao={class:"mb-3 col-md-6"},uo=o("label",{for:"origin_price",class:"form-label"},"*原價",-1),mo={class:"mb-3 col-md-6"},po=o("label",{for:"price",class:"form-label"},"*售價",-1),ho=o("hr",null,null,-1),_o={class:"mb-3"},bo=o("label",{for:"description",class:"form-label"},"*產品描述",-1),go={class:"mb-3"},fo=o("label",{for:"content",class:"form-label"},"*說明內容",-1),vo={class:"mb-3"},yo={class:"form-check"},xo=o("label",{class:"form-check-label",for:"is_enabled"},"是否上架",-1),Uo={class:"text-end mt-3 mb-5"};function wo(l,e,m,a,s,r){const _=h("loading"),b=h("draggable");return n(),c("div",C,[L,o("div",B,[o("div",A,[M,o("div",I,[s.isLoading?(n(),x(_,{key:0,active:s.isLoading,"can-cancel":!1},null,8,["active"])):u("",!0),o("div",S,[P,o("input",{type:"file",id:"file",placeholder:"請輸入圖片連結",onChange:e[0]||(e[0]=t=>r.imgUpload(t))},null,32)]),o("div",z,[D,s.product.imagesUrl[0]?u("",!0):(n(),c("div",N,j)),U(b,{class:"row px-2",modelValue:s.product.imagesUrl,"onUpdate:modelValue":e[3]||(e[3]=t=>s.product.imagesUrl=t),group:"images",itemKey:"index",onStart:e[4]||(e[4]=t=>s.drag=!0),onEnd:e[5]||(e[5]=t=>s.drag=!1)},{item:w(({element:t,index:g})=>[o("div",q,[s.product.imagesUrl[0]?(n(),c("div",{key:0,class:"text-end",onClick:p=>r.deleteImg(g)},[(n(),c("svg",K,G))],8,F)):u("",!0),o("img",{class:"img-fluid",src:t,alt:"商品圖片",style:{height:"100px"},onMouseover:e[1]||(e[1]=p=>r.changeCursor(!0)),onMouseleave:e[2]||(e[2]=p=>r.changeCursor(!1))},null,40,H)])]),_:1},8,["modelValue"])]),s.product.imagesUrl[0]?(n(),c("button",{key:1,class:"btn btn-outline-primary btn-sm d-block w-100 mb-2",onClick:e[6]||(e[6]=(...t)=>r.deleteAllImg&&r.deleteAllImg(...t))}," 刪除所有圖片 ")):u("",!0)])]),o("div",J,[O,o("div",Q,[o("div",R,[W,i(o("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[7]||(e[7]=t=>s.product.title=t)},null,512),[[d,s.product.title]])]),o("div",X,[Y,i(o("input",{id:"feature",type:"text",class:"form-control",placeholder:"請輸入特色標語","onUpdate:modelValue":e[8]||(e[8]=t=>s.product.feature=t)},null,512),[[d,s.product.feature]])]),o("div",Z,[o("div",$,[oo,i(o("input",{id:"nation",type:"text",class:"form-control",placeholder:"請輸入地區","onUpdate:modelValue":e[9]||(e[9]=t=>s.product.nation=t)},null,512),[[d,s.product.nation]])]),o("div",eo,[to,i(o("input",{id:"area",type:"text",class:"form-control",placeholder:"請輸入縣市","onUpdate:modelValue":e[10]||(e[10]=t=>s.product.area=t)},null,512),[[d,s.product.area]])])]),o("div",so,[o("div",lo,[io,i(o("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[11]||(e[11]=t=>s.product.category=t)},null,512),[[d,s.product.category]])]),o("div",ro,[no,i(o("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[12]||(e[12]=t=>s.product.unit=t)},null,512),[[d,s.product.unit]])])]),o("div",co,[o("div",ao,[uo,i(o("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[13]||(e[13]=t=>s.product.origin_price=t)},null,512),[[d,s.product.origin_price,void 0,{number:!0}]])]),o("div",mo,[po,i(o("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[14]||(e[14]=t=>s.product.price=t)},null,512),[[d,s.product.price,void 0,{number:!0}]])])]),ho,o("div",_o,[bo,i(o("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述",rows:"16","onUpdate:modelValue":e[15]||(e[15]=t=>s.product.description=t)},`
              `,512),[[d,s.product.description]])]),o("div",go,[fo,i(o("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[16]||(e[16]=t=>s.product.content=t)},`
              `,512),[[d,s.product.content]])]),o("div",vo,[o("div",yo,[i(o("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[17]||(e[17]=t=>s.product.is_enabled=t)},null,512),[[k,s.product.is_enabled]]),xo])])])])]),o("div",Uo,[o("button",{type:"button",class:"btn btn-outline-secondary mx-2",onClick:e[18]||(e[18]=(...t)=>r.goBack&&r.goBack(...t))}," 取消 "),o("button",{type:"button",class:"btn btn-primary",onClick:e[19]||(e[19]=(...t)=>r.addProduct&&r.addProduct(...t))}," 確認 ")])])}const Lo=y(V,[["render",wo]]);export{Lo as default};
