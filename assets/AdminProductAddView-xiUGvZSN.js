import{L as f}from"./index-sgix6PJC.js";import{_ as g,c as a,a as o,m as v,i as U,j as l,v as i,F as p,h as _,u as x,r as y,o as d}from"./index-XZx92SjD.js";const V={data(){return{product:{imagesUrl:[]},isLoading:!0}},methods:{addProduct(){const r=this.product;this.isLoading=!0,this.$axios.post("https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/product",{data:r}).then(e=>{this.isLoading=!1,this.$Swal.fire({icon:"success",title:"新增成功"}),this.$router.push("/admin/products")}).catch(e=>{this.isLoading=!1,this.$Swal.fire({icon:"error",title:e.response.data.message})})},deleteImg(r){this.product.imagesUrl=[""]},imgUrlUpdate(r){this.product.imagesUrl[0]===""?this.product.imagesUrl[0]=r:this.product.imagesUrl.push(r)},imgUpload(r){const e=r.target.files[0],m=new FormData;m.append("file-to-upload",e),this.$axios.post("https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/upload",m).then(u=>{const s=u.data.imageUrl;this.imgUrlUpdate(s)}).catch(u=>{alert(u.response.data.message)})},goBack(){this.$router.go(-1)}},mounted(){this.isLoading=!1},components:{Loading:f}},k=o("h5",null,"新增產品",-1),w={class:"row"},L={class:"col-sm-4"},B={class:"mb-2"},C={class:"mb-3"},P=o("label",{for:"imageUrl",class:"form-label"},"主要圖片",-1),D=["src"],F=o("h4",{class:"mb-3"},"新增多張圖片",-1),I={class:"mb-3"},z=o("h5",null,"上傳圖片",-1),A={class:"mb-1"},M={class:"mb-3"},N=o("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),S=["onUpdate:modelValue"],j=["src"],E={class:"col-sm-8"},T={class:"mb-3"},q=o("label",{for:"title",class:"form-label"},"標題",-1),G={class:"mb-3"},H=o("label",{for:"feature",class:"form-label"},"特色標語",-1),J={class:"row"},K={class:"mb-3 col-md-6"},O=o("label",{for:"nation",class:"form-label"},"地區",-1),Q={class:"mb-3 col-md-6"},R=o("label",{for:"area",class:"form-label"},"縣市",-1),W={class:"row"},X={class:"mb-3 col-md-6"},Y=o("label",{for:"category",class:"form-label"},"分類",-1),Z={class:"mb-3 col-md-6"},$=o("label",{for:"price",class:"form-label"},"單位",-1),oo={class:"row"},eo={class:"mb-3 col-md-6"},to=o("label",{for:"origin_price",class:"form-label"},"原價",-1),so={class:"mb-3 col-md-6"},lo=o("label",{for:"price",class:"form-label"},"售價",-1),io=o("hr",null,null,-1),ro={class:"mb-3"},no=o("label",{for:"description",class:"form-label"},"產品描述",-1),co={class:"mb-3"},ao=o("label",{for:"content",class:"form-label"},"說明內容",-1),uo={class:"mb-3"},mo={class:"form-check"},po=o("label",{class:"form-check-label",for:"is_enabled"},"是否上架",-1),_o={class:"text-end mb-5"};function ho(r,e,m,u,s,n){const h=y("loading");return d(),a(p,null,[k,o("div",null,[o("div",null,[o("div",w,[o("div",L,[o("div",B,[o("div",C,[s.isLoading?(d(),v(h,{key:0,active:s.isLoading,"can-cancel":!1},null,8,["active"])):U("",!0),P,l(o("input",{type:"text",class:"form-control mb-3",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[0]||(e[0]=t=>s.product.imageUrl=t)},null,512),[[i,s.product.imageUrl]]),o("img",{class:"img-fluid",src:s.product.imageUrl,alt:"商品主要圖片"},null,8,D)]),F,o("div",I,[z,o("input",{type:"file",id:"file",placeholder:"請輸入圖片連結",onChange:e[1]||(e[1]=t=>n.imgUpload(t))},null,32)]),o("div",A,[o("div",M,[N,(d(!0),a(p,null,_(s.product.imagesUrl,(t,c)=>l((d(),a("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":b=>s.product.imagesUrl[c]=b,key:"image_"+c},null,8,S)),[[i,s.product.imagesUrl[c]]])),128))]),(d(!0),a(p,null,_(s.product.imagesUrl,(t,c)=>(d(),a("img",{key:"image_"+c,class:"img-fluid w-50",src:t,alt:"商品圖片"},null,8,j))),128))])]),o("div",null,[o("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=(...t)=>n.deleteImg&&n.deleteImg(...t))}," 刪除圖片 ")])]),o("div",E,[o("div",T,[q,l(o("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[3]||(e[3]=t=>s.product.title=t)},null,512),[[i,s.product.title]])]),o("div",G,[H,l(o("input",{id:"feature",type:"text",class:"form-control",placeholder:"請輸入特色標語","onUpdate:modelValue":e[4]||(e[4]=t=>s.product.feature=t)},null,512),[[i,s.product.feature]])]),o("div",J,[o("div",K,[O,l(o("input",{id:"nation",type:"text",class:"form-control",placeholder:"請輸入地區","onUpdate:modelValue":e[5]||(e[5]=t=>s.product.nation=t)},null,512),[[i,s.product.nation]])]),o("div",Q,[R,l(o("input",{id:"area",type:"text",class:"form-control",placeholder:"請輸入縣市","onUpdate:modelValue":e[6]||(e[6]=t=>s.product.area=t)},null,512),[[i,s.product.area]])])]),o("div",W,[o("div",X,[Y,l(o("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=t=>s.product.category=t)},null,512),[[i,s.product.category]])]),o("div",Z,[$,l(o("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=t=>s.product.unit=t)},null,512),[[i,s.product.unit]])])]),o("div",oo,[o("div",eo,[to,l(o("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=t=>s.product.origin_price=t)},null,512),[[i,s.product.origin_price,void 0,{number:!0}]])]),o("div",so,[lo,l(o("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=t=>s.product.price=t)},null,512),[[i,s.product.price,void 0,{number:!0}]])])]),io,o("div",ro,[no,l(o("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述",rows:"8","onUpdate:modelValue":e[11]||(e[11]=t=>s.product.description=t)},`
            `,512),[[i,s.product.description]])]),o("div",co,[ao,l(o("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[12]||(e[12]=t=>s.product.content=t)},`
            `,512),[[i,s.product.content]])]),o("div",uo,[o("div",mo,[l(o("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[13]||(e[13]=t=>s.product.is_enabled=t)},null,512),[[x,s.product.is_enabled]]),po])])])])]),o("div",_o,[o("button",{type:"button",class:"btn btn-outline-secondary mx-2",onClick:e[14]||(e[14]=(...t)=>n.goBack&&n.goBack(...t))}," 取消 "),o("button",{type:"button",class:"btn btn-primary",onClick:e[15]||(e[15]=(...t)=>n.addProduct&&n.addProduct(...t))}," 新增 ")])])],64)}const go=g(V,[["render",ho]]);export{go as default};
