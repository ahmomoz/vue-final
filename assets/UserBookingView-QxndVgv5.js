import{_ as k,m,a as g,r as c,o as r,c as _,g as L,w as p,h as F,b as e,F as x,i as N,t as d,d as l,n as b,k as C,v as U,f as h}from"./index-7P-JXuOL.js";import{c as n}from"./cartStore-ymezNtm3.js";import{L as j}from"./index-NLQl2SVD.js";import{_ as T}from"./loading-img2-JPOuMyya.js";import{_ as q}from"./step2-4FqYNh2q.js";const B={data(){return{form:{user:{email:"",name:"",tel:"",address:"",date:""},message:""},createOrder:{}}},computed:{...m(n,["isLoading"]),...m(n,["cart"]),...m(n,["total"]),...m(n,["cartList"]),...m(n,["final_total"]),isFormIncomplete(){return!this.form.user.email||!this.form.user.name||!this.form.user.tel||!this.form.user.address}},methods:{...g(n,["getCartList"]),...g(n,["addOrder"])},mounted(){this.getCartList()},components:{Loading:j}},S=e("img",{style:{width:"200px"},src:T,alt:"to-top-btn"},null,-1),E={class:"container-fluid cart-bg pt-lg-6 pb-5 py-xl-6 px-3 px-xl-10"},O=e("div",{class:"text-center mt-5"},[e("img",{class:"img-fluid",src:q,alt:"step-img"})],-1),D={key:0,class:"row flex-row-reverse justify-content-center pb-5","data-aos":"fade-up"},I={class:"col-md-4"},Q={class:"border bg-white p-4 mb-4"},R=["src"],z={class:"w-100"},A={class:"d-flex justify-content-between"},M={class:"mb-0 fw-bold"},G={class:"mb-0"},H={class:"mb-0 fw-bold"},J={class:"table mt-4 border-top border-bottom text-muted"},K=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),P={class:"text-end border-0 px-0 pt-4"},W=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"折扣金額",-1),X={class:"text-end border-0 px-0 pt-0 pb-4"},Y={class:"d-flex justify-content-between mt-4"},Z=e("p",{class:"mb-0 h4 fw-bold"},"總計金額",-1),$={class:"mb-0 h4 fw-bold"},ee={class:"col-md-6"},se=e("h2",{class:"mb-3"},"填寫訂購人資料",-1),te={class:"mb-3"},oe=e("label",{for:"email",class:"form-label"},"*Email",-1),le={class:"mb-3"},ae=e("label",{for:"name",class:"form-label"},"*收件人姓名",-1),ie={class:"mb-3"},ne=e("label",{for:"tel",class:"form-label"},"*收件人電話",-1),re={class:"mb-3"},de=e("label",{for:"address",class:"form-label"},"*收件人地址",-1),me={class:"mb-3"},ce=e("label",{for:"message",class:"form-label"},"留言",-1),_e={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},fe=e("i",{class:"bi bi-chevron-left"},null,-1),ue=["disabled"],pe={key:1,class:"py-5"},be=e("h2",{class:"text-center"},[h("目前購物車無任何商品Q_Q"),e("br"),h("趕快來去選購吧")],-1),he=[be],ve={class:"d-flex justify-content-end my-4"},ge=e("i",{class:"bi bi-chevron-double-right"},null,-1);function xe(i,s,we,ye,t,w){const y=c("loading"),f=c("VeeField"),u=c("error-message"),v=c("RouterLink"),V=c("VeeForm");return r(),_(x,null,[i.isLoading?(r(),L(y,{key:0,active:i.isLoading,"can-cancel":!1},{default:p(()=>[S]),_:1},8,["active"])):F("",!0),e("main",E,[O,i.cartList.length>0?(r(),_("div",D,[e("div",I,[e("div",Q,[(r(!0),_(x,null,N(i.cartList,o=>(r(),_("div",{class:"d-flex mt-2",key:o.id},[e("img",{src:o.product.imagesUrl[0],alt:"product-img",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,R),e("div",z,[e("div",A,[e("p",M,d(o.product.title),1),e("p",G,"NT$"+d(o.product.price),1)]),e("p",H,"x"+d(o.qty),1)])]))),128)),e("table",J,[e("tbody",null,[e("tr",null,[K,e("td",P,"NT$"+d(i.total.toFixed(0)),1)]),e("tr",null,[W,e("td",X," -NT$"+d((i.final_total-i.total).toFixed(0)),1)])])]),e("div",Y,[Z,e("p",$,"NT$"+d(i.final_total.toFixed(0)),1)])])]),e("div",ee,[se,l(V,{ref:"form",onSubmit:o=>""},{default:p(({errors:o})=>[e("div",te,[oe,l(f,{id:"email",name:"email",type:"email",class:b(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),l(u,{name:"email",class:"invalid-feedback"})]),e("div",le,[ae,l(f,{id:"name",name:"姓名",type:"text",class:b(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),l(u,{name:"姓名",class:"invalid-feedback"})]),e("div",ie,[ne,l(f,{id:"tel",name:"電話",type:"text",class:b(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["class","modelValue"]),l(u,{name:"電話",class:"invalid-feedback"})]),e("div",re,[de,l(f,{id:"address",name:"地址",type:"text",class:b(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),l(u,{name:"地址",class:"invalid-feedback"})]),e("div",me,[ce,C(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},`\r
            `,512),[[U,t.form.message]])]),e("div",_e,[l(v,{to:"/cart",class:"text-dark mt-md-0 mt-3"},{default:p(()=>[fe,h(" 返回上一步 ")]),_:1}),e("button",{type:"submit",class:"btn btn-primary py-3 px-5 rounded-0",onClick:s[5]||(s[5]=a=>i.addOrder(t.form)),disabled:w.isFormIncomplete}," 送出訂單 ",8,ue)])]),_:1},512)])])):(r(),_("div",pe,he)),e("div",ve,[l(v,{to:"/products",class:"fs-5 text-decoration-none link-hover"},{default:p(()=>[h(" 繼續購物 "),ge]),_:1})])])],64)}const Ce=k(B,[["render",xe]]);export{Ce as default};
