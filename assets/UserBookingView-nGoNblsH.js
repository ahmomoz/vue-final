import{_ as k,m as c,a as x,r as _,o as n,c as f,g as L,w as b,h as F,b as e,F as w,i as N,t as d,d as a,n as h,k as C,v as U,f as v}from"./index-NTjvrLLD.js";import{c as i}from"./cartStore-9j1A77Il.js";import{L as j}from"./index-vf2sePQf.js";import{_ as B}from"./loading-img2-JPOuMyya.js";import{_ as T}from"./step2-4FqYNh2q.js";const q={data(){return{form:{user:{email:"",name:"",tel:"",address:"",date:""},message:""},createOrder:{}}},computed:{...c(i,["isLoading"]),...c(i,["cart"]),...c(i,["total"]),...c(i,["cartList"]),...c(i,["final_total"]),isFormIncomplete(){return!this.form.user.email||!this.form.user.name||!this.form.user.tel||!this.form.user.address}},methods:{...x(i,["getCartList"]),...x(i,["addOrder"]),formatPrice(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},mounted(){this.getCartList()},components:{Loading:j}},P=e("img",{style:{width:"200px"},src:B,alt:"to-top-btn"},null,-1),S={class:"container-fluid cart-bg pt-lg-6 pb-5 py-xl-6 px-3 px-xl-10"},E=e("div",{class:"text-center mt-5"},[e("img",{class:"img-fluid",src:T,alt:"step-img"})],-1),O={key:0,class:"row flex-row-reverse justify-content-center pb-5","data-aos":"fade-up"},D={class:"col-md-4"},I={class:"border bg-white p-4 mb-4"},Q=["src"],R={class:"w-100"},z={class:"d-flex justify-content-between"},A={class:"mb-0 fw-bold"},M={class:"mb-0"},G={class:"mb-0 fw-bold"},H={class:"table mt-4 border-top border-bottom text-muted"},J=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),K={class:"text-end border-0 px-0 pt-4"},W=e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"折扣金額",-1),X={class:"text-end border-0 px-0 pt-0 pb-4"},Y={class:"d-flex justify-content-between mt-4"},Z=e("p",{class:"mb-0 h4 fw-bold"},"總計金額",-1),$={class:"mb-0 h4 fw-bold"},ee={class:"col-md-6"},se=e("h2",{class:"mb-3"},"填寫訂購人資料",-1),te={class:"mb-3"},oe=e("label",{for:"email",class:"form-label"},"*Email",-1),le={class:"mb-3"},ae=e("label",{for:"name",class:"form-label"},"*收件人姓名",-1),re={class:"mb-3"},ie=e("label",{for:"tel",class:"form-label"},"*收件人電話",-1),ne={class:"mb-3"},de=e("label",{for:"address",class:"form-label"},"*收件人地址",-1),me={class:"mb-3"},ce=e("label",{for:"message",class:"form-label"},"留言",-1),_e={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},fe=e("i",{class:"bi bi-chevron-left"},null,-1),ue=["disabled"],pe={key:1,class:"py-5"},be=e("h2",{class:"text-center"},[v("目前購物車無任何商品Q_Q"),e("br"),v("趕快來去選購吧")],-1),he=[be],ve={class:"d-flex justify-content-end my-4"},ge=e("i",{class:"bi bi-chevron-double-right"},null,-1);function xe(t,s,we,ye,o,m){const y=_("loading"),u=_("VeeField"),p=_("error-message"),g=_("RouterLink"),V=_("VeeForm");return n(),f(w,null,[t.isLoading?(n(),L(y,{key:0,active:t.isLoading,"can-cancel":!1},{default:b(()=>[P]),_:1},8,["active"])):F("",!0),e("main",S,[E,t.cartList.length>0?(n(),f("div",O,[e("div",D,[e("div",I,[(n(!0),f(w,null,N(t.cartList,l=>(n(),f("div",{class:"d-flex mt-2",key:l.id},[e("img",{src:l.product.imagesUrl[0],alt:"product-img",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,Q),e("div",R,[e("div",z,[e("p",A,d(l.product.title),1),e("p",M,"NT$"+d(m.formatPrice(l.product.price)),1)]),e("p",G,"x"+d(l.qty),1)])]))),128)),e("table",H,[e("tbody",null,[e("tr",null,[J,e("td",K,"NT$"+d(m.formatPrice(t.total.toFixed(0))),1)]),e("tr",null,[W,e("td",X," -NT$"+d(m.formatPrice((t.final_total-t.total).toFixed(0))),1)])])]),e("div",Y,[Z,e("p",$,"NT$"+d(m.formatPrice(t.final_total.toFixed(0))),1)])])]),e("div",ee,[se,a(V,{ref:"form",onSubmit:l=>""},{default:b(({errors:l})=>[e("div",te,[oe,a(u,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=r=>o.form.user.email=r)},null,8,["class","modelValue"]),a(p,{name:"email",class:"invalid-feedback"})]),e("div",le,[ae,a(u,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=r=>o.form.user.name=r)},null,8,["class","modelValue"]),a(p,{name:"姓名",class:"invalid-feedback"})]),e("div",re,[ie,a(u,{id:"tel",name:"電話",type:"text",class:h(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=r=>o.form.user.tel=r)},null,8,["class","modelValue"]),a(p,{name:"電話",class:"invalid-feedback"})]),e("div",ne,[de,a(u,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=r=>o.form.user.address=r)},null,8,["class","modelValue"]),a(p,{name:"地址",class:"invalid-feedback"})]),e("div",me,[ce,C(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=r=>o.form.message=r)},`\r
            `,512),[[U,o.form.message]])]),e("div",_e,[a(g,{to:"/cart",class:"text-dark mt-md-0 mt-3"},{default:b(()=>[fe,v(" 返回上一步 ")]),_:1}),e("button",{type:"submit",class:"btn btn-primary py-3 px-5 rounded-0",onClick:s[5]||(s[5]=r=>t.addOrder(o.form)),disabled:m.isFormIncomplete}," 送出訂單 ",8,ue)])]),_:1},512)])])):(n(),f("div",pe,he)),e("div",ve,[a(g,{to:"/products",class:"fs-5 text-decoration-none link-hover"},{default:b(()=>[v(" 繼續購物 "),ge]),_:1})])])],64)}const Ce=k(q,[["render",xe]]);export{Ce as default};
