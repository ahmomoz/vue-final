import{C as w}from"./CardPagination-b_uqQSNH.js";import{L as x}from"./index-RIvZXr4n.js";import{_ as k,c as i,a as t,j as C,v as B,t as l,b as h,w as p,d,m as P,i as L,F as m,h as b,r as g,o}from"./index-CEKiAcMy.js";const V={data(){return{sortBy:"default",ascending:!0,allProducts:[],products:[],searchInput:"",pagination:{},isLoading:!0}},methods:{getProductsList(r=1){this.isLoading=!0,this.$axios.get(`https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/products?page=${r}`).then(e=>{const{products:a,pagination:u}=e.data;this.allProducts=a,this.products=a,this.pagination=u}).catch(e=>{alert(e.response.data.message)}).finally(()=>{this.isLoading=!1})},deleteProduct(r,e){this.$Swal.fire({title:"即將刪除商品",text:`確定要刪除「${r}」嗎？`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#eb5a68",cancelButtonColor:"#8bafd7",confirmButtonText:"確定刪除",cancelButtonText:"取消"}).then(a=>{a.isConfirmed&&this.$axios.delete(`https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/product/${e}`).then(u=>{this.$Swal.fire({title:"已刪除",icon:"success"}),this.getProductsList()}).catch(u=>{this.$Swal.fire({icon:"error",title:u.response.data.message})})})},productSearch(){this.products=this.productsFilteredResults}},computed:{sortProducts(){return[...this.products].sort((e,a)=>this.ascending?e[this.sortBy]-a[this.sortBy]:a[this.sortBy]-e[this.sortBy])},productsFilteredResults(){return this.allProducts.filter(e=>e.title.toLowerCase().includes(this.searchInput.toLowerCase()))}},mounted(){this.getProductsList()},components:{CardPagination:w,Loading:x}},N={id:"app"},S={class:"card mt-lg-3 shadow-sm"},T={class:"navbar navbar-light bg-light"},$={class:"container-fluid"},F={class:"row g-2 align-items-center"},I={class:"col-auto"},E={class:"col-auto"},M={class:"card my-1 my-lg-4 shadow-sm"},j={class:"card-header"},z={class:"text-end"},A=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus",viewBox:"4 4 12 12"},[t("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"})],-1),D={class:"card-body"},G={class:"table table-hover"},R={class:"bg-light"},U={class:"align-middle"},q=t("th",null,"分類",-1),H=t("th",null,"地區",-1),J=t("th",null,"產品名稱",-1),K=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down-up ms-1",viewBox:"0 0 16 16"},[t("path",{"fill-rule":"evenodd",d:"M11.5 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5m-7-14a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L4 13.293V1.5a.5.5 0 0 1 .5-.5"})],-1),O=t("th",null,"狀態",-1),Q=t("th",null,"操作",-1),W={key:0},X=t("br",null,null,-1),Y={style:{color:"rgb(196, 196, 196)"}},Z={key:0,class:"text-primary"},tt={key:1},st={class:"btn-group"},et=["onClick"],ot={key:1},nt=t("br",null,null,-1),it={style:{color:"rgb(196, 196, 196)"}},lt={key:0,class:"text-success"},at={key:1},rt={class:"btn-group"},ct=["onClick"],dt={class:"card-footer d-flex justify-content-center"};function ut(r,e,a,u,n,c){const _=g("router-link"),v=g("loading"),y=g("card-pagination");return o(),i("div",N,[t("div",S,[t("nav",T,[t("div",$,[t("form",F,[t("div",I,[C(t("input",{class:"form-control",type:"search",placeholder:"搜尋商品名稱","aria-label":"Search","onUpdate:modelValue":e[0]||(e[0]=s=>n.searchInput=s)},null,512),[[B,n.searchInput]])]),t("div",E,[t("button",{class:"btn btn-outline-primary",type:"submit",onClick:e[1]||(e[1]=(...s)=>c.productSearch&&c.productSearch(...s))},"搜尋")])])])])]),t("div",M,[t("div",j,[t("div",z,[t("button",{type:"button",class:"btn btn-primary text-white mx-3",onClick:e[2]||(e[2]=s=>n.ascending=!n.ascending)},l(n.ascending?"降冪":"升冪")+"排序 ",1),h(_,{class:"btn btn-primary text-light",to:"product/add"},{default:p(()=>[A,d(" 建立新的產品 ")]),_:1})])]),t("div",D,[t("table",G,[t("thead",R,[t("tr",U,[q,H,J,t("th",{onClick:e[3]||(e[3]=s=>n.sortBy="price")},[d(" 售價 "),K]),O,Q])]),n.sortBy==="default"?(o(),i("tbody",W,[n.isLoading?(o(),P(v,{key:0,active:n.isLoading,"can-cancel":!1},null,8,["active"])):L("",!0),(o(!0),i(m,null,b(n.products,s=>(o(),i("tr",{key:s.id},[t("td",null,l(s.category),1),t("td",null,l(s.nation),1),t("td",null,l(s.title),1),t("td",null,[d(" NT$"+l(s.price)+" ",1),X,t("del",Y," NT$"+l(s.origin_price),1)]),t("td",null,[s.is_enabled?(o(),i("span",Z,"上架中")):(o(),i("span",tt,"未上架"))]),t("td",null,[t("div",st,[h(_,{class:"btn btn-outline-primary btn-sm",to:"product/edit/"+s.id},{default:p(()=>[d("編輯")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:f=>c.deleteProduct(s.title,s.id)}," 刪除 ",8,et)])])]))),128))])):(o(),i("tbody",ot,[(o(!0),i(m,null,b(c.sortProducts,s=>(o(),i("tr",{key:s.name},[t("td",null,l(s.category),1),t("td",null,l(s.nation),1),t("td",null,l(s.title),1),t("td",null,[d(" NT$"+l(s.price)+" ",1),nt,t("del",it," NT$"+l(s.origin_price),1)]),t("td",null,[s.is_enabled?(o(),i("span",lt,"上架中")):(o(),i("span",at,"未上架"))]),t("td",null,[t("div",rt,[h(_,{class:"btn btn-outline-primary btn-sm",to:"product/edit/"+s.id},{default:p(()=>[d("編輯")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:f=>c.deleteProduct(s.title,s.id)}," 刪除 ",8,ct)])])]))),128))]))])]),t("div",dt,[h(y,{pagination:n.pagination,onEmitGetlist:c.getProductsList},null,8,["pagination","onEmitGetlist"])])])])}const gt=k(V,[["render",ut]]);export{gt as default};
