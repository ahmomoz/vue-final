import{C as q}from"./CardPagination-kc5pJ1fT.js";import{L as I}from"./index-LMUAtbb4.js";import{_ as O,r as w,o as a,c,g as A,w as u,h as C,b as t,d as p,t as l,f as m,k as x,v as V,l as R,F as f,i as _,n as g,q as v,s as E}from"./index-erzOO78X.js";import{_ as j}from"./loading-img2-JPOuMyya.js";import{_ as T}from"./leaf-primary-geahJmbm.js";var S={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APIPATH:"ahmomoz",BASE_URL:"/vue-final/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:P,VITE_APIPATH:L}=S,U={data(){return{products:[],allProducts:[],nations:[],taiwanAreas:[],japanAreas:[],selectedOption:"最新上架",options:["最新上架","價格 (從低到高)","價格 (從高到低)"],sortBy:"default",ascending:!0,searchInput:"",filterArea:[],category:"",pagination:{},isLoading:!0}},methods:{getProductsList(o=1){this.isLoading=!0,this.$axios.get(`${P}/api/${L}/products?page=${o}`).then(s=>{const{products:h,pagination:k}=s.data;this.products=h,this.pagination=k,this.sortBy="default",this.selectedOption="最新上架",this.searchInput="",this.$route.query.category&&(this.category=this.$route.query.category,this.productCategoryFilter(this.category))}).catch(s=>{this.$Swal.fire({icon:"error",title:s.response.data.message})}).finally(()=>{this.isLoading=!1})},getAllProductsList(){this.isLoading=!0,this.$axios.get(`${P}/api/${L}/products/all`).then(o=>{this.allProducts=o.data.products,this.getAreas(),this.getProductsList()}).catch(o=>{this.$Swal.fire({icon:"error",title:o.response.data.message})}).finally(()=>{this.isLoading=!1})},getRouterCategory(){this.category=this.$route.query.category,this.productCategoryFilter(this.category)},getAreas(){this.allProducts.forEach(o=>{o.nation==="台灣"&&!this.taiwanAreas.includes(o.area)?this.taiwanAreas.push(o.area):o.nation==="日本"&&!this.japanAreas.includes(o.area)&&this.japanAreas.push(o.area)}),this.taiwanAreas=Array.from(this.taiwanAreas).sort(),this.japanAreas=Array.from(this.japanAreas).sort()},selectOption(o){this.selectedOption=o,this.selectedOption==="價格 (從低到高)"?(this.sortBy="price",this.ascending=!0):this.selectedOption==="價格 (從高到低)"?(this.sortBy="price",this.ascending=!1):this.sortBy="default"},productSearch(){this.searchInput!==""?this.products=this.productsSearchResults:this.getProductsList()},productAreaFilter(){this.filterArea.length!==0?this.products=this.productsAreaFilterResults:this.getProductsList()},productCategoryFilter(o){this.filterArea=[],this.category=o,this.category?this.products=this.productsCategoryFilterResults:this.getProductsList()}},computed:{sortProducts(){return[...this.products].sort((s,h)=>this.ascending?s[this.sortBy]-h[this.sortBy]:h[this.sortBy]-s[this.sortBy])},productsSearchResults(){return this.allProducts.filter(s=>s.title.toLowerCase().includes(this.searchInput.toLowerCase()))},productsAreaFilterResults(){return this.sortBy!=="default"||this.searchInput!==""||this.category!==""?this.products.filter(s=>this.filterArea.some(h=>s.area.toLowerCase().includes(h.toLowerCase()))):this.allProducts.filter(s=>this.filterArea.some(h=>s.area.toLowerCase().includes(h.toLowerCase())))},productsCategoryFilterResults(){return this.allProducts.filter(s=>s.category.toLowerCase().includes(this.category.toLowerCase()))}},mounted(){this.getAllProductsList()},components:{CardPagination:q,Loading:I}},N=t("img",{style:{width:"200px"},src:j,alt:"to-top-btn"},null,-1),z={class:"container-fluid bg-light pt-6 pb-5 py-xl-8 px-3 px-xl-10"},M={class:"mb-3 mb-xl-5","aria-label":"breadcrumb"},D={class:"breadcrumb"},G={class:"breadcrumb-item"},H={class:"breadcrumb-item active","aria-current":"page"},K=t("p",{class:"fs-xl-3 text-gray my-0 ms-5"},"Products",-1),J={class:"lh-base fs-xl-1 text-gray"},Q=t("img",{src:T,alt:"logo",class:"img-fluid"},null,-1),W={class:"w-xl-50 d-flex justify-content-between bg-white rounded-pill mt-4 px-3 px-lg-4 py-lg-3 shadow-sm"},X=t("i",{class:"bi bi-search my-auto"},null,-1),Y={class:"container-fluid px-xl-10 mt-4 mt-xl-5"},Z={class:"d-flex flex-wrap flex-xl-nowrap justify-content-center justify-content-xl-between"},$={class:"row my-4 my-xl-5"},tt={class:"col-3 card d-none d-xl-block"},et={class:"position-sticky card-body",style:{top:"5rem"}},st={class:"p-4"},ot=t("h3",{class:"fw-500"},"依地區篩選",-1),rt=t("h4",{class:"fw-500 mt-xl-4"},"台灣",-1),lt=["value","id"],it=["for"],at={class:"p-4"},nt=t("h4",{class:"fw-500 mt-xl-4"},"日本",-1),ct=["value","id"],dt=["for"],ut={class:"col-xl-9"},ht={class:"container-fluid"},pt={class:"dropdown d-flex justify-content-center justify-content-xl-end"},mt=t("p",{class:"fs-xl-5 my-auto me-3"},"排序方式",-1),ft={class:"btn btn-outline-primary fs-xl-5 py-2 px-4 dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",style:{width:"200px"}},_t={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},yt=["onClick"],gt={class:"accordion px-3 mt-3 d-block d-xl-none",id:"accordionExample"},xt={class:"accordion-item"},wt=t("h2",{class:"accordion-header",id:"headingOne"},[t("button",{class:"accordion-button collapsed py-2",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"},[t("i",{class:"bi bi-funnel"}),m("地區篩選 ")])],-1),vt={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},bt={class:"accordion-body d-flex justify-content-around py-4"},kt={class:""},At=t("h4",{class:"fs-5 fw-500 mt-xl-4"},"台灣",-1),Ct=["value","id"],Pt=["for"],Lt=t("h4",{class:"fs-5 fw-500 mt-xl-4"},"日本",-1),Ft=["value","id"],Bt=["for"],qt={key:0,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3","data-aos":"fade-up"},It={class:"card h-100 mb-4 border-0 shadow-sm product-card-hover"},Ot={style:{position:"relative"}},Vt={class:"fs-5 text-dark bg-white ps-2 opacity-75",style:{position:"absolute",top:"15px","z-index":"2"}},Rt=t("i",{class:"bi bi-geo-alt-fill"},null,-1),Et=["src"],jt={class:"card-body"},Tt={class:"fs-5 text-primary"},St=t("i",{class:"bi bi-play-fill"},null,-1),Ut={class:"card-text text-dark my-2 link-hover"},Nt={class:"fs-5 text-primary fw-bolder"},zt={style:{color:"rgb(196, 196, 196)"}},Mt=t("br",null,null,-1),Dt={key:1,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3","data-aos":"fade-up"},Gt={class:"card h-100 mb-4 border-0 shadow-sm product-card-hover"},Ht={style:{position:"relative"}},Kt={class:"fs-5 text-dark bg-white ps-2 opacity-75",style:{position:"absolute",top:"15px","z-index":"2"}},Jt=t("i",{class:"bi bi-geo-alt-fill"},null,-1),Qt=["src"],Wt={class:"card-body"},Xt={class:"fs-5 text-primary"},Yt=t("i",{class:"bi bi-play-fill"},null,-1),Zt={class:"card-text text-dark my-2 link-hover"},$t={class:"fs-5 text-primary fw-bolder"},te={style:{color:"rgb(196, 196, 196)"}},ee=t("br",null,null,-1),se={class:"d-flex justify-content-center mt-4 mt-xl-6"};function oe(o,s,h,k,r,i){const F=w("loading"),b=w("RouterLink"),y=w("router-link"),B=w("card-pagination");return a(),c(f,null,[r.isLoading?(a(),A(F,{key:0,active:r.isLoading,"can-cancel":!1},{default:u(()=>[N]),_:1},8,["active"])):C("",!0),t("header",z,[t("nav",M,[t("ol",D,[t("li",G,[p(b,{class:"text-decoration-none",to:"/",exact:""},{default:u(()=>[m("首頁")]),_:1})]),t("li",H,l(r.category===""||r.category===void 0?"所有商品":r.category),1)])]),K,t("h2",J,[Q,m(" "+l(r.category===""||r.category===void 0?"所有商品":`${r.category} 所有商品`),1)]),t("div",W,[X,x(t("input",{class:"fs-5 form-control border-0",type:"search",placeholder:"想找些什麼呢？","onUpdate:modelValue":s[0]||(s[0]=e=>r.searchInput=e),onKeyup:s[1]||(s[1]=R((...e)=>i.productSearch&&i.productSearch(...e),["enter"]))},null,544),[[V,r.searchInput]])])]),t("main",Y,[t("section",Z,[p(y,{to:"/products",class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[2]||(s[2]=e=>i.productCategoryFilter(""))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":!o.$route.query.category}])},"所有商品",2)]),_:1}),p(y,{to:{name:"產品列表",query:{category:"動物園"}},class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[3]||(s[3]=e=>i.productCategoryFilter("動物園"))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":o.$route.query.category==="動物園"}])},"動物園",2)]),_:1}),p(y,{to:{name:"產品列表",query:{category:"動物聚落"}},class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[4]||(s[4]=e=>i.productCategoryFilter("動物聚落"))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":o.$route.query.category==="動物聚落"}])},"動物聚落",2)]),_:1}),p(y,{to:{name:"產品列表",query:{category:"農場"}},class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[5]||(s[5]=e=>i.productCategoryFilter("農場"))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":o.$route.query.category==="農場"}])},"動物農場",2)]),_:1}),p(y,{to:{name:"產品列表",query:{category:"水族館"}},class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[6]||(s[6]=e=>i.productCategoryFilter("水族館"))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":o.$route.query.category==="水族館"}])},"水族館",2)]),_:1}),p(y,{to:{name:"產品列表",query:{category:"鳥園"}},class:"w-25 w-xl-100 card nav-link link-hover py-2 p-xl-2 shadow-sm m-2 me-xl-3",onClick:s[7]||(s[7]=e=>i.productCategoryFilter("鳥園"))},{default:u(()=>[t("p",{class:g(["fs-xl-3 m-auto",{"text-primary":o.$route.query.category==="鳥園"}])},"鳥園",2)]),_:1})]),t("section",$,[t("nav",tt,[t("div",et,[t("div",st,[ot,rt,(a(!0),c(f,null,_(r.taiwanAreas,(e,n)=>(a(),c("div",{class:"form-check",key:"taiwanArea"+n},[x(t("input",{class:"form-check-input fs-5 mt-xl-3",type:"checkbox",value:e,id:e+n,"onUpdate:modelValue":s[8]||(s[8]=d=>r.filterArea=d),onChange:s[9]||(s[9]=(...d)=>i.productAreaFilter&&i.productAreaFilter(...d))},null,40,lt),[[v,r.filterArea]]),t("label",{class:"form-check-label fs-5 mt-xl-2",for:e+n},l(e),9,it)]))),128))]),t("div",at,[nt,(a(!0),c(f,null,_(r.japanAreas,(e,n)=>(a(),c("div",{class:"form-check",key:"japanArea"+n},[x(t("input",{class:"form-check-input fs-5 mt-xl-3",type:"checkbox",value:e,id:e+n,"onUpdate:modelValue":s[10]||(s[10]=d=>r.filterArea=d),onChange:s[11]||(s[11]=(...d)=>i.productAreaFilter&&i.productAreaFilter(...d))},null,40,ct),[[v,r.filterArea]]),t("label",{class:"form-check-label fs-5 mt-xl-2",for:e+n},l(e),9,dt)]))),128))])])]),t("main",ut,[t("div",ht,[t("div",pt,[mt,t("button",ft,l(r.selectedOption),1),t("ul",_t,[(a(!0),c(f,null,_(r.options,(e,n)=>(a(),c("li",{key:n},[t("a",{class:"dropdown-item fs-5",href:"#",onClick:E(d=>i.selectOption(e),["prevent"])},l(e),9,yt)]))),128))])]),t("div",gt,[t("div",xt,[wt,t("div",vt,[t("div",bt,[t("div",kt,[At,(a(!0),c(f,null,_(r.taiwanAreas,(e,n)=>(a(),c("div",{class:"form-check",key:"taiwanArea"+n},[x(t("input",{class:"form-check-input mt-xl-3",type:"checkbox",value:e,id:e+n,"onUpdate:modelValue":s[12]||(s[12]=d=>r.filterArea=d),onChange:s[13]||(s[13]=(...d)=>i.productAreaFilter&&i.productAreaFilter(...d))},null,40,Ct),[[v,r.filterArea]]),t("label",{class:"form-check-label mt-xl-2",for:e+n},l(e),9,Pt)]))),128))]),t("div",null,[Lt,(a(!0),c(f,null,_(r.japanAreas,(e,n)=>(a(),c("div",{class:"form-check",key:"japanArea"+n},[x(t("input",{class:"form-check-input mt-xl-3",type:"checkbox",value:e,id:e+n,"onUpdate:modelValue":s[14]||(s[14]=d=>r.filterArea=d),onChange:s[15]||(s[15]=(...d)=>i.productAreaFilter&&i.productAreaFilter(...d))},null,40,Ft),[[v,r.filterArea]]),t("label",{class:"form-check-label mt-xl-2",for:e+n},l(e),9,Bt)]))),128))])])])])]),r.sortBy==="default"?(a(),c("div",qt,[(a(!0),c(f,null,_(r.products,e=>(a(),c("div",{class:"col mt-4",key:e.id},[p(b,{class:"text-decoration-none",to:`/product/${e.id}`},{default:u(()=>[t("div",It,[t("div",Ot,[t("div",null,[t("span",Vt,[Rt,m(" "+l(e.nation)+l(e.area),1)]),t("img",{src:e.imagesUrl[0],style:{height:"240px","z-index":"1"},class:"card-img-top object-fit-cover",alt:"product-img"},null,8,Et)])]),t("div",jt,[t("span",Tt,[St,m(" "+l(e.category),1)]),t("h4",Ut,l(e.title),1),t("p",null,l(e.feature),1),t("p",Nt,[t("del",zt," NT$"+l(e.origin_price),1),Mt,m(" NT$"+l(e.price),1)])])])]),_:2},1032,["to"])]))),128))])):(a(),c("div",Dt,[(a(!0),c(f,null,_(i.sortProducts,e=>(a(),c("div",{class:"col mt-4",key:e.id},[p(b,{class:"text-decoration-none",to:`/product/${e.id}`},{default:u(()=>[t("div",Gt,[t("div",Ht,[t("div",null,[t("span",Kt,[Jt,m(" "+l(e.nation)+l(e.area),1)]),t("img",{src:e.imagesUrl[0],style:{height:"240px","z-index":"1"},class:"card-img-top object-fit-cover",alt:"product-img"},null,8,Qt)])]),t("div",Wt,[t("span",Xt,[Yt,m(" "+l(e.category),1)]),t("h4",Zt,l(e.title),1),t("p",null,l(e.feature),1),t("p",$t,[t("del",te," NT$"+l(e.origin_price),1),ee,m(" NT$"+l(e.price),1)])])])]),_:2},1032,["to"])]))),128))]))]),t("div",se,[this.filterArea.length===0&&this.category===""?(a(),A(B,{key:0,pagination:r.pagination,onEmitGetlist:i.getProductsList},null,8,["pagination","onEmitGetlist"])):C("",!0)])])])])],64)}const ce=O(U,[["render",oe]]);export{ce as default};
