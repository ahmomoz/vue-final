import{L as p}from"./index-RIvZXr4n.js";import{_ as m,c as h,a as o,m as _,i as f,j as c,v as a,s as b,r as g,o as d}from"./index-CEKiAcMy.js";const v={props:["id"],data(){return{drag:!1,coupon:{},currentPage:"",isLoading:!0}},methods:{getCouponList(r){this.isLoading=!0;const{id:e}=this.$route.params;this.$axios.get(`https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/coupons?page=${r}`).then(n=>{const i=n.data.coupons;this.coupon=i.find(s=>s.id.toLowerCase().includes(e.toLowerCase()))}).catch(n=>{this.$Swal.fire({icon:"error",title:n.response.data.message})}).finally(()=>{this.isLoading=!1})},addCoupon(){const e=Math.floor(new Date().getTime()/1e3);this.coupon.due_date=e;const n=this.coupon;this.isLoading=!0,this.$axios.put(`https://vue3-course-api.hexschool.io/v2/api/ahmomoz/admin/coupon/${this.coupon.id}`,{data:n}).then(i=>{this.isLoading=!1,this.$Swal.fire({icon:"success",title:"更新成功"}),this.$router.push("/admin/conpons")}).catch(i=>{this.isLoading=!1,this.$Swal.fire({icon:"error",title:i.response.data.message})})},goBack(){this.$router.go(-1)}},mounted(){this.isLoading=!1,this.getCouponList(this.$route.query.currentPage)},components:{Loading:p}},x={class:"container"},L=o("h1",{class:"fs-3 mt-3"},"新增優惠券",-1),k={class:"mx-auto"},y={class:"card mt-4 shadow-sm"},C=o("div",{class:"card-header"},[o("h5",{class:"my-1"},"基本資訊")],-1),w={class:"card-body"},V={class:"mb-3"},B=o("label",{for:"title",class:"form-label"},"*優惠券名稱",-1),T={class:"row"},U={class:"mb-3 col-md-6"},P=o("label",{for:"code",class:"form-label"},"*折扣碼",-1),S={class:"mb-3 col-md-6"},M=o("label",{for:"origin_price",class:"form-label"},"*折扣數",-1),$={class:"mb-3"},z=o("label",{for:"content",class:"form-label"},"備註(選填)",-1),A={class:"mb-3"},D={class:"form-check"},E=o("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),N={class:"text-end mt-3 mb-5"};function j(r,e,n,i,s,l){const u=g("loading");return d(),h("div",x,[L,o("div",k,[s.isLoading?(d(),_(u,{key:0,active:s.isLoading,"can-cancel":!1},null,8,["active"])):f("",!0),o("div",y,[C,o("div",w,[o("div",V,[B,c(o("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入優惠券名稱","onUpdate:modelValue":e[0]||(e[0]=t=>s.coupon.title=t)},null,512),[[a,s.coupon.title]])]),o("div",T,[o("div",U,[P,c(o("input",{id:"code",type:"text",class:"form-control",placeholder:"請輸入折扣碼(例如:HAPPY800)","onUpdate:modelValue":e[1]||(e[1]=t=>s.coupon.code=t)},null,512),[[a,s.coupon.code]])]),o("div",S,[M,c(o("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入數字(例如:80%請填80)","onUpdate:modelValue":e[2]||(e[2]=t=>s.coupon.percent=t)},null,512),[[a,s.coupon.percent,void 0,{number:!0}]])])]),o("div",$,[z,c(o("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入備註","onUpdate:modelValue":e[3]||(e[3]=t=>s.coupon.content=t)},`
              `,512),[[a,s.coupon.content]])]),o("div",A,[o("div",D,[c(o("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[4]||(e[4]=t=>s.coupon.is_enabled=t)},null,512),[[b,s.coupon.is_enabled]]),E])])])])]),o("div",N,[o("button",{type:"button",class:"btn btn-outline-secondary mx-2",onClick:e[5]||(e[5]=(...t)=>l.goBack&&l.goBack(...t))}," 取消 "),o("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>l.addCoupon&&l.addCoupon(...t))}," 更新 ")])])}const I=m(v,[["render",j]]);export{I as default};
